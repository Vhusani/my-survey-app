"use strict";(self.webpackChunksurvey_app=self.webpackChunksurvey_app||[]).push([[179],{2011:(at,De,L)=>{L.d(De,{Dh:()=>me,GT:()=>fe,cc:()=>Re,hO:()=>Be,on:()=>G,pX:()=>se,xv:()=>ge});var d=L(4650),te=L(127),F=L(5813);at=L.hmd(at);const ae=["ngOnDestroy"],se=(_e,Xe,lt,xe={})=>new Proxy(_e,{get:(we,Ie)=>lt.runOutsideAngular(()=>{var Ue;if(_e[Ie])return!(null===(Ue=xe?.spy)||void 0===Ue)&&Ue.get&&xe.spy.get(Ie,_e[Ie]),_e[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const He=Xe.toPromise().then($=>{const ye=$&&$[Ie];return"function"==typeof ye?ye.bind($):ye&&ye.then?ye.then(J=>lt.run(()=>J)):lt.run(()=>ye)});return new Proxy(()=>{},{get:($,ye)=>He[ye],apply:($,ye,J)=>He.then(ne=>{var oe;const ie=ne&&ne(...J);return!(null===(oe=xe?.spy)||void 0===oe)&&oe.apply&&xe.spy.apply(Ie,J,ie),ie})})})}),fe=(_e,Xe)=>{Xe.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(xe=>{Object.defineProperty(_e.prototype,xe,Object.getOwnPropertyDescriptor(lt.prototype||lt,xe))})})};class le{constructor(Xe){return Xe}}const me=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function G(_e,Xe,lt){const we="object"==typeof lt&&lt||{};we.name=we.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ue=te.Z.apps.filter(He=>He&&He.name===we.name)[0]||Xe.runOutsideAngular(()=>te.Z.initializeApp(_e,we));try{JSON.stringify(_e)!==JSON.stringify(Ue.options)&&W("error",`${Ue.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ue)}const W=(_e,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Xe)},X={provide:le,useFactory:G,deps:[me,d.R0b,[new d.FiY,ge]]};let Be=(()=>{class _e{constructor(lt){te.Z.registerVersion("angularfire",F.q4.full,"core"),te.Z.registerVersion("angularfire",F.q4.full,"app-compat"),te.Z.registerVersion("angular",d.q4F.full,lt.toString())}static initializeApp(lt,xe){return{ngModule:_e,providers:[{provide:me,useValue:lt},{provide:ge,useValue:xe}]}}}return _e.\u0275fac=function(lt){return new(lt||_e)(d.LFG(d.Lbi))},_e.\u0275mod=d.oAB({type:_e}),_e.\u0275inj=d.cJS({providers:[X]}),_e})();function Re(_e,Xe,lt,xe,we){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===_e)||[];if(Ie)return function Ee(_e,Xe){try{return _e.toString()===Xe.toString()}catch{return _e===Xe}}(we,Ue)||(ve("error",`${Xe} was already initialized on the ${lt} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:we,was:Ue})),Ie;{const He=xe();return globalThis.\u0275AngularfireInstanceCache.push([_e,He,we]),He}}const tt=!!at.hot,ve=(_e,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,De,L)=>{L.d(De,{q4:()=>Xr,iC:()=>wo,HU:()=>ql,vb:()=>ia,JM:()=>zl});var d=L(4650),te=L(5867),F=L(5861),ae=L(9681),se=L(2090),fe=L(4859),le=L(1877),me=L(8766);const ge="@firebase/installations",G="0.5.12",X=`w:${G}`,Be="FIS_v2",Xe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:ne(D.expiresIn),creationTime:Date.now()}}function Ie(D,S){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,F.Z)(function*(D,S){const U=(yield S.json()).error;return Xe.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function He({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function $(D,{refreshToken:S}){const R=He(D);return R.append("Authorization",function oe(D){return`${Be} ${D}`}(S)),R}function ye(D){return J.apply(this,arguments)}function J(){return(J=(0,F.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function ne(D){return Number(D.replace("s","000"))}function ie(D,S){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,F.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:R}){const U=xe(D),ee=He(D),ue=S.getImmediate({optional:!0});if(ue){const Et=yield ue.getHeartbeatsHeader();Et&&ee.append("x-firebase-client",Et)}const $e={method:"POST",headers:ee,body:JSON.stringify({fid:R,authVersion:Be,appId:D.appId,sdkVersion:X})},pt=yield ye(()=>fetch(U,$e));if(pt.ok){const Et=yield pt.json();return{fid:Et.fid||R,registrationStatus:2,refreshToken:Et.refreshToken,authToken:we(Et.authToken)}}throw yield Ie("Create Installation",pt)})).apply(this,arguments)}function Oe(D){return new Promise(S=>{setTimeout(S,D)})}const $t=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function hn(D){return function ht(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $t.test(R)?R:""}catch{return""}}function On(D){return`${D.appName}!${D.appId}`}const Qt=new Map;function Jt(D,S){const R=On(D);ln(R,S),function Bo(D,S){const R=function Ar(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=D=>{ln(D.data.key,D.data.fid)}),zr}();R&&R.postMessage({key:D,fid:S}),function Wr(){0===Qt.size&&zr&&(zr.close(),zr=null)}()}(R,S)}function ln(D,S){const R=Qt.get(D);if(R)for(const U of R)U(S)}let zr=null;const qr="firebase-installations-store";let ri=null;function Uo(){return ri||(ri=(0,me.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(qr)}})),ri}function Je(D,S){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,F.Z)(function*(D,S){const R=On(D),ee=(yield Uo()).transaction(qr,"readwrite"),ue=ee.objectStore(qr),Ae=yield ue.get(R);return yield ue.put(S,R),yield ee.done,(!Ae||Ae.fid!==S.fid)&&Jt(D,S.fid),S})).apply(this,arguments)}function os(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,F.Z)(function*(D){const S=On(D),U=(yield Uo()).transaction(qr,"readwrite");yield U.objectStore(qr).delete(S),yield U.done})).apply(this,arguments)}function ii(D,S){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,F.Z)(function*(D,S){const R=On(D),ee=(yield Uo()).transaction(qr,"readwrite"),ue=ee.objectStore(qr),Ae=yield ue.get(R),$e=S(Ae);return void 0===$e?yield ue.delete(R):yield ue.put($e,R),yield ee.done,$e&&(!Ae||Ae.fid!==$e.fid)&&Jt(D,$e.fid),$e})).apply(this,arguments)}function Ln(D){return zn.apply(this,arguments)}function zn(){return(zn=(0,F.Z)(function*(D){let S;const R=yield ii(D.appConfig,U=>{const ee=gn(U),ue=ft(D,ee);return S=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}})).apply(this,arguments)}function gn(D){return It(D||{fid:qe(),registrationStatus:0})}function ft(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Xe.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function ct(D,S){return fn.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:dr(D)}:{installationEntry:S}}function fn(){return(fn=(0,F.Z)(function*(D,S){try{const R=yield ie(D,S);return Je(D.appConfig,R)}catch(R){throw lt(R)&&409===R.customData.serverCode?yield os(D.appConfig):yield Je(D.appConfig,{fid:S.fid,registrationStatus:0}),R}})).apply(this,arguments)}function dr(D){return hr.apply(this,arguments)}function hr(){return(hr=(0,F.Z)(function*(D){let S=yield Or(D.appConfig);for(;1===S.registrationStatus;)yield Oe(100),S=yield Or(D.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Ln(D);return U||R}return S})).apply(this,arguments)}function Or(D){return ii(D,S=>{if(!S)throw Xe.create("installation-not-found");return It(S)})}function It(D){return function as(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function en(D,S){return Di.apply(this,arguments)}function Di(){return(Di=(0,F.Z)(function*({appConfig:D,heartbeatServiceProvider:S},R){const U=Xt(D,R),ee=$(D,R),ue=S.getImmediate({optional:!0});if(ue){const Et=yield ue.getHeartbeatsHeader();Et&&ee.append("x-firebase-client",Et)}const $e={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:X,appId:D.appId}})},pt=yield ye(()=>fetch(U,$e));if(pt.ok)return we(yield pt.json());throw yield Ie("Generate Auth Token",pt)})).apply(this,arguments)}function Xt(D,{fid:S}){return`${xe(D)}/${S}/authTokens:generate`}function Z(D){return z.apply(this,arguments)}function z(){return(z=(0,F.Z)(function*(D,S=!1){let R;const U=yield ii(D.appConfig,ue=>{if(!ut(ue))throw Xe.create("not-registered");const Ae=ue.authToken;if(!S&&_n(Ae))return ue;if(1===Ae.requestStatus)return R=j(D,S),ue;{if(!navigator.onLine)throw Xe.create("app-offline");const $e=Xn(ue);return R=Te(D,$e),$e}});return R?yield R:U.authToken})).apply(this,arguments)}function j(D,S){return q.apply(this,arguments)}function q(){return(q=(0,F.Z)(function*(D,S){let R=yield K(D.appConfig);for(;1===R.authToken.requestStatus;)yield Oe(100),R=yield K(D.appConfig);const U=R.authToken;return 0===U.requestStatus?Z(D,S):U})).apply(this,arguments)}function K(D){return ii(D,S=>{if(!ut(S))throw Xe.create("not-registered");return function Ut(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Te(D,S){return je.apply(this,arguments)}function je(){return(je=(0,F.Z)(function*(D,S){try{const R=yield en(D,S),U=Object.assign(Object.assign({},S),{authToken:R});return yield Je(D.appConfig,U),R}catch(R){if(!lt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Je(D.appConfig,U)}else yield os(D.appConfig);throw R}})).apply(this,arguments)}function ut(D){return void 0!==D&&2===D.registrationStatus}function _n(D){return 2===D.requestStatus&&!function tn(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function Xn(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function En(){return(En=(0,F.Z)(function*(D){const S=D,{installationEntry:R,registrationPromise:U}=yield Ln(S);return U?U.catch(console.error):Z(S).catch(console.error),R.fid})).apply(this,arguments)}function Gi(){return(Gi=(0,F.Z)(function*(D,S=!1){const R=D;return yield Fr(R),(yield Z(R,S)).token})).apply(this,arguments)}function Fr(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(D){const{registrationPromise:S}=yield Ln(D);S&&(yield S)})).apply(this,arguments)}function Ps(D){return Xe.create("missing-app-config-values",{valueName:D})}const jo="installations",Cn=D=>{const S=D.getProvider("app").getImmediate(),R=function vn(D){if(!D||!D.options)throw Ps("App Configuration");if(!D.name)throw Ps("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!D.options[R])throw Ps(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},ro=D=>{const S=D.getProvider("app").getImmediate(),R=(0,ae._getProvider)(S,jo).getImmediate();return{getId:()=>function kt(D){return En.apply(this,arguments)}(R),getToken:ee=>function Wn(D){return Gi.apply(this,arguments)}(R,ee)}};(function Rc(){(0,ae._registerComponent)(new fe.wA(jo,Cn,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",ro,"PRIVATE"))})(),(0,ae.registerVersion)(ge,G),(0,ae.registerVersion)(ge,G,"esm2017");const zi="@firebase/remote-config",Zn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kh{constructor(S,R,U,ee){this.client=S,this.storage=R,this.storageCache=U,this.logger=ee}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,ee=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var R=this;return(0,F.Z)(function*(){const[U,ee]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ee&&R.isCachedDataFresh(S.cacheMaxAgeMillis,U))return ee;S.eTag=ee&&ee.eTag;const ue=yield R.client.fetch(S),Ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ae.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ae),ue})()}}function Fc(D=navigator){return D.languages&&D.languages[0]||D.language}class Lc{constructor(S,R,U,ee,ue,Ae){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=U,this.projectId=ee,this.apiKey=ue,this.appId=Ae}fetch(S){var R=this;return(0,F.Z)(function*(){var U,ee,ue;const[Ae,$e]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Et=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},gt={sdk_version:R.sdkVersion,app_instance_id:Ae,app_instance_id_token:$e,app_id:R.appId,language_code:Fc()},Rn={method:"POST",headers:Pt,body:JSON.stringify(gt)},Rr=fetch(Et,Rn),Xa=new Promise((tl,ca)=>{S.signal.addEventListener(()=>{const ld=new Error("The operation was aborted.");ld.name="AbortError",ca(ld)})});let el;try{yield Promise.race([Rr,Xa]),el=yield Rr}catch(tl){let ca="fetch-client-network";throw"AbortError"===(null===(U=tl)||void 0===U?void 0:U.name)&&(ca="fetch-timeout"),Zn.create(ca,{originalErrorMessage:null===(ee=tl)||void 0===ee?void 0:ee.message})}let oa=el.status;const aa=el.headers.get("ETag")||void 0;let Eo,la;if(200===el.status){let tl;try{tl=yield el.json()}catch(ca){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(ue=ca)||void 0===ue?void 0:ue.message})}Eo=tl.entries,la=tl.state}if("INSTANCE_STATE_UNSPECIFIED"===la?oa=500:"NO_CHANGE"===la?oa=304:("NO_TEMPLATE"===la||"EMPTY_CONFIG"===la)&&(Eo={}),304!==oa&&200!==oa)throw Zn.create("fetch-status",{httpStatus:oa});return{status:oa,eTag:aa,config:Eo}})()}}class Op{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,F.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:U}){var ee=this;return(0,F.Z)(function*(){yield function tr(D,S){return new Promise((R,U)=>{const ee=Math.max(S-Date.now(),0),ue=setTimeout(R,ee);D.addEventListener(()=>{clearTimeout(ue),U(Zn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const ue=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Hu(D){if(!(D instanceof se.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Ae={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield ee.storage.setThrottleMetadata(Ae),ee.attemptFetch(S,Ae)}})()}}class $u{constructor(S,R,U,ee,ue){this.app=S,this._client=R,this._storageCache=U,this._storage=ee,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vc(D,S){var R;const U=D.target.error||void 0;return Zn.create(S,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const Bs="app_namespace_store";class Bp{constructor(S,R,U,ee=function Vp(){return new Promise((D,S)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ee=>{S(Vc(ee,"storage-open"))},U.onsuccess=ee=>{D(ee.target.result)},U.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(U){S(Zn.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=U,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ee,ue)=>{var Ae;const pt=U.transaction([Bs],"readonly").objectStore(Bs),Et=R.createCompositeKey(S);try{const Pt=pt.get(Et);Pt.onerror=gt=>{ue(Vc(gt,"storage-get"))},Pt.onsuccess=gt=>{const Rn=gt.target.result;ee(Rn?Rn.value:void 0)}}catch(Pt){ue(Zn.create("storage-get",{originalErrorMessage:null===(Ae=Pt)||void 0===Ae?void 0:Ae.message}))}})})()}set(S,R){var U=this;return(0,F.Z)(function*(){const ee=yield U.openDbPromise;return new Promise((ue,Ae)=>{var $e;const Et=ee.transaction([Bs],"readwrite").objectStore(Bs),Pt=U.createCompositeKey(S);try{const gt=Et.put({compositeKey:Pt,value:R});gt.onerror=Rn=>{Ae(Vc(Rn,"storage-set"))},gt.onsuccess=()=>{ue()}}catch(gt){Ae(Zn.create("storage-set",{originalErrorMessage:null===($e=gt)||void 0===$e?void 0:$e.message}))}})})()}delete(S){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ee,ue)=>{var Ae;const pt=U.transaction([Bs],"readwrite").objectStore(Bs),Et=R.createCompositeKey(S);try{const Pt=pt.delete(Et);Pt.onerror=gt=>{ue(Vc(gt,"storage-delete"))},Pt.onsuccess=()=>{ee()}}catch(Pt){ue(Zn.create("storage-delete",{originalErrorMessage:null===(Ae=Pt)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class zu{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const R=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),ue=yield R;ue&&(S.lastFetchStatus=ue);const Ae=yield U;Ae&&(S.lastSuccessfulFetchTimestampMillis=Ae);const $e=yield ee;$e&&(S.activeConfig=$e)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function fl(){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Us(){(0,ae._registerComponent)(new fe.wA("remote-config",function D(S,{instanceIdentifier:R}){const U=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,se.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ae,appId:$e}=U.options;if(!ue)throw Zn.create("registration-project-id");if(!Ae)throw Zn.create("registration-api-key");if(!$e)throw Zn.create("registration-app-id");const pt=new Bp($e,U.name,R=R||"firebase"),Et=new zu(pt),Pt=new le.Yd(zi);Pt.logLevel=le.in.ERROR;const gt=new Lc(ee,ae.SDK_VERSION,R,ue,Ae,$e),Rn=new Op(gt,pt),Rr=new kh(Rn,pt,Et,Pt),Xa=new $u(U,Rr,Et,pt,Pt);return function Yn(D){const S=(0,se.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Xa),Xa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(zi,"0.3.11"),(0,ae.registerVersion)(zi,"0.3.11","esm2017")}();const Wi="/firebase-messaging-sw.js",cs="/firebase-cloud-messaging-push-scope",us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Oa="google.c.a.c_id",pl="google.c.a.c_l",Bc="google.c.a.ts",Ph="google.c.a.e";var ds=(()=>{return(D=ds||(ds={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ds;var D})();function oi(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yr(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),ee=new Uint8Array(U.length);for(let ue=0;ue<U.length;++ue)ee[ue]=U.charCodeAt(ue);return ee}const $o="fcm_token_details_db",Er="fcm_token_object_Store";function Oh(D){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,F.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes($o))return null;let S=null;return(yield(0,me.X3)($o,5,{upgrade:(U=(0,F.Z)(function*(ee,ue,Ae,$e){var pt;if(ue<2||!ee.objectStoreNames.contains(Er))return;const Et=$e.objectStore(Er),Pt=yield Et.index("fcmSenderId").get(D);if(yield Et.clear(),Pt)if(2===ue){const gt=Pt;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;S={token:gt.fcmToken,createTime:null!==(pt=gt.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:oi(gt.vapidKey)}}}else if(3===ue){const gt=Pt;S={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:oi(gt.auth),p256dh:oi(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:oi(gt.vapidKey)}}}else if(4===ue){const gt=Pt;S={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:oi(gt.auth),p256dh:oi(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:oi(gt.vapidKey)}}}}),function(ue,Ae,$e,pt){return U.apply(this,arguments)})})).close(),yield(0,me.Lj)($o),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Sn(S)?S:null;var U}),Fh.apply(this,arguments)}function Sn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ai="firebase-messaging-store";let Vr=null;function ml(){return Vr||(Vr=(0,me.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(ai)}})),Vr}function ao(D){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(D){const S=Ai(D),U=yield(yield ml()).transaction(ai).objectStore(ai).get(S);if(U)return U;{const ee=yield Oh(D.appConfig.senderId);if(ee)return yield Gt(D,ee),ee}})).apply(this,arguments)}function Gt(D,S){return gl.apply(this,arguments)}function gl(){return(gl=(0,F.Z)(function*(D,S){const R=Ai(D),ee=(yield ml()).transaction(ai,"readwrite");return yield ee.objectStore(ai).put(S,R),yield ee.done,S})).apply(this,arguments)}function lo(D){return _l.apply(this,arguments)}function _l(){return(_l=(0,F.Z)(function*(D){const S=Ai(D),U=(yield ml()).transaction(ai,"readwrite");yield U.objectStore(ai).delete(S),yield U.done})).apply(this,arguments)}function Ai({appConfig:D}){return D.appId}const In=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dt(D,S){return vl.apply(this,arguments)}function vl(){return(vl=(0,F.Z)(function*(D,S){var R;const U=yield $c(D),ee=Se(S),ue={method:"POST",headers:U,body:JSON.stringify(ee)};let Ae;try{Ae=yield(yield fetch(fs(D.appConfig),ue)).json()}catch($e){throw In.create("token-subscribe-failed",{errorInfo:null===(R=$e)||void 0===R?void 0:R.toString()})}if(Ae.error)throw In.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw In.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function Lh(D,S){return bl.apply(this,arguments)}function bl(){return(bl=(0,F.Z)(function*(D,S){var R;const U=yield $c(D),ee=Se(S.subscriptionOptions),ue={method:"PATCH",headers:U,body:JSON.stringify(ee)};let Ae;try{Ae=yield(yield fetch(`${fs(D.appConfig)}/${S.token}`,ue)).json()}catch($e){throw In.create("token-update-failed",{errorInfo:null===(R=$e)||void 0===R?void 0:R.toString()})}if(Ae.error)throw In.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw In.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function wl(D,S){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,F.Z)(function*(D,S){var R;const ee={method:"DELETE",headers:yield $c(D)};try{const Ae=yield(yield fetch(`${fs(D.appConfig)}/${S}`,ee)).json();if(Ae.error)throw In.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ue){throw In.create("token-unsubscribe-failed",{errorInfo:null===(R=ue)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function fs({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function $c(D){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,F.Z)(function*({appConfig:D,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Se({p256dh:D,auth:S,endpoint:R,vapidKey:U}){const ee={web:{endpoint:R,auth:S,p256dh:D}};return U!==us&&(ee.web.applicationPubKey=U),ee}const jt=6048e5;function El(D){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,F.Z)(function*(D){const S=yield Gc(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:oi(S.getKey("auth")),p256dh:oi(S.getKey("p256dh"))},U=yield ao(D.firebaseDependencies);if(U){if(Ku(U.subscriptionOptions,R))return Date.now()>=U.createTime+jt?Go(D,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield wl(D.firebaseDependencies,U.token)}catch(ee){console.warn(ee)}return La(D.firebaseDependencies,R)}return La(D.firebaseDependencies,R)})).apply(this,arguments)}function An(D){return Il.apply(this,arguments)}function Il(){return(Il=(0,F.Z)(function*(D){const S=yield ao(D.firebaseDependencies);S&&(yield wl(D.firebaseDependencies,S.token),yield lo(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Go(D,S){return li.apply(this,arguments)}function li(){return(li=(0,F.Z)(function*(D,S){try{const R=yield Lh(D.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield Gt(D.firebaseDependencies,U),R}catch(R){throw yield An(D),R}})).apply(this,arguments)}function La(D,S){return Va.apply(this,arguments)}function Va(){return(Va=(0,F.Z)(function*(D,S){const U={token:yield Dt(D,S),createTime:Date.now(),subscriptionOptions:S};return yield Gt(D,U),U.token})).apply(this,arguments)}function Gc(D,S){return zc.apply(this,arguments)}function zc(){return(zc=(0,F.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yr(S)})})).apply(this,arguments)}function Ku(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Ba(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Mn(D,S){if(!S.notification)return;D.notification={};const R=S.notification.title;R&&(D.notification.title=R);const U=S.notification.body;U&&(D.notification.body=U);const ee=S.notification.image;ee&&(D.notification.image=ee)}(S,D),function qi(D,S){!S.data||(D.data=S.data)}(S,D),function Wc(D,S){var R,U,ee,ue,Ae;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;D.fcmOptions={};const $e=null!==(ee=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ee?ee:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;$e&&(D.fcmOptions.link=$e);const pt=null===(Ae=S.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;pt&&(D.fcmOptions.analyticsLabel=pt)}(S,D),S}function co(D){return"object"==typeof D&&!!D&&Oa in D}function ps(D,S){const R=[];for(let U=0;U<D.length;U++)R.push(D.charAt(U)),U<S.length&&R.push(S.charAt(U));return R.join("")}function Ua(D){return In.create("missing-app-config-values",{valueName:D})}ps("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ps("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hp{constructor(S,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function jp(D){if(!D||!D.options)throw Ua("App Configuration Object");if(!D.name)throw Ua("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const U of S)if(!R[U])throw Ua(U);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function qc(D){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,F.Z)(function*(D){var S;try{D.swRegistration=yield navigator.serviceWorker.register(Wi,{scope:cs}),D.swRegistration.update().catch(()=>{})}catch(R){throw In.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function ja(D,S){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,F.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield qc(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Ha(D,S){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,F.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=us)})).apply(this,arguments)}function Sl(){return(Sl=(0,F.Z)(function*(D,S){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield Ha(D,S?.vapidKey),yield ja(D,S?.serviceWorkerRegistration),El(D)})).apply(this,arguments)}function Yc(D,S,R){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,F.Z)(function*(D,S,R){const U=Jc(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[Oa],message_name:R[pl],message_time:R[Bc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Jc(D){switch(D){case ds.NOTIFICATION_CLICKED:return"notification_open";case ds.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function uo(){return(uo=(0,F.Z)(function*(D,S){const R=S.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===ds.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Ba(R)):D.onMessageHandler.next(Ba(R)));const U=R.data;co(U)&&"1"===U[Ph]&&(yield Yc(D,R.messageType,U))})).apply(this,arguments)}const ho="@firebase/messaging",nr=D=>{const S=new Hp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Zu(D,S){return uo.apply(this,arguments)}(S,R)),S},Qr=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:U=>function Tl(D,S){return Sl.apply(this,arguments)}(S,U)}};function Yu(){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function bn(){(0,ae._registerComponent)(new fe.wA("messaging",nr,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",Qr,"PRIVATE")),(0,ae.registerVersion)(ho,"0.9.16"),(0,ae.registerVersion)(ho,"0.9.16","esm2017")}();const qo="analytics",Xu="firebase_id",fo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xl="https://www.googletagmanager.com/gtag/js",xn=new le.Yd("@firebase/analytics");function Rl(D){return Promise.all(D.map(S=>S.catch(R=>R)))}function kl(D,S){const R=document.createElement("script");R.src=`${xl}?l=${D}&id=${S}`,R.async=!0,document.head.appendChild(R)}function Bh(D,S,R,U,ee,ue){return po.apply(this,arguments)}function po(){return(po=(0,F.Z)(function*(D,S,R,U,ee,ue){const Ae=U[ee];try{if(Ae)yield S[Ae];else{const pt=(yield Rl(R)).find(Et=>Et.measurementId===ee);pt&&(yield S[pt.appId])}}catch($e){xn.error($e)}D("config",ee,ue)})).apply(this,arguments)}function Ko(D,S,R,U,ee){return mo.apply(this,arguments)}function mo(){return(mo=(0,F.Z)(function*(D,S,R,U,ee){try{let ue=[];if(ee&&ee.send_to){let Ae=ee.send_to;Array.isArray(Ae)||(Ae=[Ae]);const $e=yield Rl(R);for(const pt of Ae){const Et=$e.find(gt=>gt.measurementId===pt),Pt=Et&&S[Et.appId];if(!Pt){ue=[];break}ue.push(Pt)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),D("event",U,ee||{})}catch(ue){xn.error(ue)}})).apply(this,arguments)}function td(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(xl))return S;return null}const pr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wa=new class Ki{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function rd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function qa(D){return nu.apply(this,arguments)}function nu(){return(nu=(0,F.Z)(function*(D){var S;const{appId:R,apiKey:U}=D,ee={method:"GET",headers:rd(U)},ue=fo.replace("{app-id}",R),Ae=yield fetch(ue,ee);if(200!==Ae.status&&304!==Ae.status){let $e="";try{const pt=yield Ae.json();null!==(S=pt.error)&&void 0!==S&&S.message&&($e=pt.error.message)}catch{}throw pr.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:$e})}return Ae.json()})).apply(this,arguments)}function Vn(D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,F.Z)(function*(D,S=Wa,R){const{appId:U,apiKey:ee,measurementId:ue}=D.options;if(!U)throw pr.create("no-app-id");if(!ee){if(ue)return{measurementId:ue,appId:U};throw pr.create("no-api-key")}const Ae=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new Fl;return setTimeout((0,F.Z)(function*(){$e.abort()}),void 0!==R?R:6e4),Pl({appId:U,apiKey:ee,measurementId:ue},Ae,$e,S)})).apply(this,arguments)}function Pl(D,S,R){return go.apply(this,arguments)}function go(){return(go=(0,F.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:R},U,ee=Wa){var ue,Ae;const{appId:$e,measurementId:pt}=D;try{yield Ka(U,S)}catch(Et){if(pt)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Et)||void 0===ue?void 0:ue.message}]`),{appId:$e,measurementId:pt};throw Et}try{const Et=yield qa(D);return ee.deleteThrottleMetadata($e),Et}catch(Et){const Pt=Et;if(!Ol(Pt)){if(ee.deleteThrottleMetadata($e),pt)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:$e,measurementId:pt};throw Et}const gt=503===Number(null===(Ae=Pt?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,se.$s)(R,ee.intervalMillis,30):(0,se.$s)(R,ee.intervalMillis),Rn={throttleEndTimeMillis:Date.now()+gt,backoffCount:R+1};return ee.setThrottleMetadata($e,Rn),xn.debug(`Calling attemptFetch again in ${gt} millis`),Pl(D,Rn,U,ee)}})).apply(this,arguments)}function Ka(D,S){return new Promise((R,U)=>{const ee=Math.max(S-Date.now(),0),ue=setTimeout(R,ee);D.addEventListener(()=>{clearTimeout(ue),U(pr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Ol(D){if(!(D instanceof se.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Fl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let $s,Ya;function Gs(){return(Gs=(0,F.Z)(function*(D,S,R,U,ee){if(ee&&ee.global)D("event",R,U);else{const ue=yield S;D("event",R,Object.assign(Object.assign({},U),{send_to:ue}))}})).apply(this,arguments)}function yo(D){Ya=D}function iu(D){$s=D}function gs(){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,F.Z)(function*(){var D;if(!(0,se.hl)())return xn.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(S){return xn.warn(pr.create("indexeddb-unavailable",{errorInfo:null===(D=S)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(D,S,R,U,ee,ue,Ae){var $e;const pt=Vn(D);pt.then(Rr=>{R[Rr.measurementId]=Rr.appId,D.options.measurementId&&Rr.measurementId!==D.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rr=>xn.error(Rr)),S.push(pt);const Et=gs().then(Rr=>{if(Rr)return U.getId()}),[Pt,gt]=yield Promise.all([pt,Et]);td()||kl(ue,Pt.measurementId),Ya&&(ee("consent","default",Ya),yo(void 0)),ee("js",new Date);const Rn=null!==($e=Ae?.config)&&void 0!==$e?$e:{};return Rn.origin="firebase",Rn.update=!0,null!=gt&&(Rn[Xu]=gt),ee("config",Pt.measurementId,Rn),$s&&(ee("set",$s),iu(void 0)),Pt.measurementId})).apply(this,arguments)}class Ul{constructor(S){this.app=S}_delete(){return delete Jr[this.app.options.appId],Promise.resolve()}}let Jr={},zs=[];const Jo={};let ea,vo,Xo="dataLayer",Qa=!1;function R_(D,S,R){!function $p(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((U,ee)=>`(${ee+1}) ${U}`).join(" "),R=pr.create("invalid-analytics-context",{errorInfo:S});xn.warn(R.message)}}();const U=D.options.appId;if(!U)throw pr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw pr.create("no-api-key");xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jr[U])throw pr.create("already-exists",{id:U});if(!Qa){!function ed(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Xo);const{wrappedGtag:ue,gtagCore:Ae}=function $a(D,S,R,U,ee){let ue=function(...Ae){window[U].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ue=window[ee]),window[ee]=function Nl(D,S,R,U){function ue(){return(ue=(0,F.Z)(function*(Ae,$e,pt){try{"event"===Ae?yield Ko(D,S,R,$e,pt):"config"===Ae?yield Bh(D,S,R,U,$e,pt):"consent"===Ae?D("consent","update",pt):D("set",$e)}catch(Et){xn.error(Et)}})).apply(this,arguments)}return function ee(Ae,$e,pt){return ue.apply(this,arguments)}}(ue,D,S,R),{gtagCore:ue,wrappedGtag:window[ee]}}(Jr,zs,Jo,Xo,"gtag");vo=ue,ea=Ae,Qa=!0}return Jr[U]=function Yo(D,S,R,U,ee,ue,Ae){return Qo.apply(this,arguments)}(D,zs,Jo,S,ea,Xo,R),new Ul(D)}function N_(){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const zp="@firebase/analytics";!function Br(){(0,ae._registerComponent)(new fe.wA(qo,(S,{options:R})=>R_(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function D(S){try{const R=S.getProvider(qo).getImmediate();return{logEvent:(U,ee,ue)=>function Ja(D,S,R,U){D=(0,se.m9)(D),function id(D,S,R,U,ee){return Gs.apply(this,arguments)}(vo,Jr[D.app.options.appId],S,R,U).catch(ee=>xn.error(ee))}(R,U,ee,ue)}}catch(R){throw pr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(zp,"0.8.0"),(0,ae.registerVersion)(zp,"0.8.0","esm2017")}();var ci=L(4408),na=L(7565);const bo=new class ui extends na.v{}(class ta extends ci.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,R,U):S.flush(this)}});var od=L(4986),ou=L(8505),Ws=L(9468),Hl=L(5363);const Xr=new d.GfV("7.4.1"),$l="__angularfire_symbol__analyticsIsSupportedValue",di="__angularfire_symbol__analyticsIsSupported",Gl="__angularfire_symbol__remoteConfigIsSupportedValue",rn="__angularfire_symbol__remoteConfigIsSupported",xi="__angularfire_symbol__messagingIsSupportedValue",xr="__angularfire_symbol__messagingIsSupported";function zl(D,S,R){if(S){if(1===S.length)return S[0];const ue=S.filter(Ae=>Ae.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[di]||(globalThis[di]=N_().then(D=>globalThis[$l]=D).catch(()=>globalThis[$l]=!1)),globalThis[xr]||(globalThis[xr]=Yu().then(D=>globalThis[xi]=D).catch(()=>globalThis[xi]=!1)),globalThis[rn]||(globalThis[rn]=fl().then(D=>globalThis[Gl]=D).catch(()=>globalThis[Gl]=!1));const ia=(D,S)=>{const R=S?[S]:(0,te.C6)(),U=[];return R.forEach(ee=>{ee.container.getProvider(D).instances.forEach(Ae=>{U.includes(Ae)||U.push(Ae)})}),U};function Wl(){}class Zi{constructor(S,R=bo){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,U){const ee=this.zone;return this.delegate.schedule(function(Ae){ee.runGuarded(()=>{S.apply(this,[Ae])})},R,U)}}class au{constructor(S){this.zone=S,this.task=null}call(S,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wl,{},Wl,Wl)),R.pipe((0,ou.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ql=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Zi(Zone.current)),this.insideAngular=R.run(()=>new Zi(Zone.current,od.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ys(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function wo(D){return ys(),function jh(D){return function(R){return(R=R.lift(new au(D.ngZone))).pipe((0,Ws.R)(D.outsideAngular),(0,Hl.Q)(D.insideAngular))}}(ys())(D)}},2090:(at,De,L)=>{L.d(De,{$s:()=>as,BH:()=>Be,DV:()=>Rt,Dv:()=>ii,G6:()=>He,GJ:()=>Jt,L:()=>me,LL:()=>Fe,Pz:()=>Bt,Sg:()=>Re,UG:()=>ve,UI:()=>Bo,US:()=>fe,Wj:()=>zn,Yr:()=>Ue,ZB:()=>W,ZR:()=>ie,b$:()=>lt,cI:()=>$t,dS:()=>ft,eu:()=>ye,g5:()=>F,gK:()=>Zr,gQ:()=>ri,h$:()=>le,hl:()=>$,hu:()=>te,jU:()=>_e,lb:()=>gn,m9:()=>Xt,ne:()=>Uo,p$:()=>G,pd:()=>qr,r3:()=>Pr,ru:()=>Xe,tV:()=>ge,uI:()=>tt,ug:()=>ct,vZ:()=>zr,w1:()=>we,w9:()=>Qt,xO:()=>Ns,xb:()=>ln,z$:()=>Ee,zI:()=>J,zd:()=>$i});const te=function(Z,z){if(!Z)throw F(z)},F=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},ae=function(Z){const z=[];let j=0;for(let q=0;q<Z.length;q++){let K=Z.charCodeAt(q);K<128?z[j++]=K:K<2048?(z[j++]=K>>6|192,z[j++]=63&K|128):55296==(64512&K)&&q+1<Z.length&&56320==(64512&Z.charCodeAt(q+1))?(K=65536+((1023&K)<<10)+(1023&Z.charCodeAt(++q)),z[j++]=K>>18|240,z[j++]=K>>12&63|128,z[j++]=K>>6&63|128,z[j++]=63&K|128):(z[j++]=K>>12|224,z[j++]=K>>6&63|128,z[j++]=63&K|128)}return z},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,z){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let K=0;K<Z.length;K+=3){const Te=Z[K],je=K+1<Z.length,ut=je?Z[K+1]:0,_n=K+2<Z.length,tn=_n?Z[K+2]:0;let kt=(15&ut)<<2|tn>>6,En=63&tn;_n||(En=64,je||(kt=64)),q.push(j[Te>>2],j[(3&Te)<<4|ut>>4],j[kt],j[En])}return q.join("")},encodeString(Z,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(Z):this.encodeByteArray(ae(Z),z)},decodeString(Z,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(Z):function(Z){const z=[];let j=0,q=0;for(;j<Z.length;){const K=Z[j++];if(K<128)z[q++]=String.fromCharCode(K);else if(K>191&&K<224){const Te=Z[j++];z[q++]=String.fromCharCode((31&K)<<6|63&Te)}else if(K>239&&K<365){const _n=((7&K)<<18|(63&Z[j++])<<12|(63&Z[j++])<<6|63&Z[j++])-65536;z[q++]=String.fromCharCode(55296+(_n>>10)),z[q++]=String.fromCharCode(56320+(1023&_n))}else{const Te=Z[j++],je=Z[j++];z[q++]=String.fromCharCode((15&K)<<12|(63&Te)<<6|63&je)}}return z.join("")}(this.decodeStringToByteArray(Z,z))},decodeStringToByteArray(Z,z){this.init_();const j=z?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let K=0;K<Z.length;){const Te=j[Z.charAt(K++)],ut=K<Z.length?j[Z.charAt(K)]:0;++K;const tn=K<Z.length?j[Z.charAt(K)]:64;++K;const Ut=K<Z.length?j[Z.charAt(K)]:64;if(++K,null==Te||null==ut||null==tn||null==Ut)throw Error();q.push(Te<<2|ut>>4),64!==tn&&(q.push(ut<<4&240|tn>>2),64!==Ut&&q.push(tn<<6&192|Ut))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},le=function(Z){const z=ae(Z);return fe.encodeByteArray(z,!0)},me=function(Z){return le(Z).replace(/\./g,"")},ge=function(Z){try{return fe.decodeString(Z,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function G(Z){return W(void 0,Z)}function W(Z,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return z}for(const j in z)!z.hasOwnProperty(j)||!X(j)||(Z[j]=W(Z[j],z[j]));return Z}function X(Z){return"__proto__"!==Z}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,j)=>{this.resolve=z,this.reject=j})}wrapCallback(z){return(j,q)=>{j?this.reject(j):this.resolve(q),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(j):z(j,q))}}}function Re(Z,z){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=z||"demo-project",K=Z.iat||0,Te=Z.sub||Z.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:K,exp:K+3600,auth_time:K,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(je)),""].join(".")}function Ee(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function Xe(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function we(){const Z=Ee();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Ue(){return!1}function He(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function ye(){return new Promise((Z,z)=>{try{let j=!0;const q="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(q);K.onsuccess=()=>{K.result.close(),j||self.indexedDB.deleteDatabase(q),Z(!0)},K.onupgradeneeded=()=>{j=!1},K.onerror=()=>{var Te;z((null===(Te=K.error)||void 0===Te?void 0:Te.message)||"")}}catch(j){z(j)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ie extends Error{constructor(z,j,q){super(j),this.code=z,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(z,j,q){this.service=z,this.serviceName=j,this.errors=q}create(z,...j){const q=j[0]||{},K=`${this.service}/${z}`,Te=this.errors[z],je=Te?function Oe(Z,z){return Z.replace(ht,(j,q)=>{const K=z[q];return null!=K?String(K):`<${q}?>`})}(Te,q):"Error";return new ie(K,`${this.serviceName}: ${je} (${K}).`,q)}}const ht=/\{\$([^}]+)}/g;function $t(Z){return JSON.parse(Z)}function Bt(Z){return JSON.stringify(Z)}const qe=function(Z){let z={},j={},q={},K="";try{const Te=Z.split(".");z=$t(ge(Te[0])||""),j=$t(ge(Te[1])||""),K=Te[2],q=j.d||{},delete j.d}catch{}return{header:z,claims:j,data:q,signature:K}},Qt=function(Z){const j=qe(Z).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},Jt=function(Z){const z=qe(Z).claims;return"object"==typeof z&&!0===z.admin};function Pr(Z,z){return Object.prototype.hasOwnProperty.call(Z,z)}function Rt(Z,z){if(Object.prototype.hasOwnProperty.call(Z,z))return Z[z]}function ln(Z){for(const z in Z)if(Object.prototype.hasOwnProperty.call(Z,z))return!1;return!0}function Bo(Z,z,j){const q={};for(const K in Z)Object.prototype.hasOwnProperty.call(Z,K)&&(q[K]=z.call(j,Z[K],K,Z));return q}function zr(Z,z){if(Z===z)return!0;const j=Object.keys(Z),q=Object.keys(z);for(const K of j){if(!q.includes(K))return!1;const Te=Z[K],je=z[K];if(Ar(Te)&&Ar(je)){if(!zr(Te,je))return!1}else if(Te!==je)return!1}for(const K of q)if(!j.includes(K))return!1;return!0}function Ar(Z){return null!==Z&&"object"==typeof Z}function Ns(Z){const z=[];for(const[j,q]of Object.entries(Z))Array.isArray(q)?q.forEach(K=>{z.push(encodeURIComponent(j)+"="+encodeURIComponent(K))}):z.push(encodeURIComponent(j)+"="+encodeURIComponent(q));return z.length?"&"+z.join("&"):""}function $i(Z){const z={};return Z.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[K,Te]=q.split("=");z[decodeURIComponent(K)]=decodeURIComponent(Te)}}),z}function qr(Z){const z=Z.indexOf("?");if(!z)return"";const j=Z.indexOf("#",z);return Z.substring(z,j>0?j:void 0)}class ri{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,j){j||(j=0);const q=this.W_;if("string"==typeof z)for(let Ut=0;Ut<16;Ut++)q[Ut]=z.charCodeAt(j)<<24|z.charCodeAt(j+1)<<16|z.charCodeAt(j+2)<<8|z.charCodeAt(j+3),j+=4;else for(let Ut=0;Ut<16;Ut++)q[Ut]=z[j]<<24|z[j+1]<<16|z[j+2]<<8|z[j+3],j+=4;for(let Ut=16;Ut<80;Ut++){const kt=q[Ut-3]^q[Ut-8]^q[Ut-14]^q[Ut-16];q[Ut]=4294967295&(kt<<1|kt>>>31)}let tn,Xn,K=this.chain_[0],Te=this.chain_[1],je=this.chain_[2],ut=this.chain_[3],_n=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(tn=ut^Te&(je^ut),Xn=1518500249):(tn=Te^je^ut,Xn=1859775393):Ut<60?(tn=Te&je|ut&(Te|je),Xn=2400959708):(tn=Te^je^ut,Xn=3395469782);const kt=(K<<5|K>>>27)+tn+_n+Xn+q[Ut]&4294967295;_n=ut,ut=je,je=4294967295&(Te<<30|Te>>>2),Te=K,K=kt}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Te&4294967295,this.chain_[2]=this.chain_[2]+je&4294967295,this.chain_[3]=this.chain_[3]+ut&4294967295,this.chain_[4]=this.chain_[4]+_n&4294967295}update(z,j){if(null==z)return;void 0===j&&(j=z.length);const q=j-this.blockSize;let K=0;const Te=this.buf_;let je=this.inbuf_;for(;K<j;){if(0===je)for(;K<=q;)this.compress_(z,K),K+=this.blockSize;if("string"==typeof z){for(;K<j;)if(Te[je]=z.charCodeAt(K),++je,++K,je===this.blockSize){this.compress_(Te),je=0;break}}else for(;K<j;)if(Te[je]=z[K],++je,++K,je===this.blockSize){this.compress_(Te),je=0;break}}this.inbuf_=je,this.total_+=j}digest(){const z=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&j,j/=256;this.compress_(this.buf_);let q=0;for(let K=0;K<5;K++)for(let Te=24;Te>=0;Te-=8)z[q]=this.chain_[K]>>Te&255,++q;return z}}function Uo(Z,z){const j=new Je(Z,z);return j.subscribe.bind(j)}class Je{constructor(z,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{z(this)}).catch(q=>{this.error(q)})}next(z){this.forEachObserver(j=>{j.next(z)})}error(z){this.forEachObserver(j=>{j.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,j,q){let K;if(void 0===z&&void 0===j&&void 0===q)throw new Error("Missing Observer.");K=function os(Z,z){if("object"!=typeof Z||null===Z)return!1;for(const j of z)if(j in Z&&"function"==typeof Z[j])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:j,complete:q},void 0===K.next&&(K.next=Fn),void 0===K.error&&(K.error=Fn),void 0===K.complete&&(K.complete=Fn);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Te}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,z)}sendOne(z,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{j(this.observers[z])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fn(){}const ii=function(Z,z,j,q){let K;if(q<z?K="at least "+z:q>j&&(K=0===j?"none":"no more than "+j),K)throw new Error(Z+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+K+".")};function Zr(Z,z){return`${Z} failed: ${z} argument `}function zn(Z,z,j,q){if((!q||j)&&"function"!=typeof j)throw new Error(Zr(Z,z)+"must be a valid function.")}function gn(Z,z,j,q){if((!q||j)&&("object"!=typeof j||null===j))throw new Error(Zr(Z,z)+"must be a valid context object.")}const ft=function(Z){const z=[];let j=0;for(let q=0;q<Z.length;q++){let K=Z.charCodeAt(q);if(K>=55296&&K<=56319){const Te=K-55296;q++,te(q<Z.length,"Surrogate pair missing trail surrogate."),K=65536+(Te<<10)+(Z.charCodeAt(q)-56320)}K<128?z[j++]=K:K<2048?(z[j++]=K>>6|192,z[j++]=63&K|128):K<65536?(z[j++]=K>>12|224,z[j++]=K>>6&63|128,z[j++]=63&K|128):(z[j++]=K>>18|240,z[j++]=K>>12&63|128,z[j++]=K>>6&63|128,z[j++]=63&K|128)}return z},ct=function(Z){let z=0;for(let j=0;j<Z.length;j++){const q=Z.charCodeAt(j);q<128?z++:q<2048?z+=2:q>=55296&&q<=56319?(z+=4,j++):z+=3}return z};function as(Z,z=1e3,j=2){const q=z*Math.pow(j,Z),K=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+K)}function Xt(Z){return Z&&Z._delegate?Z._delegate:Z}},3107:(at,De,L)=>{var d=L(4650);let te=null;function F(){return te}const le=new d.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ge(){return(0,d.LFG)(W)}()},providedIn:"platform"}),n})(),W=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Be(){return new W((0,d.LFG)(le))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Xe)},providedIn:"root"}),n})();const _e=new d.OlP("appBaseHref");let Xe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const c=this.prepareExternalUrl(i+tt(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){const c=this.prepareExternalUrl(i+tt(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(_e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ee(Ue(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Re,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return new xe((0,d.LFG)(ve))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}function ka(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}let cn=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Na{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ls=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Na(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,c),Vs(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Vs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vs(n,e){n.context.$implicit=e.item}let Yn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Pc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Pc{constructor(){this.$implicit=null,this.ngIf=null}}function fr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class Lr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Pa=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Ho=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Lr(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(Pa,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const ds="browser";function Er(n){return"server"===n}class ao{}class uo extends class Zu extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){te||(te=n)}(new uo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Al(){return ho=ho||document.querySelector("base"),ho?ho.getAttribute("href"):null}();return null==t?null:function Qr(n){nr=nr||document.createElement("a"),nr.setAttribute("href",n);const e=nr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ho=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ka(document.cookie,e)}}let nr,ho=null;const bn=new d.OlP("TRANSITION_ID"),Xc=[{provide:d.ip1,useFactory:function Yu(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[bn,le,d.zs3],multi:!0}];let eu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ml=new d.OlP("EventManagerPlugins");let Qu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ml),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class tu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Wo=(()=>{class n extends zo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const c=this._doc.createElement("style");c.textContent=o,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ju),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ju))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ju(n){F().remove(n)}const qo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xu=/%COMP%/g;function kl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?kl(n,i,t):(i=i.replace(Xu,n),t.push(i))}return t}function ed(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let po=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ko(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new td(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new nd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=kl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qu),d.LFG(Wo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ko{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){($a(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($a(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=qo[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ed(r)):this.eventManager.addEventListener(e,t,ed(r))}}function $a(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class td extends Ko{constructor(e,t,r,i){super(e),this.component=r;const o=kl(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function xn(n){return"_ngcontent-%COMP%".replace(Xu,n)}(i+"-"+r.id),this.hostAttr=function Rl(n){return"_nghost-%COMP%".replace(Xu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class nd extends Ko{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=kl(i.id,i.styles,[]);for(let c=0;c<o.length;c++){const h=document.createElement("style");h.textContent=o[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let pr=(()=>{class n extends tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ga=["alt","control","meta","shift"],za={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wa=(()=>{class n extends tu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,o.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),Ga.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),c+=y+".")}),c+=o,0!=r.length||0===o.length)return null;const m={};return m.domEventName=i,m.fullKey=c,m}static matchEventFullKeyCode(t,r){let i=za[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ga.forEach(c=>{c!==i&&(0,Ki[c])(t)&&(o+=c+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fl=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:ds},{provide:d.g9A,useValue:function Pl(){uo.makeCurrent()},multi:!0},{provide:le,useFactory:function Ka(){return(0,d.RDi)(document),document},deps:[]}]),$s=new d.OlP(""),id=[{provide:d.rWj,useClass:class Vh{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(m){c=c||m,o--,0==o&&r(c)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Gs=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function go(){return new d.qLn},deps:[]},{provide:Ml,useClass:pr,multi:!0,deps:[le,d.R0b,d.Lbi]},{provide:Ml,useClass:Wa,multi:!0,deps:[le]},{provide:po,useClass:po,deps:[Qu,Wo,d.AFp]},{provide:d.FYo,useExisting:po},{provide:zo,useExisting:Wo},{provide:Wo,useClass:Wo,deps:[le]},{provide:Qu,useClass:Qu,deps:[Ml,d.R0b]},{provide:ao,useClass:eu,deps:[]},[]];let Ja,Ll=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:bn,useExisting:d.AFp},Xc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($s,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Gs,...id],imports:[oo,d.hGG]}),n})(),ms=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Zo(){return new ms((0,d.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;try{Ja=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ja=!1}let _s,gr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Uc(n){return n===ds}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ja)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Br=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ci(){if(_s)return _s;if("object"!=typeof document||!document)return _s=new Set(Br),_s;let n=document.createElement("input");return _s=new Set(Br.filter(e=>(n.setAttribute("type",e),n.type===e))),_s}let ta,Ws;function ui(n){return function na(){if(null==ta&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ta=!0}))}finally{ta=ta||!1}return ta}()?n:!!n.capture}function di(n){return n.composedPath?n.composedPath()[0]:n.target}var rn=L(7579),xi=L(727);class xr extends rn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ri=L(3269),Dn=L(8996);function it(...n){const e=(0,Ri.yG)(n);return(0,Dn.D)(n,e)}function gd(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var rr=L(8505),da=L(4986),Un=L(4482),kn=L(5403);function Kl(n,e=da.z){return(0,Un.e)((t,r)=>{let i=null,o=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function m(){const y=c+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe((0,kn.x)(r,y=>{o=y,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}function Yi(n,e){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,kn.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var Ye=L(4004);function Zl(n){return Yi((e,t)=>n<=t)}var rl=L(4671);function Yl(n,e=rl.y){return n=n??_d,(0,Un.e)((t,r)=>{let i,o=!0;t.subscribe((0,kn.x)(r,c=>{const h=e(c);(o||!n(i,h))&&(o=!1,i=h,r.next(c))}))})}function _d(n,e){return n===e}var vs=L(8421),ha=L(5032);function Qi(n){return(0,Un.e)((e,t)=>{(0,vs.Xf)(n).subscribe((0,kn.x)(t,()=>t.complete(),ha.Z)),!t.closed&&e.subscribe(t)})}function yr(n){return null!=n&&"false"!=`${n}`}function Ur(n,e=0){return function sm(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function yd(n){return Array.isArray(n)?n:[n]}function hi(n){return n instanceof d.SBq?n.nativeElement:n}var sn=L(9751);let vd=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zh=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=hi(t);return new sn.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new rn.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vd))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yh=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=yr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ur(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Kl(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zh),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),jr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[vd]}),n})();const{isArray:du}=Array,{getPrototypeOf:am,prototype:lm,keys:X_}=Object;function Ql(n){if(1===n.length){const e=n[0];if(du(e))return{args:e,keys:null};if(function ey(n){return n&&"object"==typeof n&&am(n)===lm}(e)){const t=X_(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:cm}=Array;function bd(n){return(0,Ye.U)(e=>function ty(n,e){return cm(e)?n(...e):n(e)}(n,e))}function v(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var p=L(9672);function _(...n){const e=(0,Ri.yG)(n),t=(0,Ri.jO)(n),{args:r,keys:i}=Ql(n);if(0===r.length)return(0,Dn.D)([],e);const o=new sn.y(function w(n,e,t=rl.y){return r=>{M(e,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let m=0;m<i;m++)M(e,()=>{const y=(0,Dn.D)(n[m],e);let C=!1;y.subscribe((0,kn.x)(r,T=>{o[m]=T,C||(C=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>v(i,c):rl.y));return t?o.pipe(bd(t)):o}function M(n,e,t){n?(0,p.f)(t,n,e):e()}var N=L(8189);function de(...n){return function Y(){return(0,N.J)(1)}()((0,Dn.D)(n,(0,Ri.yG)(n)))}var Pe=L(515);function Ke(n){return n<=0?()=>Pe.E:(0,Un.e)((e,t)=>{let r=0;e.subscribe((0,kn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function st(...n){const e=(0,Ri.yG)(n);return(0,Un.e)((t,r)=>{(e?de(n,t,e):de(n,t)).subscribe(r)})}const Qn=new Set;let kr,Jl=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Qh}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function um(n){if(!Qn.has(n))try{kr||(kr=document.createElement("style"),kr.setAttribute("type","text/css"),document.head.appendChild(kr)),kr.sheet&&(kr.sheet.insertRule(`@media ${n} {body{ }}`,0),Qn.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qh(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let wd=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new rn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return dm(yd(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=_(dm(yd(t)).map(c=>this._registerQuery(c).observable));return o=de(o.pipe(Ke(1)),o.pipe(Zl(1),Kl(0))),o.pipe((0,Ye.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:m,query:y})=>{h.matches=h.matches||m,h.breakpoints[y]=m}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new sn.y(c=>{const h=m=>this._zone.run(()=>c.next(m));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(st(r),(0,Ye.U)(({matches:c})=>({query:t,matches:c})),Qi(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jl),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dm(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class LS extends class Rw{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new rn.x,this._typeaheadSubscription=xi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new rn.x,this.change=new rn.x,e instanceof d.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,rr.b)(t=>this._pressedLetters.push(t)),Kl(e),Yi(()=>this._pressedLetters.length>0),(0,Ye.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,c=r[o];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||gd(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof d.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function Ed(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function iy(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const GS=new d.OlP("cdk-input-modality-detector-options"),zS={ignoreKeys:[18,17,224,91,16]},Cd=ui({passive:!0,capture:!0});let Bw=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new xr(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(h=>h===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=di(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ed(c)?"keyboard":"mouse"),this._mostRecentTarget=di(c))},this._onTouchstart=c=>{iy(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=di(c))},this._options={...zS,...o},this.modalityDetected=this._modality.pipe(Zl(1)),this.modalityChanged=this.modalityDetected.pipe(Yl()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Cd),i.addEventListener("mousedown",this._onMousedown,Cd),i.addEventListener("touchstart",this._onTouchstart,Cd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Cd),document.removeEventListener("mousedown",this._onMousedown,Cd),document.removeEventListener("touchstart",this._onTouchstart,Cd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gr),d.LFG(d.R0b),d.LFG(le),d.LFG(GS,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WS=new d.OlP("cdk-focus-monitor-default-options"),mm=ui({passive:!0,capture:!0});let Xl=(()=>{class n{constructor(t,r,i,o,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new rn.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=di(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=o,this._detectionMode=c?.detectionMode||0}monitor(t,r=!1){const i=hi(t);if(!this._platform.isBrowser||1!==i.nodeType)return it(null);const o=function Xr(n){if(function Hl(){if(null==Ws){const n=typeof document<"u"?document.head:null;Ws=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Ws}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new rn.x,rootNode:o};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=hi(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=hi(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,m])=>this._originChanged(h,r,m)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=di(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mm)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(gr),d.LFG(Bw),d.LFG(le,8),d.LFG(WS,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),il=(()=>{class n{constructor(t,r){this._elementRef=t,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new d.vpe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Xl))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),n})();const jw="cdk-high-contrast-black-on-white",Hw="cdk-high-contrast-white-on-black",$w="cdk-high-contrast-active";let qS=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(wd).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove($w,jw,Hw),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add($w,jw):2===r&&t.add($w,Hw)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gr),d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gw=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qS))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[jr]}),n})();const K1=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function fa(){return(0,d.f3M)(le)}}),oy=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Id=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function ay(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?oy.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(K1,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const QS=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function Zw(){return!0}});let Ni=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function Gl(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qS),d.LFG(QS,8),d.LFG(le))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[zw,zw]}),n})();function ly(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=yr(e)}}}function cy(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function uy(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=yr(e)}}}function Yw(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ur(t):this.defaultTabIndex}}}function dy(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}}}let Jw=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eE{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Xh={enterDuration:225,exitDuration:150},_m=ui({passive:!0}),ym=["mousedown","touchstart"],fy=["mouseup","mouseleave","touchend","touchcancel"];class py{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=hi(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...Xh,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function ef(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,m=t-i.top,y=o.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-c+"px",C.style.top=m-c+"px",C.style.height=2*c+"px",C.style.width=2*c+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C);const T=window.getComputedStyle(C),P=T.transitionDuration,B="none"===T.transitionProperty||"0s"===P||"0s, 0s"===P,Q=new eE(this,C,r,B);C.style.transform="scale3d(1, 1, 1)",Q.state=0,r.persistent||(this._mostRecentTransientRipple=Q);let he=null;return!B&&(y||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ke=()=>this._finishRippleTransition(Q),ze=()=>this._destroyRipple(Q);C.addEventListener("transitionend",ke),C.addEventListener("transitioncancel",ze),he={onTransitionEnd:ke,onTransitionCancel:ze}}),this._activeRipples.set(Q,he),(B||!y)&&this._finishRippleTransition(Q),Q}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...Xh,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=hi(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(ym))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(fy),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Ed(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!iy(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,_m)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(ym.forEach(e=>{this._triggerElement.removeEventListener(e,this,_m)}),this._pointerUpEventsRegistered&&fy.forEach(e=>{this._triggerElement.removeEventListener(e,this,_m)}))}}const oA=new d.OlP("mat-ripple-global-options");let Ad=(()=>{class n{constructor(t,r,i,o,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new py(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(gr),d.Y36(oA,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),my=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ni,Ni]}),n})();const hA=["*",[["mat-card-footer"]]],fA=["*","mat-card-footer"];let _F=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:fA,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(hA),d.Hsn(0),d.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),fu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ni,Ni]}),n})();class iE{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class EA extends iE{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class gy extends iE{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class bF extends iE{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}let vm=(()=>{class n extends class CA{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof EA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof gy?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof bF?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=o=>{const c=o.element,h=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(o,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(le))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),n})(),DA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Cr(n,e){return(0,Un.e)((t,r)=>{let i=null,o=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,kn.x)(r,m=>{i?.unsubscribe();let y=0;const C=o++;(0,vs.Xf)(n(m,C)).subscribe(i=(0,kn.x)(r,T=>r.next(e?e(m,T,C,y++):T),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Pi=L(5577),sE=L(1144),ma=L(576);const oE=["addListener","removeListener"],aE=["addEventListener","removeEventListener"],yy=["on","off"];function nf(n,e,t,r){if((0,ma.m)(t)&&(r=t,t=void 0),r)return nf(n,e,t).pipe(bd(r));const[i,o]=function Md(n){return(0,ma.m)(n.addEventListener)&&(0,ma.m)(n.removeEventListener)}(n)?aE.map(c=>h=>n[c](e,h,t)):function TA(n){return(0,ma.m)(n.addListener)&&(0,ma.m)(n.removeListener)}(n)?oE.map(bm(n,e)):function DF(n){return(0,ma.m)(n.on)&&(0,ma.m)(n.off)}(n)?yy.map(bm(n,e)):[];if(!i&&(0,sE.z)(n))return(0,Pi.z)(c=>nf(c,e,t))((0,vs.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new sn.y(c=>{const h=(...m)=>c.next(1<m.length?m:m[0]);return i(h),()=>o(h)})}function bm(n,e){return t=>r=>n[t](e,r)}var ec=L(6451),lE=L(3532);function Ks(n=0,e,t=da.P){let r=-1;return null!=e&&((0,lE.K)(e)?t=e:r=e),new sn.y(i=>{let o=function wm(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}class vy{}const Io="*";function ga(n,e){return{type:7,name:n,definitions:e,options:{}}}function xd(n,e=null){return{type:4,styles:e,timings:n}}function Em(n,e=null){return{type:2,steps:n,options:e}}function tc(n){return{type:6,styles:n,offset:null}}function rf(n,e,t){return{type:0,name:n,styles:e,options:t}}function pu(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function hE(n){Promise.resolve().then(n)}class sf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class fE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?hE(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var Ey=L(4408);const Cm={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Cm;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new xi.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Cm;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Cm;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var xA=L(7565);new class pE extends xA.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class MA extends Ey.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Cm.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Cm.cancelAnimationFrame(t),e._scheduled=void 0)}});let gE,Cy=1;const Iy={};function RA(n){return n in Iy&&(delete Iy[n],!0)}const SF={setImmediate(n){const e=Cy++;return Iy[e]=!0,gE||(gE=Promise.resolve()),gE.then(()=>RA(e)&&n()),e},clearImmediate(n){RA(n)}},{setImmediate:AF,clearImmediate:MF}=SF,Dy={setImmediate(...n){const{delegate:e}=Dy;return(e?.setImmediate||AF)(...n)},clearImmediate(n){const{delegate:e}=Dy;return(e?.clearImmediate||MF)(n)},delegate:void 0};new class RF extends xA.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class xF extends Ey.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Dy.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Dy.clearImmediate(t),e._scheduled=void 0)}});let Ty=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new rn.x,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function yE(n,e=da.z){return function kA(n){return(0,Un.e)((e,t)=>{let r=!1,i=null,o=null,c=!1;const h=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const y=i;i=null,t.next(y)}c&&t.complete()},m=()=>{o=null,c&&t.complete()};e.subscribe((0,kn.x)(t,y=>{r=!0,i=y,o||(0,vs.Xf)(n(y)).subscribe(o=(0,kn.x)(t,h,m))},()=>{c=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>Ks(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gr),d.LFG(d.R0b),d.LFG(le,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function My(n,e){1&n&&d.Hsn(0)}const DE=["*"];function OF(n,e){}const UA=function(n){return{animationDuration:n}},TE=function(n,e){return{value:n,params:e}},jA=["tabListContainer"],SE=["tabList"],AE=["tabListInner"],HA=["nextPaginator"],bs=["previousPaginator"],ME=["tabBodyWrapper"],$A=["tabHeader"];function FF(n,e){}function GA(n,e){if(1&n&&d.YNc(0,FF,0,0,"ng-template",10),2&n){const t=d.oxw().$implicit;d.Q6J("cdkPortalOutlet",t.templateLabel)}}function xy(n,e){if(1&n&&d._uU(0),2&n){const t=d.oxw().$implicit;d.Oqu(t.textLabel)}}function xE(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6),d.NdJ("click",function(){const i=d.CHM(t),o=i.$implicit,c=i.index,h=d.oxw(),m=d.MAs(1);return d.KtG(h._handleClick(o,m,c))})("cdkFocusChange",function(i){const c=d.CHM(t).index,h=d.oxw();return d.KtG(h._tabFocusChanged(i,c))}),d.TgZ(1,"div",7),d.YNc(2,GA,1,1,"ng-template",8),d.YNc(3,xy,1,1,"ng-template",null,9,d.W1O),d.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=d.MAs(4),o=d.oxw();d.ekj("mat-tab-label-active",o.selectedIndex===r),d.Q6J("id",o._getTabLabelId(r))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||o.disableRipple),d.uIk("tabIndex",o._getTabIndex(t,r))("aria-posinset",r+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(r))("aria-selected",o.selectedIndex===r)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),d.xp6(2),d.Q6J("ngIf",t.templateLabel)("ngIfElse",i)}}function zA(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"mat-tab-body",11),d.NdJ("_onCentered",function(){d.CHM(t);const i=d.oxw();return d.KtG(i._removeTabBodyWrapperHeight())})("_onCentering",function(i){d.CHM(t);const o=d.oxw();return d.KtG(o._setTabBodyWrapperHeight(i))}),d.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.ekj("mat-tab-body-active",i.selectedIndex===r),d.Q6J("id",i._getTabContentId(r))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration)("preserveContent",i.preserveContent),d.uIk("tabindex",null!=i.contentTabIndex&&i.selectedIndex===r?i.contentTabIndex:null)("aria-labelledby",i._getTabLabelId(r))}}const WA=new d.OlP("MatInkBarPositioner",{providedIn:"root",factory:function RE(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let kE=(()=>{class n{constructor(t,r,i,o){this._elementRef=t,this._ngZone=r,this._inkBarPositioner=i,this._animationMode=o}alignToElement(t){this.show(),this._ngZone.run(()=>{this._ngZone.onStable.pipe(Ke(1)).subscribe(()=>{const r=this._inkBarPositioner(t),i=this._elementRef.nativeElement;i.style.left=r.left,i.style.width=r.width})})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(WA),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)}}),n})();const NE=new d.OlP("MatTabContent"),qA=new d.OlP("MatTabLabel"),PE=new d.OlP("MAT_TAB"),ZA=ly(class{}),Do=new d.OlP("MAT_TAB_GROUP");let Im=(()=>{class n extends ZA{constructor(t,r){super(),this._viewContainerRef=t,this._closestTabGroup=r,this.textLabel="",this._contentPortal=null,this._stateChanges=new rn.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new gy(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(Do,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,qA,5),d.Suo(i,NE,7,d.Rgc)),2&t){let o;d.iGM(o=d.CRH())&&(r.templateLabel=o.first),d.iGM(o=d.CRH())&&(r._explicitContent=o.first)}},viewQuery:function(t,r){if(1&t&&d.Gf(d.Rgc,7),2&t){let i;d.iGM(i=d.CRH())&&(r._implicitContent=i.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[d._Bn([{provide:PE,useExisting:n}]),d.qOj,d.TTD],ngContentSelectors:DE,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.YNc(0,My,1,0,"ng-template"))},encapsulation:2}),n})();const YA={translateTab:ga("translateTab",[rf("center, void, left-origin-center, right-origin-center",tc({transform:"none"})),rf("left",tc({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),rf("right",tc({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),pu("* => left, * => right, left => center, right => center",xd("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),pu("void => left-origin-center",[tc({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),xd("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),pu("void => right-origin-center",[tc({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),xd("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let QA=(()=>{class n extends vm{constructor(t,r,i,o){super(t,r,o),this._host=i,this._centeringSub=xi.w0.EMPTY,this._leavingSub=xi.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(st(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36((0,d.Gpc)(()=>Ry)),d.Y36(le))},n.\u0275dir=d.lG2({type:n,selectors:[["","matTabBodyHost",""]],features:[d.qOj]}),n})(),BF=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._dir=r,this._dirChangeSubscription=xi.w0.EMPTY,this._translateTabComplete=new rn.x,this._onCentering=new d.vpe,this._beforeCentering=new d.vpe,this._afterLeavingCenter=new d.vpe,this._onCentered=new d.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(o=>{this._computePositionAnimationState(o),i.markForCheck()})),this._translateTabComplete.pipe(Yl((o,c)=>o.fromState===c.fromState&&o.toState===c.toState)).subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const r=this._isCenterPosition(t.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const r=this._getLayoutDirection();return"ltr"==r&&t<=0||"rtl"==r&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Id,8),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),Ry=(()=>{class n extends BF{constructor(t,r,i){super(t,r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Id,8),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,r){if(1&t&&d.Gf(vm,5),2&t){let i;d.iGM(i=d.CRH())&&(r._portalHost=i.first)}},hostAttrs:[1,"mat-tab-body"],features:[d.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0,1),d.NdJ("@translateTab.start",function(o){return r._onTranslateTabStarted(o)})("@translateTab.done",function(o){return r._translateTabComplete.next(o)}),d.YNc(2,OF,0,0,"ng-template",2),d.qZA()),2&t&&d.Q6J("@translateTab",d.WLB(3,TE,r._position,d.VKq(1,UA,r.animationDuration)))},dependencies:[QA],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[YA.translateTab]}}),n})();const OE=new d.OlP("MAT_TABS_CONFIG"),JA=ly(class{});let FE=(()=>{class n extends JA{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,r){2&t&&(d.uIk("aria-disabled",!!r.disabled),d.ekj("mat-tab-disabled",r.disabled))},inputs:{disabled:"disabled"},features:[d.qOj]}),n})();const Dm=ui({passive:!0});let ky=(()=>{class n{constructor(t,r,i,o,c,h,m){this._elementRef=t,this._changeDetectorRef=r,this._viewportRuler=i,this._dir=o,this._ngZone=c,this._platform=h,this._animationMode=m,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new rn.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new rn.x,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new d.vpe,this.indexFocused=new d.vpe,c.runOutsideAngular(()=>{nf(t.nativeElement,"mouseleave").pipe(Qi(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=yr(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Ur(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){nf(this._previousPaginator.nativeElement,"touchstart",Dm).pipe(Qi(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),nf(this._nextPaginator.nativeElement,"touchstart",Dm).pipe(Qi(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:it("ltr"),r=this._viewportRuler.change(150),i=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new LS(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(Ke(1)).subscribe(i),(0,ec.T)(t,r,this._items.changes,this._itemsResized()).pipe(Qi(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),i()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Qi(this._destroyed)).subscribe(o=>{this.indexFocused.emit(o),this._setTabFocus(o)})}_itemsResized(){return"function"!=typeof ResizeObserver?Pe.E:this._items.changes.pipe(st(this._items),Cr(t=>new sn.y(r=>this._ngZone.runOutsideAngular(()=>{const i=new ResizeObserver(()=>{r.next()});return t.forEach(o=>{i.observe(o.elementRef.nativeElement)}),()=>{i.disconnect()}}))),Zl(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!gd(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const r=this._items?this._items.toArray()[t]:null;return!!r&&!r.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const r=this._tabListContainer.nativeElement;r.scrollLeft="ltr"==this._getLayoutDirection()?0:r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,r="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const r=this._items?this._items.toArray()[t]:null;if(!r)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:c}=r.elementRef.nativeElement;let h,m;"ltr"==this._getLayoutDirection()?(h=o,m=h+c):(m=this._tabListInner.nativeElement.offsetWidth-o,h=m-c);const y=this.scrollDistance,C=this.scrollDistance+i;h<y?this.scrollDistance-=y-h+60:m>C&&(this.scrollDistance+=m-C+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=t?t.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,r){r&&null!=r.button&&0!==r.button||(this._stopInterval(),Ks(650,100).pipe(Qi((0,ec.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:i,distance:o}=this._scrollHeader(t);(0===o||o>=i)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Ty),d.Y36(Id,8),d.Y36(d.R0b),d.Y36(gr),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),Sm=(()=>{class n extends ky{constructor(t,r,i,o,c,h,m){super(t,r,i,o,c,h,m),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=yr(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Ty),d.Y36(Id,8),d.Y36(d.R0b),d.Y36(gr),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,inputs:{disableRipple:"disableRipple"},features:[d.qOj]}),n})(),UF=(()=>{class n extends Sm{constructor(t,r,i,o,c,h,m){super(t,r,i,o,c,h,m)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Ty),d.Y36(Id,8),d.Y36(d.R0b),d.Y36(gr),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,FE,4),2&t){let o;d.iGM(o=d.CRH())&&(r._items=o)}},viewQuery:function(t,r){if(1&t&&(d.Gf(kE,7),d.Gf(jA,7),d.Gf(SE,7),d.Gf(AE,7),d.Gf(HA,5),d.Gf(bs,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._inkBar=i.first),d.iGM(i=d.CRH())&&(r._tabListContainer=i.first),d.iGM(i=d.CRH())&&(r._tabList=i.first),d.iGM(i=d.CRH())&&(r._tabListInner=i.first),d.iGM(i=d.CRH())&&(r._nextPaginator=i.first),d.iGM(i=d.CRH())&&(r._previousPaginator=i.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-tab-header-rtl","rtl"==r._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[d.qOj],ngContentSelectors:DE,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"button",0,1),d.NdJ("click",function(){return r._handlePaginatorClick("before")})("mousedown",function(o){return r._handlePaginatorPress("before",o)})("touchend",function(){return r._stopInterval()}),d._UZ(2,"div",2),d.qZA(),d.TgZ(3,"div",3,4),d.NdJ("keydown",function(o){return r._handleKeydown(o)}),d.TgZ(5,"div",5,6),d.NdJ("cdkObserveContent",function(){return r._onContentChanges()}),d.TgZ(7,"div",7,8),d.Hsn(9),d.qZA(),d._UZ(10,"mat-ink-bar"),d.qZA()(),d.TgZ(11,"button",9,10),d.NdJ("mousedown",function(o){return r._handlePaginatorPress("after",o)})("click",function(){return r._handlePaginatorClick("after")})("touchend",function(){return r._stopInterval()}),d._UZ(13,"div",2),d.qZA()),2&t&&(d.ekj("mat-tab-header-pagination-disabled",r._disableScrollBefore),d.Q6J("matRippleDisabled",r._disableScrollBefore||r.disableRipple)("disabled",r._disableScrollBefore||null),d.xp6(5),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode),d.xp6(6),d.ekj("mat-tab-header-pagination-disabled",r._disableScrollAfter),d.Q6J("matRippleDisabled",r._disableScrollAfter||r.disableRipple)("disabled",r._disableScrollAfter||null))},dependencies:[Ad,Yh,kE],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}.mat-tab-label::before{margin:5px}@media(max-width: 599px){.mat-tab-label{min-width:72px}}"],encapsulation:2}),n})(),Ny=0;class jF{}const VE=cy(uy(class{constructor(n){this._elementRef=n}}),"primary");let BE=(()=>{class n extends VE{constructor(t,r,i,o){super(t),this._changeDetectorRef=r,this._animationMode=o,this._tabs=new d.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=xi.w0.EMPTY,this._tabLabelSubscription=xi.w0.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new d.vpe,this.focusChange=new d.vpe,this.animationDone=new d.vpe,this.selectedTabChange=new d.vpe(!0),this._groupId=Ny++,this.animationDuration=i&&i.animationDuration?i.animationDuration:"500ms",this.disablePagination=!(!i||null==i.disablePagination)&&i.disablePagination,this.dynamicHeight=!(!i||null==i.dynamicHeight)&&i.dynamicHeight,this.contentTabIndex=i?.contentTabIndex??null,this.preserveContent=!!i?.preserveContent}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=yr(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Ur(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=Ur(t,null)}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=yr(t)}get preserveContent(){return this._preserveContent}set preserveContent(t){this._preserveContent=yr(t)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const r=this._elementRef.nativeElement;r.classList.remove(`mat-background-${this.backgroundColor}`),t&&r.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const r=null==this._selectedIndex;if(!r){this.selectedTabChange.emit(this._createChangeEvent(t));const i=this._tabBodyWrapper.nativeElement;i.style.minHeight=i.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((i,o)=>i.isActive=o===t),r||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,i)=>{r.position=i-t,null!=this._selectedIndex&&0==r.position&&!r.origin&&(r.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const r=this._tabs.toArray();let i;for(let o=0;o<r.length;o++)if(r[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,i=r[o];break}!i&&r[t]&&Promise.resolve().then(()=>{r[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(st(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const r=this._tabHeader;r&&(r.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const r=new jF;return r.index=t,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[t]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,ec.T)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,r,i){t.disabled||(this.selectedIndex=r.focusIndex=i)}_getTabIndex(t,r){return t.disabled?null:r===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,r){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(OE,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[d.qOj]}),n})(),UE=(()=>{class n extends BE{constructor(t,r,i,o){super(t,r,i,o)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(OE,8),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Im,5),2&t){let o;d.iGM(o=d.CRH())&&(r._allTabs=o)}},viewQuery:function(t,r){if(1&t&&(d.Gf(ME,5),d.Gf($A,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._tabBodyWrapper=i.first),d.iGM(i=d.CRH())&&(r._tabHeader=i.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-tab-group-dynamic-height",r.dynamicHeight)("mat-tab-group-inverted-header","below"===r.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[d._Bn([{provide:Do,useExisting:n}]),d.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"]],template:function(t,r){1&t&&(d.TgZ(0,"mat-tab-header",0,1),d.NdJ("indexFocused",function(o){return r._focusChanged(o)})("selectFocusedIndex",function(o){return r.selectedIndex=o}),d.YNc(2,xE,5,15,"div",2),d.qZA(),d.TgZ(3,"div",3,4),d.YNc(5,zA,1,11,"mat-tab-body",5),d.qZA()),2&t&&(d.Q6J("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination),d.xp6(2),d.Q6J("ngForOf",r._tabs),d.xp6(1),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode),d.xp6(2),d.Q6J("ngForOf",r._tabs))},dependencies:[cn,Ls,Yn,vm,Ad,il,FE,Ry,UF],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],encapsulation:2}),n})(),Fy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[oo,Ni,DA,my,jr,Gw,Ni]}),n})();function HE(n){return new d.vHH(3e3,!1)}function Nd(){return typeof window<"u"&&typeof window.document<"u"}function ic(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ws(n){switch(n.length){case 0:return new sf;case 1:return n[0];default:return new fE(n)}}function yu(n,e,t,r,i=new Map,o=new Map){const c=[],h=[];let m=-1,y=null;if(r.forEach(C=>{const T=C.get("offset"),x=T==m,P=x&&y||new Map;C.forEach((B,Q)=>{let he=Q,ke=B;if("offset"!==Q)switch(he=e.normalizePropertyName(he,c),ke){case"!":ke=i.get(Q);break;case Io:ke=o.get(Q);break;default:ke=e.normalizeStyleValue(Q,he,ke,c)}P.set(he,ke)}),x||h.push(P),y=P,m=T}),c.length)throw function mM(n){return new d.vHH(3502,!1)}();return h}function sc(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&oc(t,"start",n)));break;case"done":n.onDone(()=>r(t&&oc(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&oc(t,"destroy",n)))}}function oc(n,e,t){const o=ac(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(o._data=c),o}function ac(n,e,t,r,i="",o=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function Xi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function By(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Rm=(n,e)=>!1,Uy=(n,e,t)=>[],jy=null;function km(n){const e=n.parentNode||n.host;return e===jy?null:e}(ic()||typeof Element<"u")&&(Nd()?(jy=(()=>document.documentElement)(),Rm=(n,e)=>{for(;e;){if(e===n)return!0;e=km(e)}return!1}):Rm=(n,e)=>n.contains(e),Uy=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let lc=null,qE=!1;const Hy=Rm,Nm=Uy;let ZE=(()=>{class n{validateStyleProperty(t){return function vM(n){lc||(lc=function wM(){return typeof document<"u"?document.body:null}()||{},qE=!!lc.style&&"WebkitAppearance"in lc.style);let e=!0;return lc.style&&!function WE(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in lc.style,!e&&qE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in lc.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Hy(t,r)}getParentElement(t){return km(t)}query(t,r,i){return Nm(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,c,h=[],m){return new sf(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Pd=(()=>{class n{}return n.NOOP=new ZE,n})();const Od="ng-enter",vu="ng-leave",hf="ng-trigger",ff=".ng-trigger",Fm="ng-animating",Lm=".ng-animating";function ya(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pf(parseFloat(e[1]),e[2])}function pf(n,e){return"s"===e?1e3*n:n}function mf(n,e,t){return n.hasOwnProperty("duration")?n:function CM(n,e,t){let i,o=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(HE()),{duration:0,delay:0,easing:""};i=pf(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(o=pf(parseFloat(m),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push(function nM(){return new d.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function cf(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(m,0,HE())}return{duration:i,delay:o,easing:c}}(n,e,t)}function Fd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function $y(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function cc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function zy(n,e,t){return t?e+":"+t+";":""}function Wy(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=zy(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=zy(0,WF(t),n.style[t]));n.setAttribute("style",e)}function To(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Bm(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),ic()&&Wy(n))}function sl(n,e){n.style&&(e.forEach((t,r)=>{const i=Bm(r);n.style[i]=""}),ic()&&Wy(n))}function Ld(n){return Array.isArray(n)?1==n.length?n[0]:Em(n):n}const Vm=new RegExp("{{\\s*(.+?)\\s*}}","g");function qy(n){let e=[];if("string"==typeof n){let t;for(;t=Vm.exec(n);)e.push(t[1]);Vm.lastIndex=0}return e}function Vd(n,e,t){const r=n.toString(),i=r.replace(Vm,(o,c)=>{let h=e[c];return null==h&&(t.push(function $F(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function gf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const JE=/-+([a-z0-9])/g;function Bm(n){return n.replace(JE,(...e)=>e[1].toUpperCase())}function WF(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function es(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function iM(n){return new d.vHH(3004,!1)}()}}function XE(n,e){return window.getComputedStyle(n)[e]}function Bd(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function MM(n,e,t){if(":"==n[0]){const m=function xM(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Mm(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function pM(n){return new d.vHH(3015,!1)}()),e;const i=r[1],o=r[2],c=r[3];e.push(Ky(i,c));"<"==o[0]&&!("*"==i&&"*"==c)&&e.push(Ky(c,i))}(r,t,e)):t.push(n),t}const vf=new Set(["true","1"]),Um=new Set(["false","0"]);function Ky(n,e){const t=vf.has(n)||Um.has(n),r=vf.has(e)||Um.has(e);return(i,o)=>{let c="*"==n||n==i,h="*"==e||e==o;return!c&&t&&"boolean"==typeof i&&(c=i?vf.has(n):Um.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?vf.has(e):Um.has(e)),c&&h}}const tC=new RegExp("s*:selfs*,?","g");function bf(n,e,t,r){return new kM(n).build(e,t,r)}class kM{constructor(e){this._driver=e}build(e,t,r){const i=new Ao(t);return this._resetContextStyleTimingState(i),es(this,Ld(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function sM(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,y=m.name;y.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,o.push(this.visitState(m,t))}),m.name=y}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,c.push(m)}else t.errors.push(function oM(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{qy(m).forEach(y=>{c.hasOwnProperty(y)||o.add(y)})})}),o.size&&(gf(o.values()),t.errors.push(function aM(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=es(this,Ld(e.animation),t);return{type:1,matchers:Bd(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:uc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>es(this,r,t)),options:uc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(c=>{t.currentTime=r;const h=es(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:uc(e.options)}}visitAnimate(e,t){const r=function nC(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Zy(mf(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Zy(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=mf(t,e);return Zy(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:tc({});if(5==o.type)i=this.visitKeyframes(o,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=tc(y)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(c,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Io?r.push(h):t.errors.push(new d.vHH(3002,!1)):r.push($y(h));let o=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!o))for(let m of h.values())if(m.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,m)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(m);let T=!0;C&&(o!=i&&o>=C.startTime&&i<=C.endTime&&(t.errors.push(function lM(n,e,t,r,i){return new d.vHH(3010,!1)}()),T=!1),o=C.startTime),T&&y.set(m,{startTime:o,endTime:i}),t.options&&function QE(n,e,t){const r=e.params||{},i=qy(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function rM(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Ly(){return new d.vHH(3011,!1)}()),r;let o=0;const c=[];let h=!1,m=!1,y=0;const C=e.steps.map(ke=>{const ze=this._makeStyleAst(ke,t);let nt=null!=ze.offset?ze.offset:function Mo(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ze.styles),et=0;return null!=nt&&(o++,et=ze.offset=nt),m=m||et<0||et>1,h=h||et<y,y=et,c.push(et),ze});m&&t.errors.push(function cM(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function uM(){return new d.vHH(3200,!1)}());const T=e.steps.length;let x=0;o>0&&o<T?t.errors.push(function dM(){return new d.vHH(3202,!1)}()):0==o&&(x=1/(T-1));const P=T-1,B=t.currentTime,Q=t.currentAnimateTimings,he=Q.duration;return C.forEach((ke,ze)=>{const nt=x>0?ze==P?1:x*ze:c[ze],et=nt*he;t.currentTime=B+Q.delay+et,Q.duration=et,this._validateStyleAst(ke,t),ke.offset=nt,r.styles.push(ke)}),r}visitReference(e,t){return{type:8,animation:es(this,Ld(e.animation),t),options:uc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:uc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:uc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,c]=function NM(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(tC,"")),n=n.replace(/@\*/g,ff).replace(/@\w+/g,t=>ff+"-"+t.slice(1)).replace(/:animating/g,Lm),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Xi(t.collectedStyles,t.currentQuerySelector,new Map);const h=es(this,Ld(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:uc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function hM(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:mf(e.timings,t.errors,!0);return{type:12,animation:es(this,Ld(e.animation),t),timings:r,options:null}}}class Ao{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function uc(n){return n?(n=Fd(n)).params&&(n.params=function va(n){return n?Fd(n):null}(n.params)):n={},n}function Zy(n,e,t){return{duration:n,delay:e,easing:t}}function Yy(n,e,t,r,i,o,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:h}}class jm{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const wf=new RegExp(":enter","g"),rC=new RegExp(":leave","g");function Jy(n,e,t,r,i,o=new Map,c=new Map,h,m,y=[]){return(new iC).buildKeyframes(n,e,t,r,i,o,c,h,m,y)}class iC{buildKeyframes(e,t,r,i,o,c,h,m,y,C=[]){y=y||new jm;const T=new Ud(e,t,y,i,o,C,[]);T.options=m;const x=m.delay?ya(m.delay):0;T.currentTimeline.delayNextStep(x),T.currentTimeline.setStyles([c],null,T.errors,m),es(this,r,T);const P=T.timelines.filter(B=>B.containsAnimation());if(P.length&&h.size){let B;for(let Q=P.length-1;Q>=0;Q--){const he=P[Q];if(he.element===t){B=he;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,T.errors,m)}return P.length?P.map(B=>B.buildKeyframes()):[Yy(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,r){const i=e.options?.delay;if(!i)return;let o;o="string"==typeof i?ya(Vd(i,e.options?.params??{},t.errors)):i,r.delayNextStep(o)}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const c=null!=r.duration?ya(r.duration):null,h=null!=r.delay?ya(r.delay):null;return 0!==c&&e.forEach(m=>{const y=t.appendInstructionToTimeline(m,c,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),es(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ef);const c=ya(o.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>es(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?ya(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),es(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return mf(t.params?Vd(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*o),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?ya(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ef);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const T=t.createSubContext(e.options,y);o&&T.delayNextStep(o),y===t.element&&(m=T.currentTimeline),es(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,c=Math.abs(o.duration),h=c*(t.currentQueryTotal-1);let m=c*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const T=C.currentTime;es(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const Ef={};class Ud{constructor(e,t,r,i,o,c,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ef,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Hm(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ya(r.duration)),null!=r.delay&&(i.delay=ya(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=Vd(o[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new Ud(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Ef,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new sC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(wf,"."+this._enterClassName)).replace(rC,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&c.push(function fM(n){return new d.vHH(3014,!1)}()),h}}class Hm{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Hm(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Io),this._currentKeyframe.set(t,Io);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},c=function ev(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Io)}else cc(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of c){const y=Vd(m,o,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Io),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const y=cc(h,new Map,this._backFill);y.forEach((C,T)=>{"!"===C?e.add(T):C===Io&&t.add(T)}),r||y.set("offset",m/this.duration),i.push(y)});const o=e.size?gf(e.values()):[],c=t.size?gf(t.values()):[];if(r){const h=i[0],m=new Map(h);h.set("offset",0),m.set("offset",1),i=[h,m]}return Yy(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class sC extends Hm{constructor(e,t,r,i,o,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],c=r+t,h=t/c,m=cc(e[0]);m.set("offset",0),o.push(m);const y=cc(e[0]);y.set("offset",Xy(h)),o.push(y);const C=e.length-1;for(let T=1;T<=C;T++){let x=cc(e[T]);const P=x.get("offset");x.set("offset",Xy((t+P*r)/c)),o.push(x)}r=c,t=0,i="",e=o}return Yy(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Xy(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $m{}const oC=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class aC extends $m{normalizePropertyName(e,t){return Bm(e)}normalizeStyleValue(e,t,r,i){let o="";const c=r.toString().trim();if(oC.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function GF(n,e){return new d.vHH(3005,!1)}())}return c+o}}function nv(n,e,t,r,i,o,c,h,m,y,C,T,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:c,timelines:h,queriedElements:m,preStyleProps:y,postStyleProps:C,totalTime:T,errors:x}}const Gm={};class rv{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function VM(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,c,h,m,y,C){const T=[],x=this.ast.options&&this.ast.options.params||Gm,B=this.buildStyles(r,h&&h.params||Gm,T),Q=m&&m.params||Gm,he=this.buildStyles(i,Q,T),ke=new Set,ze=new Map,nt=new Map,et="void"===i,Tt={params:BM(Q,x),delay:this.ast.options?.delay},At=C?[]:Jy(e,t,this.ast.animation,o,c,B,he,Tt,y,T);let an=0;if(At.forEach(Bu=>{an=Math.max(Bu.duration+Bu.delay,an)}),T.length)return nv(t,this._triggerName,r,i,et,B,he,[],[],ze,nt,an,T);At.forEach(Bu=>{const Uu=Bu.element,iz=Xi(ze,Uu,new Set);Bu.preStyleProps.forEach(Np=>iz.add(Np));const iw=Xi(nt,Uu,new Set);Bu.postStyleProps.forEach(Np=>iw.add(Np)),Uu!==t&&ke.add(Uu)});const ks=gf(ke.values());return nv(t,this._triggerName,r,i,et,B,he,At,ks,ze,nt,an)}}function BM(n,e){const t=Fd(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class UM{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Fd(this.defaultParams);return Object.keys(e).forEach(o=>{const c=e[o];null!==c&&(i[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,h)=>{c&&(c=Vd(c,i,t));const m=this.normalizer.normalizePropertyName(h,t);c=this.normalizer.normalizeStyleValue(h,m,c,t),r.set(m,c)})}),r}}class HM{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new UM(i.style,i.options&&i.options.params||{},r))}),lC(this.states,"true","1"),lC(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new rv(e,i,this.states))}),this.fallbackTransition=function $M(n,e,t){return new rv(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function lC(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const GM=new jm;class zM{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=bf(this._driver,t,r,[]);if(r.length)throw function gM(n){return new d.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=yu(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let c;const h=new Map;if(o?(c=Jy(this._driver,t,o,Od,vu,new Map,new Map,r,GM,i),c.forEach(C=>{const T=Xi(h,C.element,new Map);C.postStyleProps.forEach(x=>T.set(x,null))})):(i.push(function Vy(){return new d.vHH(3300,!1)}()),c=[]),i.length)throw function _M(n){return new d.vHH(3504,!1)}();h.forEach((C,T)=>{C.forEach((x,P)=>{C.set(P,this._driver.computeStyle(T,P,Io))})});const y=ws(c.map(C=>{const T=h.get(C.element);return this._buildPlayer(C,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function _a(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=ac(t,"","","");return sc(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const cC="ng-animate-queued",iv="ng-animate-disabled",YM=[],uC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QM={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Es="__ng_removed";class zm{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function pC(n){return n??null}(r?e.value:e),r){const o=Fd(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const jd="void",Wm=new zm(jd);class dC{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ei(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function df(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function fi(n){return new d.vHH(3303,!1)}();if(!function mC(n){return"start"==n||"done"==n}(r))throw function _u(n,e){return new d.vHH(3400,!1)}();const o=Xi(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};o.push(c);const h=Xi(this._engine.statesByElement,e,new Map);return h.has(t)||(ei(e,hf),ei(e,hf+"-"+t),h.set(t,Wm)),()=>{this._engine.afterFlush(()=>{const m=o.indexOf(c);m>=0&&o.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function xm(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),c=new qm(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ei(e,hf),ei(e,hf+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const y=new zm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&y.absorbOptions(m.options),h.set(t,y),m||(m=Wm),y.value!==jd&&m.value===y.value){if(!function yC(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(m.params,y.params)){const Q=[],he=o.matchStyles(m.value,m.params,Q),ke=o.matchStyles(y.value,y.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{sl(e,he),To(e,ke)})}return}const x=Xi(this._engine.playersByElement,e,[]);x.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let P=o.matchTransition(m.value,y.value,e,y.params),B=!1;if(!P){if(!i)return;P=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:m,toState:y,player:c,isFallbackTransition:B}),B||(ei(e,cC),c.onStart(()=>{Cf(e,cC)})),c.onDone(()=>{let Q=this.players.indexOf(c);Q>=0&&this.players.splice(Q,1);const he=this._engine.playersByElement.get(e);if(he){let ke=he.indexOf(c);ke>=0&&he.splice(ke,1)}}),this.players.push(c),x.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ff,!0);r.forEach(i=>{if(i[Es])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),c=new Map;if(o){const h=[];if(o.forEach((m,y)=>{if(c.set(y,m.value),this._triggers.has(y)){const C=this.trigger(e,y,jd,i);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&ws(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const m=this._triggers.get(c).fallbackTransition,y=r.get(c)||Wm,C=new zm(jd),T=new qm(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:m,fromState:y,toState:C,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Es];(!o||o===uC)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ei(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==r.triggerName){const m=ac(o,r.triggerName,r.fromState.value,r.toState.value);m._data=e,sc(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class hC{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new dC(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(t);for(;h;){const m=i.get(h);if(m){const y=r.indexOf(m);r.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Hd(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Hd(t))return;const o=t[Es];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ei(e,iv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Cf(e,iv))}removeNode(e,t,r,i){if(Hd(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Es]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Hd(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,ff,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Lm,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ws(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Es];if(t&&t.setForRemoval){if(e[Es]=uC,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(iv)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ei(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ws(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Zs(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new jm,i=[],o=new Map,c=[],h=new Map,m=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(dt=>{C.add(dt);const Ct=this.driver.query(dt,".ng-animate-queued",!0);for(let Mt=0;Mt<Ct.length;Mt++)C.add(Ct[Mt])});const T=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=_C(x,this.collectedEnterElements),B=new Map;let Q=0;P.forEach((dt,Ct)=>{const Mt=Od+Q++;B.set(Ct,Mt),dt.forEach(pn=>ei(pn,Mt))});const he=[],ke=new Set,ze=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const Ct=this.collectedLeaveElements[dt],Mt=Ct[Es];Mt&&Mt.setForRemoval&&(he.push(Ct),ke.add(Ct),Mt.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(pn=>ke.add(pn)):ze.add(Ct))}const nt=new Map,et=_C(x,Array.from(ke));et.forEach((dt,Ct)=>{const Mt=vu+Q++;nt.set(Ct,Mt),dt.forEach(pn=>ei(pn,Mt))}),e.push(()=>{P.forEach((dt,Ct)=>{const Mt=B.get(Ct);dt.forEach(pn=>Cf(pn,Mt))}),et.forEach((dt,Ct)=>{const Mt=nt.get(Ct);dt.forEach(pn=>Cf(pn,Mt))}),he.forEach(dt=>{this.processLeaveNode(dt)})});const Tt=[],At=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(t).forEach(Mt=>{const pn=Mt.player,Ii=Mt.element;if(Tt.push(pn),this.collectedEnterElements.length){const ss=Ii[Es];if(ss&&ss.setForMove){if(ss.previousTriggersValues&&ss.previousTriggersValues.has(Mt.triggerName)){const Pp=ss.previousTriggersValues.get(Mt.triggerName),Ra=this.statesByElement.get(Mt.element);if(Ra&&Ra.has(Mt.triggerName)){const ES=Ra.get(Mt.triggerName);ES.value=Pp,Ra.set(Mt.triggerName,ES)}}return void pn.destroy()}}const xc=!T||!this.driver.containsElement(T,Ii),Vo=nt.get(Ii),xh=B.get(Ii),br=this._buildInstruction(Mt,r,xh,Vo,xc);if(br.errors&&br.errors.length)return void At.push(br);if(xc)return pn.onStart(()=>sl(Ii,br.fromStyles)),pn.onDestroy(()=>To(Ii,br.toStyles)),void i.push(pn);if(Mt.isFallbackTransition)return pn.onStart(()=>sl(Ii,br.fromStyles)),pn.onDestroy(()=>To(Ii,br.toStyles)),void i.push(pn);const az=[];br.timelines.forEach(ss=>{ss.stretchStartingKeyframe=!0,this.disabledNodes.has(ss.element)||az.push(ss)}),br.timelines=az,r.append(Ii,br.timelines),c.push({instruction:br,player:pn,element:Ii}),br.queriedElements.forEach(ss=>Xi(h,ss,[]).push(pn)),br.preStyleProps.forEach((ss,Pp)=>{if(ss.size){let Ra=m.get(Pp);Ra||m.set(Pp,Ra=new Set),ss.forEach((ES,O1)=>Ra.add(O1))}}),br.postStyleProps.forEach((ss,Pp)=>{let Ra=y.get(Pp);Ra||y.set(Pp,Ra=new Set),ss.forEach((ES,O1)=>Ra.add(O1))})});if(At.length){const dt=[];At.forEach(Ct=>{dt.push(function Rd(n,e){return new d.vHH(3505,!1)}())}),Tt.forEach(Ct=>Ct.destroy()),this.reportError(dt)}const an=new Map,ks=new Map;c.forEach(dt=>{const Ct=dt.element;r.has(Ct)&&(ks.set(Ct,Ct),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,an))}),i.forEach(dt=>{const Ct=dt.element;this._getPreviousPlayers(Ct,!1,dt.namespaceId,dt.triggerName,null).forEach(pn=>{Xi(an,Ct,[]).push(pn),pn.destroy()})});const Bu=he.filter(dt=>JM(dt,m,y)),Uu=new Map;gC(Uu,this.driver,ze,y,Io).forEach(dt=>{JM(dt,m,y)&&Bu.push(dt)});const iw=new Map;P.forEach((dt,Ct)=>{gC(iw,this.driver,new Set(dt),m,"!")}),Bu.forEach(dt=>{const Ct=Uu.get(dt),Mt=iw.get(dt);Uu.set(dt,new Map([...Array.from(Ct?.entries()??[]),...Array.from(Mt?.entries()??[])]))});const Np=[],sz=[],oz={};c.forEach(dt=>{const{element:Ct,player:Mt,instruction:pn}=dt;if(r.has(Ct)){if(C.has(Ct))return Mt.onDestroy(()=>To(Ct,pn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(pn.totalTime),void i.push(Mt);let Ii=oz;if(ks.size>1){let Vo=Ct;const xh=[];for(;Vo=Vo.parentNode;){const br=ks.get(Vo);if(br){Ii=br;break}xh.push(Vo)}xh.forEach(br=>ks.set(br,Ii))}const xc=this._buildAnimation(Mt.namespaceId,pn,an,o,iw,Uu);if(Mt.setRealPlayer(xc),Ii===oz)Np.push(Mt);else{const Vo=this.playersByElement.get(Ii);Vo&&Vo.length&&(Mt.parentPlayer=ws(Vo)),i.push(Mt)}}else sl(Ct,pn.fromStyles),Mt.onDestroy(()=>To(Ct,pn.toStyles)),sz.push(Mt),C.has(Ct)&&i.push(Mt)}),sz.forEach(dt=>{const Ct=o.get(dt.element);if(Ct&&Ct.length){const Mt=ws(Ct);dt.setRealPlayer(Mt)}}),i.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<he.length;dt++){const Ct=he[dt],Mt=Ct[Es];if(Cf(Ct,vu),Mt&&Mt.hasAnimation)continue;let pn=[];if(h.size){let xc=h.get(Ct);xc&&xc.length&&pn.push(...xc);let Vo=this.driver.query(Ct,Lm,!0);for(let xh=0;xh<Vo.length;xh++){let br=h.get(Vo[xh]);br&&br.length&&pn.push(...br)}}const Ii=pn.filter(xc=>!xc.destroyed);Ii.length?sv(this,Ct,Ii):this.processLeaveNode(Ct)}return he.length=0,Np.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const Ct=this.players.indexOf(dt);this.players.splice(Ct,1)}),dt.play()}),Np}elementContainsData(e,t){let r=!1;const i=t[Es];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const m=!o||o==jd;h.forEach(y=>{y.queued||!m&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const o=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const y=m.element,C=y!==o,T=Xi(r,y,[]);this._getPreviousPlayers(y,C,c,h,t.toState).forEach(P=>{const B=P.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),P.destroy(),T.push(P)})}sl(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,c){const h=t.triggerName,m=t.element,y=[],C=new Set,T=new Set,x=t.timelines.map(B=>{const Q=B.element;C.add(Q);const he=Q[Es];if(he&&he.removedBeforeQueried)return new sf(B.duration,B.delay);const ke=Q!==m,ze=function KF(n){const e=[];return ov(n,e),e}((r.get(Q)||YM).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===Q),nt=o.get(Q),et=c.get(Q),Tt=yu(0,this._normalizer,0,B.keyframes,nt,et),At=this._buildPlayer(B,Tt,ze);if(B.subTimeline&&i&&T.add(Q),ke){const an=new qm(e,h,Q);an.setRealPlayer(At),y.push(an)}return At});y.forEach(B=>{Xi(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function fC(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>ei(B,Fm));const P=ws(x);return P.onDestroy(()=>{C.forEach(B=>Cf(B,Fm)),To(m,t.toStyles)}),T.forEach(B=>{Xi(i,B,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new sf(e.duration,e.delay)}}class qm{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>sc(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Xi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Hd(n){return n&&1===n.nodeType}function dc(n,e){const t=n.style.display;return n.style.display=e??"none",t}function gC(n,e,t,r,i){const o=[];t.forEach(m=>o.push(dc(m)));const c=[];r.forEach((m,y)=>{const C=new Map;m.forEach(T=>{const x=e.computeStyle(y,T,i);C.set(T,x),(!x||0==x.length)&&(y[Es]=QM,c.push(y))}),n.set(y,C)});let h=0;return t.forEach(m=>dc(m,o[h++])),c}function _C(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),o=new Map;function c(h){if(!h)return 1;let m=o.get(h);if(m)return m;const y=h.parentNode;return m=t.has(y)?y:i.has(y)?1:c(y),o.set(h,m),m}return e.forEach(h=>{const m=c(h);1!==m&&t.get(m).push(h)}),t}function ei(n,e){n.classList?.add(e)}function Cf(n,e){n.classList?.remove(e)}function sv(n,e,t){ws(t).onDone(()=>n.processLeaveNode(e))}function ov(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof fE?ov(r.players,e):e.push(r)}}function JM(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class yt{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new hC(e,t,r),this._timelineEngine=new zM(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const m=[],C=bf(this._driver,o,m,[]);if(m.length)throw function uf(n,e){return new d.vHH(3404,!1)}();h=function jM(n,e,t){return new HM(n,e,t)}(i,C,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,c]=By(r);this._timelineEngine.command(o,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[c,h]=By(r);return this._timelineEngine.listen(c,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ex=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&To(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(To(this._element,this._initialStyles),this._endStyles&&(To(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(sl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(sl(this._element,this._endStyles),this._endStyles=null),To(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function av(n){let e=null;return n.forEach((t,r)=>{(function $d(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class vC{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:XE(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Km{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Hy(e,t)}getParentElement(e){return km(e)}query(e,t,r){return Nm(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,c=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(m.easing=o);const y=new Map,C=c.filter(P=>P instanceof vC);(function IM(n,e){return 0===n||0===e})(r,i)&&C.forEach(P=>{P.currentSnapshot.forEach((B,Q)=>y.set(Q,B))});let T=function YE(n){return n.length?n[0]instanceof Map?n:n.map(e=>$y(e)):[]}(t).map(P=>cc(P));T=function DM(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,c)=>{r.has(c)||i.push(c),r.set(c,o)}),i.length)for(let o=1;o<e.length;o++){let c=e[o];i.forEach(h=>c.set(h,XE(n,h)))}}return e}(e,T,y);const x=function XM(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=av(e[0]),e.length>1&&(r=av(e[e.length-1]))):e instanceof Map&&(t=av(e)),t||r?new ex(n,t,r):null}(e,T);return new vC(e,T,m,x)}}let Zm=(()=>{class n extends vy{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Em(t):t;return lv(this._renderer,null,r,"register",[i]),new sr(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class sr extends class SA{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new ZF(this._id,e,t||{},this._renderer)}}class ZF{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return lv(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function lv(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const bC="@.disabled";let wC=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const h=c?.parentNode(o);h&&c.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(o);return C||(C=new cv("",o,this.engine),this._rendererCache.set(o,C)),C}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(c,h,t,C.name,C)};return r.data.animation.forEach(m),new EC(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,h]=o;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(yt),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class cv{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==bC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class EC extends cv{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==bC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function CC(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function tx(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let nx=(()=>{class n extends yt{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(Pd),d.LFG($m),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const IC=[{provide:vy,useClass:Zm},{provide:$m,useFactory:function rx(){return new aC}},{provide:yt,useClass:nx},{provide:d.FYo,useFactory:function Df(n,e,t){return new wC(n,e,t)},deps:[po,yt,d.R0b]}],uv=[{provide:Pd,useFactory:()=>new Km},{provide:d.QbO,useValue:"BrowserAnimations"},...IC],DC=[{provide:Pd,useClass:ZE},{provide:d.QbO,useValue:"NoopAnimations"},...IC];let Ym=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?DC:uv}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:uv,imports:[Ll]}),n})();const ax=["connectionContainer"],Tf=["inputContainer"],Sf=["label"];function lx(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15)(3,"div",16)(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15)(7,"div",16)(8,"div",17),d.qZA(),d.BQk())}function cx(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.Hsn(1,1),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function ux(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function TC(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function SC(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function AC(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.YNc(2,ux,4,1,"ng-container",12),d.YNc(3,TC,1,0,"ng-content",12),d.YNc(4,SC,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function dx(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function MC(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"span",26),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function hx(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function fx(n,e){if(1&n&&(d.TgZ(0,"div",30),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function YF(n,e){if(1&n&&(d.TgZ(0,"div",27),d.YNc(1,fx,2,2,"div",28),d.Hsn(2,6),d._UZ(3,"div",29),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const QF=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],JF=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],xC=new d.OlP("MatError"),px={transitionMessages:ga("transitionMessages",[rf("enter",tc({opacity:1,transform:"translateY(0%)"})),pu("void => enter",[tc({opacity:0,transform:"translateY(-5px)"}),xd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let hv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const gx=new d.OlP("MatHint");let fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),RC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const _x=new d.OlP("MatPrefix"),Af=new d.OlP("MatSuffix");let pv=0;const vx=cy(class{constructor(n){this._elementRef=n}},"primary"),kC=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),NC=new d.OlP("MatFormField");let gv=(()=>{class n extends vx{constructor(t,r,i,o,c,h,m){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new rn.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+pv++,this._labelId="mat-form-field-label-"+pv++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==m,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=yr(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(st(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Qi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Qi(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,ec.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(st(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(st(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Qi(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,nf(this._label.nativeElement,"transitionend").pipe(Ke(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${o}`);for(let T=0;T<C.length;T++)C[T].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const m=r.querySelectorAll(i),y=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const T=this._getStartEnd(C),x=t.children,P=this._getStartEnd(x[0].getBoundingClientRect());let B=0;for(let Q=0;Q<x.length;Q++)B+=x[Q].offsetWidth;c=Math.abs(P-T)-5,h=B>0?.75*B+10:0}for(let C=0;C<m.length;C++)m[C].style.width=`${c}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Id,8),d.Y36(kC,8),d.Y36(gr),d.Y36(d.R0b),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,hv,5),d.Suo(i,hv,7),d.Suo(i,fv,5),d.Suo(i,fv,7),d.Suo(i,RC,5),d.Suo(i,xC,5),d.Suo(i,gx,5),d.Suo(i,_x,5),d.Suo(i,Af,5)),2&t){let o;d.iGM(o=d.CRH())&&(r._controlNonStatic=o.first),d.iGM(o=d.CRH())&&(r._controlStatic=o.first),d.iGM(o=d.CRH())&&(r._labelChildNonStatic=o.first),d.iGM(o=d.CRH())&&(r._labelChildStatic=o.first),d.iGM(o=d.CRH())&&(r._placeholderChild=o.first),d.iGM(o=d.CRH())&&(r._errorChildren=o),d.iGM(o=d.CRH())&&(r._hintChildren=o),d.iGM(o=d.CRH())&&(r._prefixChildren=o),d.iGM(o=d.CRH())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(d.Gf(ax,7),d.Gf(Tf,5),d.Gf(Sf,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._connectionContainerRef=i.first),d.iGM(i=d.CRH())&&(r._inputContainerRef=i.first),d.iGM(i=d.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:NC,useExisting:n}]),d.qOj],ngContentSelectors:JF,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(d.F$t(QF),d.TgZ(0,"div",0)(1,"div",1,2),d.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),d.YNc(3,lx,9,0,"ng-container",3),d.YNc(4,cx,2,1,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,AC,5,16,"label",8),d.qZA()(),d.YNc(10,dx,2,0,"div",9),d.qZA(),d.YNc(11,MC,2,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,hx,2,1,"div",12),d.YNc(14,YF,5,2,"div",13),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==r.appearance),d.xp6(1),d.Q6J("ngIf",r._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",r._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",r._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=r.appearance),d.xp6(1),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[Yn,Pa,Ho,Yh],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[px.transitionMessages]},changeDetection:0}),n})(),_v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[oo,Ni,jr,Ni]}),n})(),yv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),bu=(()=>{class n extends yv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const xo=new d.OlP("NgValueAccessor"),wx={provide:xo,useExisting:(0,d.Gpc)(()=>Xm),multi:!0},Ex=new d.OlP("CompositionEventMode");let Xm=(()=>{class n extends yv{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OC(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Ex,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[d._Bn([wx]),d.qOj]}),n})();function hc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function FC(n){return null!=n&&"number"==typeof n.length}const pi=new d.OlP("NgValidators"),fc=new d.OlP("NgAsyncValidators"),Ix=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mf{static min(e){return function vv(n){return e=>{if(hc(e.value)||hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function LC(n){return e=>{if(hc(e.value)||hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function VC(n){return hc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function bv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function BC(n){return hc(n.value)||Ix.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function UC(n){return e=>hc(e.value)||!FC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function jC(n){return e=>FC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function eg(n){if(!n)return Gd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(hc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Cv(e)}static composeAsync(e){return Iv(e)}}function Gd(n){return null}function wv(n){return null!=n}function tg(n){return(0,d.QGY)(n)?(0,Dn.D)(n):n}function HC(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function $C(n,e){return e.map(t=>t(n))}function GC(n){return n.map(e=>function Ev(n){return!n.validate}(e)?e:t=>e.validate(t))}function Cv(n){if(!n)return null;const e=n.filter(wv);return 0==e.length?null:function(t){return HC($C(t,e))}}function pc(n){return null!=n?Cv(GC(n)):null}function Iv(n){if(!n)return null;const e=n.filter(wv);return 0==e.length?null:function(t){return function PC(...n){const e=(0,Ri.jO)(n),{args:t,keys:r}=Ql(n),i=new sn.y(o=>{const{length:c}=t;if(!c)return void o.complete();const h=new Array(c);let m=c,y=c;for(let C=0;C<c;C++){let T=!1;(0,vs.Xf)(t[C]).subscribe((0,kn.x)(o,x=>{T||(T=!0,y--),h[C]=x},()=>m--,void 0,()=>{(!m||!T)&&(y||o.next(r?v(r,h):h),o.complete())}))}});return e?i.pipe(bd(e)):i}($C(t,e).map(tg)).pipe((0,Ye.U)(HC))}}function Dv(n){return null!=n?Iv(GC(n)):null}function Dx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Tv(n){return n._rawValidators}function ng(n){return n._rawAsyncValidators}function Sv(n){return n?Array.isArray(n)?n:[n]:[]}function zd(n,e){return Array.isArray(n)?n.includes(e):n===e}function zC(n,e){const t=Sv(e);return Sv(n).forEach(i=>{zd(t,i)||t.push(i)}),t}function Av(n,e){return Sv(e).filter(t=>!zd(n,t))}class rg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class mi extends rg{get formDirective(){return null}get path(){return null}}class ba extends rg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Mv{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let WC=(()=>{class n extends Mv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ba,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),qC=(()=>{class n extends Mv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Rf="VALID",sg="INVALID",wa="PENDING",Wd="DISABLED";function og(n){return(lg(n)?n.validators:n)||null}function kv(n){return Array.isArray(n)?pc(n):n||null}function ag(n,e){return(lg(e)?e.asyncValidators:n)||null}function Nv(n){return Array.isArray(n)?Dv(n):n||null}function lg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function YC(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function kx(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class cg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=kv(this._rawValidators),this._composedAsyncValidatorFn=Nv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rf}get invalid(){return this.status===sg}get pending(){return this.status==wa}get disabled(){return this.status===Wd}get enabled(){return this.status!==Wd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=kv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Nv(e)}addValidators(e){this.setValidators(zC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Av(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Av(e,this._rawAsyncValidators))}hasValidator(e){return zd(this._rawValidators,e)}hasAsyncValidator(e){return zd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rf||this.status===wa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wd:Rf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wa,this._hasOwnPendingAsyncValidator=!0;const t=tg(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Wd:this.errors?sg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wa)?wa:this._anyControlsHaveStatus(sg)?sg:Rf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class kf extends cg{constructor(e,t,r){super(og(t),ag(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kx(this,0,e),Object.keys(e).forEach(r=>{YC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class QC extends kf{}function wu(n,e){Eu(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Nx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Nf(n,e)})}(n,e),function mg(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Px(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Nf(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fg(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Cs(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),pg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Eu(n,e){const t=Tv(n);null!==e.validator?n.setValidators(Dx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ng(n);null!==e.asyncValidator?n.setAsyncValidators(Dx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();hg(e._rawValidators,i),hg(e._rawAsyncValidators,i)}function pg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Tv(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=ng(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return hg(e._rawValidators,r),hg(e._rawAsyncValidators,r),t}function Nf(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JC(n,e){Eu(n,e)}function Bx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const Fv={provide:mi,useExisting:(0,d.Gpc)(()=>_g)},Cu=(()=>Promise.resolve())();let _g=(()=>{class n extends mi{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new kf({},pc(t),Dv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Cu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wu(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Cu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Cu.then(()=>{const r=this._findContainer(t.path),i=new kf({});JC(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Cu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Cu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Bx(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pi,10),d.Y36(fc,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Fv]),d.qOj]}),n})();function eI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Iu=class extends cg{constructor(e=null,t,r){super(og(t),ag(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tI(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),qx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Ff=new d.OlP("NgModelWithFormControlWarning"),Zx={provide:mi,useExisting:(0,d.Gpc)(()=>Lf)};let Lf=(()=>{class n extends mi{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wu(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Cs(t.control||null,t,!1),function Ov(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Bx(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Cs(r||null,t),(n=>n instanceof Iu)(i)&&(wu(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);JC(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Ox(n,e){return pg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Eu(this.form,this),this._oldForm&&pg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pi,10),d.Y36(fc,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Zx]),d.qOj,d.TTD]}),n})();const Gv={provide:ba,useExisting:(0,d.Gpc)(()=>aI)};let aI=(()=>{class n extends ba{constructor(t,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Pf(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Xm?t=o:function Vx(n){return Object.getPrototypeOf(n.constructor)===bu}(o)?r=o:i=o}),i||r||t||null}(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Pv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function dg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(mi,13),d.Y36(pi,10),d.Y36(fc,10),d.Y36(xo,10),d.Y36(Ff,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([Gv]),d.qOj,d.TTD]}),n})(),nR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[qx]}),n})(),gL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[nR]}),n})(),rR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ff,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[nR]}),n})();class iR extends cg{constructor(e,t,r){super(og(t),ag(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){kx(this,0,e),e.forEach((r,i)=>{YC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function sR(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let EI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return sR(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new kf(i,o)}record(t,r=null){const i=this._reduceControls(t);return new QC(i,r)}control(t,r,i){let o={};return this.useNonNullable?(sR(r)?o=r:(o.validators=r,o.asyncValidators=i),new Iu(t,{...o,nonNullable:!0})):new Iu(t,r,i)}array(t,r,i){const o=t.map(c=>this._createControl(c));return new iR(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Iu||t instanceof cg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:rR}),n})();const lR=ui({passive:!0});let Qv=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Pe.E;const r=hi(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new rn.x,c="cdk-text-field-autofilled",h=m=>{"cdk-text-field-autofill-start"!==m.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===m.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>o.next({target:m.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>o.next({target:m.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,lR),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",h,lR)}}),o}stopMonitoring(t){const r=hi(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gr),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const uR=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),dR=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let hR=0;const wg=dy(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new rn.x}});let fR=(()=>{class n extends wg{constructor(t,r,i,o,c,h,m,y,C,T){super(h,o,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=T,this._uid="mat-input-"+hR++,this.focused=!1,this.stateChanges=new rn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>ci().has(B)),this._iOSKeyupListener=B=>{const Q=B.target;!Q.value&&0===Q.selectionStart&&0===Q.selectionEnd&&(Q.setSelectionRange(1,1),Q.setSelectionRange(0,0))};const x=this._elementRef.nativeElement,P=x.nodeName.toLowerCase();this._inputValueAccessor=m||x,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=yr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Mf.required)??!1}set required(t){this._required=yr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&ci().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=yr(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){dR.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(gr),d.Y36(ba,10),d.Y36(_g,8),d.Y36(Lf,8),d.Y36(Jw),d.Y36(uR,10),d.Y36(Qv),d.Y36(d.R0b),d.Y36(NC,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(d.Ikx("disabled",r.disabled)("required",r.required),d.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),d.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:hv,useExisting:n}]),d.qOj,d.TTD]}),n})(),yL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Jw],imports:[CI,_v,Ni,CI,_v]}),n})(),II=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CL=["input"],Ro=function(n){return{enterDuration:n}},mR=["*"],Jv=new d.OlP("mat-radio-default-options",{providedIn:"root",factory:function gR(){return{color:"accent"}}});let Is=0;const _R={provide:xo,useExisting:(0,d.Gpc)(()=>Cg),multi:!0};class Eg{constructor(e,t){this.source=e,this.value=t}}const DI=new d.OlP("MatRadioGroup");let yR=(()=>{class n{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+Is++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new d.vpe}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=yr(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=yr(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(r=>{r.checked=this.value===r.value,r.checked&&(this._selected=r)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Eg(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),n})(),Cg=(()=>{class n extends yR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["mat-radio-group"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Xv,5),2&t){let o;d.iGM(o=d.CRH())&&(r._radios=o)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[d._Bn([_R,{provide:DI,useExisting:n}]),d.qOj]}),n})();class TI{constructor(e){this._elementRef=e}}const SI=uy(Yw(TI));let vR=(()=>{class n extends SI{constructor(t,r,i,o,c,h,m,y){super(r),this._changeDetector=i,this._focusMonitor=o,this._radioDispatcher=c,this._providerOverride=m,this._uniqueId="mat-radio-"+ ++Is,this.id=this._uniqueId,this.change=new d.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===h,y&&(this.tabIndex=Ur(y,0)),this._removeUniqueSelectionListener=c.listen((C,T)=>{C!==this.id&&T===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(t){const r=yr(t);this._checked!==r&&(this._checked=r,r&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!r&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),r&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled(yr(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=yr(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Eg(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const r=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),r&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_updateTabIndex(){const t=this.radioGroup;let r;if(r=t&&t.selected&&!this.disabled?t.selected===this?this.tabIndex:-1:this.tabIndex,r!==this._previousTabIndex){const i=this._inputElement?.nativeElement;i&&(i.setAttribute("tabindex",r+""),this._previousTabIndex=r)}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275dir=d.lG2({type:n,viewQuery:function(t,r){if(1&t&&d.Gf(CL,5),2&t){let i;d.iGM(i=d.CRH())&&(r._inputElement=i.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[d.qOj]}),n})(),Xv=(()=>{class n extends vR{constructor(t,r,i,o,c,h,m,y){super(t,r,i,o,c,h,m,y)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(DI,8),d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Xl),d.Y36(II),d.Y36(d.QbO,8),d.Y36(Jv,8),d.$8M("tabindex"))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._inputElement.nativeElement.focus()}),2&t&&(d.uIk("tabindex",null)("id",r.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),d.ekj("mat-radio-checked",r.checked)("mat-radio-disabled",r.disabled)("_mat-animation-noopable",r._noopAnimations)("mat-primary","primary"===r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[d.qOj],ngContentSelectors:mR,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,r){if(1&t&&(d.F$t(),d.TgZ(0,"label",0,1)(2,"span",2),d._UZ(3,"span",3)(4,"span",4),d.TgZ(5,"input",5,6),d.NdJ("change",function(o){return r._onInputInteraction(o)})("click",function(o){return r._onInputClick(o)}),d.qZA(),d.TgZ(7,"span",7),d._UZ(8,"span",8),d.qZA()(),d.TgZ(9,"span",9)(10,"span",10),d._uU(11,"\xa0"),d.qZA(),d.Hsn(12),d.qZA()()),2&t){const i=d.MAs(1);d.uIk("for",r.inputId),d.xp6(5),d.Q6J("id",r.inputId)("checked",r.checked)("disabled",r.disabled)("required",r.required),d.uIk("name",r.name)("value",r.value)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),d.xp6(2),d.Q6J("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",d.VKq(17,Ro,r._noopAnimations?0:150)),d.xp6(2),d.ekj("mat-radio-label-before","before"==r.labelPosition)}},dependencies:[Ad],styles:['.mat-radio-button{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.mat-radio-input:focus~.mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}'],encapsulation:2,changeDetection:0}),n})(),AI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[my,Ni,Ni]}),n})();const bR=["mat-button",""],MI=["*"],_c=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],xI=cy(ly(uy(class{constructor(n){this._elementRef=n}})));let tb=(()=>{class n extends xI{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of _c)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Xl),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&d.Gf(Ad,5),2&t){let i;d.iGM(i=d.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:bR,ngContentSelectors:MI,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1)(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),d.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Ad],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),wR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[my,Ni,Ni]}),n})();function Kd(n,e){return(0,ma.m)(e)?(0,Pi.z)(n,e,1):(0,Pi.z)(n,1)}class RI{}class ER{}class ol{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ol?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ol;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ol?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===o.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class kI{encodeKey(e){return nb(e)}encodeValue(e){return nb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const NI=/%(\d[a-f0-9])/gi,CR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nb(n){return encodeURIComponent(n).replace(NI,(e,t)=>CR[t]??e)}function rb(n){return`${n}`}class Ea{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new kI,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function TL(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,h]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],m=t.get(c)||[];m.push(h),t.set(c,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(rb):[rb(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ea({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(rb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(rb(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class PI{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ib(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sb(n){return typeof Blob<"u"&&n instanceof Blob}function Uf(n){return typeof FormData<"u"&&n instanceof FormData}class Zd{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function OI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new ol),this.context||(this.context=new PI),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Ea,this.urlWithParams=t}serializeBody(){return null===this.body?null:ib(this.body)||sb(this.body)||Uf(this.body)||function Ig(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ea?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Uf(this.body)?null:sb(this.body)?this.body.type||null:ib(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ea?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,y=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((T,x)=>T.set(x,e.setHeaders[x]),m)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,x)=>T.set(x,e.setParams[x]),y)),new Zd(t,r,o,{params:y,headers:m,context:C,reportProgress:h,responseType:i,withCredentials:c})}}var Ir=(()=>((Ir=Ir||{})[Ir.Sent=0]="Sent",Ir[Ir.UploadProgress=1]="UploadProgress",Ir[Ir.ResponseHeader=2]="ResponseHeader",Ir[Ir.DownloadProgress=3]="DownloadProgress",Ir[Ir.Response=4]="Response",Ir[Ir.User=5]="User",Ir))();class Dg{constructor(e,t=200,r="OK"){this.headers=e.headers||new ol,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Tg extends Dg{constructor(e={}){super(e),this.type=Ir.ResponseHeader}clone(e={}){return new Tg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Sg extends Dg{constructor(e={}){super(e),this.type=Ir.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Sg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class FI extends Dg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function LI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let DR=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Zd)o=t;else{let m,y;m=i.headers instanceof ol?i.headers:new ol(i.headers),i.params&&(y=i.params instanceof Ea?i.params:new Ea({fromObject:i.params})),o=new Zd(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=it(o).pipe(Kd(m=>this.handler.handle(m)));if(t instanceof Zd||"events"===i.observe)return c;const h=c.pipe(Yi(m=>m instanceof Sg));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,Ye.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,Ye.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,Ye.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,Ye.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ea).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,LI(i,r))}post(t,r,i={}){return this.request("POST",t,LI(i,r))}put(t,r,i={}){return this.request("PUT",t,LI(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(RI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ob{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const VI=new d.OlP("HTTP_INTERCEPTORS");let TR=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const SR=/^\)\]\}',?\n/;let vc=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new sn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((P,B)=>i.setRequestHeader(P,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const P=t.detectContentTypeHeader();null!==P&&i.setRequestHeader("Content-Type",P)}if(t.responseType){const P=t.responseType.toLowerCase();i.responseType="json"!==P?P:"text"}const o=t.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const P=i.statusText||"OK",B=new ol(i.getAllResponseHeaders()),Q=function BI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Tg({headers:B,status:i.status,statusText:P,url:Q}),c},m=()=>{let{headers:P,status:B,statusText:Q,url:he}=h(),ke=null;204!==B&&(ke=typeof i.response>"u"?i.responseText:i.response),0===B&&(B=ke?200:0);let ze=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof ke){const nt=ke;ke=ke.replace(SR,"");try{ke=""!==ke?JSON.parse(ke):null}catch(et){ke=nt,ze&&(ze=!1,ke={error:et,text:ke})}}ze?(r.next(new Sg({body:ke,headers:P,status:B,statusText:Q,url:he||void 0})),r.complete()):r.error(new FI({error:ke,headers:P,status:B,statusText:Q,url:he||void 0}))},y=P=>{const{url:B}=h(),Q=new FI({error:P,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(Q)};let C=!1;const T=P=>{C||(r.next(h()),C=!0);let B={type:Ir.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(B.total=P.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},x=P=>{let B={type:Ir.UploadProgress,loaded:P.loaded};P.lengthComputable&&(B.total=P.total),r.next(B)};return i.addEventListener("load",m),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",T),null!==o&&i.upload&&i.upload.addEventListener("progress",x)),i.send(o),r.next({type:Ir.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",m),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",T),null!==o&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ao))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ag=new d.OlP("XSRF_COOKIE_NAME"),jf=new d.OlP("XSRF_HEADER_NAME");class Mg{}let AR=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ka(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(d.Lbi),d.LFG(Ag))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Hf=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mg),d.LFG(jf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),lb=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(VI,[]);this.chain=r.reduceRight((i,o)=>new ob(i,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ER),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),xL=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Hf,useClass:TR}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Ag,useValue:t.cookieName}:[],t.headerName?{provide:jf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Hf,{provide:VI,useExisting:Hf,multi:!0},{provide:Mg,useClass:AR},{provide:Ag,useValue:"XSRF-TOKEN"},{provide:jf,useValue:"X-XSRF-TOKEN"}]}),n})(),RL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[DR,{provide:RI,useClass:lb},vc,{provide:ER,useExisting:vc}],imports:[xL.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var Oi=L(2011),UI=L(3099);function xR(n,e,t,r,i){return(o,c)=>{let h=t,m=e,y=0;o.subscribe((0,kn.x)(c,C=>{const T=y++;m=h?n(m,C,T):(h=!0,C),r&&c.next(m)},i&&(()=>{h&&c.next(m),c.complete()})))}}function Du(n,e){return(0,Un.e)(xR(n,e,arguments.length>=2,!0))}var Nn=L(5813),$I=(L(2476),L(3942)),Ca=L(4859),be=L(5861),Ia=L(9681),O=L(2090),Ds=L(1877);const GI="@firebase/database";let WI="";function RR(n){WI=n}class kR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class NR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const qI=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kR(e)}}catch{}return new NR},Yd=qI("localStorage"),KI=qI("sessionStorage"),$f=new Ds.Yd("@firebase/database"),PR=function(){let n=1;return function(){return n++}}(),OR=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},Gf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Gf.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let Qd=null,FR=!0;const LR=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($f.logLevel=Ds.in.VERBOSE,Qd=$f.log.bind($f),e&&KI.set("logging_enabled",!0)):"function"==typeof n?Qd=n:(Qd=null,KI.remove("logging_enabled"))},ti=function(...n){if(!0===FR&&(FR=!1,null===Qd&&!0===KI.get("logging_enabled")&&LR(!0)),Qd){const e=Gf.apply(null,n);Qd(e)}},xg=function(n){return function(...e){ti(n,...e)}},ZI=function(...n){const e="FIREBASE INTERNAL ERROR: "+Gf(...n);$f.error(e)},s=function(...n){const e=`FIREBASE FATAL ERROR: ${Gf(...n)}`;throw $f.error(e),new Error(e)},a=function(...n){const e="FIREBASE WARNING: "+Gf(...n);$f.warn(e)},u=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},g="[MIN_NAME]",b="[MAX_NAME]",E=function(n,e){if(n===e)return 0;if(n===g||e===b)return-1;if(e===g||n===b)return 1;{const t=wt(n),r=wt(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},I=function(n,e){return n===e?0:n<e?-1:1},A=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},k=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=k(n[e[r]]);return t+="}",t},V=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function H(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const re=function(n){(0,O.hu)(!u(n),"Invalid JSON number");const r=1023;let i,o,c,h,m;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const C=y.join("");let T="";for(m=0;m<64;m+=8){let x=parseInt(C.substr(m,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},rt=new RegExp("^-?(0*)\\d{1,10}$"),vt=-2147483648,Me=2147483647,wt=function(n){if(rt.test(n)){const e=Number(n);if(e>=vt&&e<=Me)return e}return null},Kt=function(n){try{n()}catch(e){setTimeout(()=>{throw a("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ko=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class ub{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){a(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class db{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ti("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',a(e)}}let Tu=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Og=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,OL="websocket",FL="long_polling";class BR{constructor(e,t,r,i,o=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function LL(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===OL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==FL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Pz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return H(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class Oz{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const UR={},jR={};function HR(n){const e=n.toString();return UR[e]||(UR[e]=new Oz),UR[e]}class Lz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Kt(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Xd{constructor(e,t,r,i,o,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xg(e),this.stats_=HR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),LL(t,FL,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $R((...o)=>{const[c,h,m,y,C]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Og.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xd.forceAllow_=!0}static forceDisallow(){Xd.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Xd.forceAllow_&&(Xd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=V(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class $R{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=PR(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=$R.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){ti("frame writing exception"),h.stack&&ti(h.stack),ti(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ti("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ti("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let YI=null;typeof MozWebSocket<"u"?YI=MozWebSocket:typeof WebSocket<"u"&&(YI=WebSocket);let Fg=(()=>{class n{constructor(t,r,i,o,c,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xg(this.connId),this.stats_=HR(r),this.connURL=n.connectionURL_(r,h,m,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){const h={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&Og.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),LL(t,OL,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yd.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${WI}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new YI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==YI&&!n.forceDisallow_}static previouslyFailed(){return Yd.isInMemoryStorage||!0===Yd.get("previous_websocket_failure")}markConnectionHealthy(){Yd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=V(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),GL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Xd,Fg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Fg&&Fg.isAvailable();let i=r&&!Fg.previouslyFailed();if(t.webSocketOnly&&(r||a("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fg];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class QL{constructor(e,t,r,i,o,c,h,m,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xg("c:"+this.id+":"),this.transportManager_=new GL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ko(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=A("t",e),r=A("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=A("t",e),r=A("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=A("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ZI("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&a("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ko(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ko(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class JL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class XL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class QI extends XL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new QI}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function mn(){return new wn("")}function zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function eh(n){return n.pieces_.length-n.pieceNum_}function Pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wn(n.pieces_,e)}function zR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function hb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function nV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wn(e,0)}function or(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new wn(t,0)}function Wt(n){return n.pieceNum_>=n.pieces_.length}function Ts(n,e){const t=zt(n),r=zt(e);if(null===t)return e;if(t===r)return Ts(Pn(n),Pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function o3(n,e){const t=hb(n,0),r=hb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=E(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function WR(n,e){if(eh(n)!==eh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Da(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(eh(n)>eh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class a3{constructor(e,t){this.errorPrefix_=t,this.parts_=hb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);rV(this)}}function rV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zf(n))}function zf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class qR extends XL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new qR}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const fb=1e3;let XI,Wf=(()=>{class n extends JL{constructor(t,r,i,o,c,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=xg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&QI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_((0,O.Pz)(c)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const y=m.d,C=m.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,o),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();a(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const c={p:t};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ZI("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=fb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=fb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const C=function(){y?y.close():(m=!0,o())};t.realtime_={close:C,sendRequest:function(P){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,B]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);m?ti("getToken() completed but was canceled"):(ti("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=B&&B.token,y=new QL(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Q=>{a(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),m||(t.repoInfo_.nodeAdmin&&a(P),C())}}})()}interrupt(t){ti("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ti("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=fb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>k(c)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new wn(t).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ti("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ti("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+WI.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=QI.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class JI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(g,e),i=new Zt(g,t);return 0!==this.compare(r,i)}minPost(){return Zt.MIN}}class oV extends JI{static get __EMPTY_NODE(){return XI}static set __EMPTY_NODE(e){XI=e}compare(e,t){return E(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(b,XI)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,XI)}toString(){return".key"}}const bc=new oV;class eD{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ZR,al=(()=>{class n{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Ys.EMPTY_NODE,this.right=c??Ys.EMPTY_NODE}copy(t,r,i,o,c){return new n(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const c=i(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ys.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ys.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ys{constructor(e,t=Ys.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ys(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,al.BLACK,null,null))}remove(e){return new Ys(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,al.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eD(this.root_,null,this.comparator_,!0,e)}}function m3(n,e){return E(n.name,e.name)}function KR(n,e){return E(n,e)}Ys.EMPTY_NODE=new class p3{copy(e,t,r,i,o){return this}insert(e,t,r){return new al(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const aV=function(n){return"number"==typeof n?"number:"+re(n):"string:"+n},lV=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===ZR||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===ZR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let cV,uV,dV,Lg=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),lV(this.priorityNode_)}static set __childrenNodeConstructor(t){cV=t}static get __childrenNodeConstructor(){return cV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Wt(t)?this:".priority"===zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===eh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+aV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?re(this.value_):this.value_,this.lazyHash_=OR(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(o>=0,"Unknown leaf type: "+r),(0,O.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Hn=new class v3 extends JI{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?E(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(b,new Lg("[PRIORITY-POST]",dV))}makePost(e,t){const r=uV(e);return new Zt(t,new Lg("[PRIORITY-POST]",r))}toString(){return".priority"}},b3=Math.log(2);class w3{constructor(e){this.count=parseInt(Math.log(e+1)/b3,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tD=function(n,e,t,r){n.sort(e);const i=function(m,y){const C=y-m;let T,x;if(0===C)return null;if(1===C)return T=n[m],x=t?t(T):T,new al(x,T.node,al.BLACK,null,null);{const P=parseInt(C/2,10)+m,B=i(m,P),Q=i(P+1,y);return T=n[P],x=t?t(T):T,new al(x,T.node,al.BLACK,B,Q)}},h=function(m){let y=null,C=null,T=n.length;const x=function(B,Q){const he=T-B,ke=T;T-=B;const ze=i(he+1,ke),nt=n[he],et=t?t(nt):nt;P(new al(et,nt.node,Q,null,ze))},P=function(B){y?(y.left=B,y=B):(C=B,y=B)};for(let B=0;B<m.count;++B){const Q=m.nextBitIsOne(),he=Math.pow(2,m.count-(B+1));Q?x(he,al.BLACK):(x(he,al.BLACK),x(he,al.RED))}return C}(new w3(n.length));return new Ys(r||e,h)};let YR;const Vg={};class Su{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Vg&&Hn,"ChildrenNode.ts has not been loaded"),YR=YR||new Su({".priority":Vg},{".priority":Hn}),YR}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ys?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==bc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Zt.Wrap);let h,c=o.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?tD(r,e.getCompare()):Vg;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Su(C,y)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,o)=>{const c=(0,O.DV)(this.indexSet_,o);if((0,O.hu)(c,"Missing index implementation for "+o),i===Vg){if(c.isDefinedOn(e.node)){const h=[],m=t.getIterator(Zt.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),tD(h,c.getCompare())}return Vg}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Zt(e.name,h))),m.insert(e,e.node)}});return new Su(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Vg)return i;{const o=t.get(e.name);return o?i.remove(new Zt(e.name,o)):i}});return new Su(r,this.indexSet_)}}let pb,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&lV(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pb||(pb=new n(new Ys(KR),null,Su.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?pb:r}}getChild(t){const r=zt(t);return null===r?this:this.getImmediateChild(r).getChild(Pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Zt(t,r);let o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?pb:this.priorityNode_;return new n(o,h,c)}}updateChild(t,r){const i=zt(t);if(null===i)return r;{(0,O.hu)(".priority"!==zt(t)||1===eh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Pn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(Hn,(h,m)=>{r[h]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+aV(this.getPriority().val())+":"),this.forEachChild(Hn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":OR(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new Zt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Zt.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===mb?-1:0}withIndex(t){if(t===bc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===bc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Hn),o=r.getIterator(Hn);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===bc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const mb=new class E3 extends Vt{constructor(){super(new Ys(KR),Vt.EMPTY_NODE,Su.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function vr(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Lg(n,vr(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return H(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const o=vr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(vr(e))}{const t=[];let r=!1;if(H(n,(c,h)=>{if("."!==c.substring(0,1)){const m=vr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Zt(c,m)))}}),0===t.length)return Vt.EMPTY_NODE;const o=tD(t,m3,c=>c.name,KR);if(r){const c=tD(t,Hn.getCompare());return new Vt(o,vr(e),new Su({".priority":c},{".priority":Hn}))}return new Vt(o,vr(e),Su.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(g,Vt.EMPTY_NODE)},MAX:{value:new Zt(b,mb)}}),oV.__EMPTY_NODE=Vt.EMPTY_NODE,Lg.__childrenNodeConstructor=Vt,function g3(n){ZR=n}(mb),function y3(n){dV=n}(mb),function _3(n){uV=n}(vr);class QR extends JI{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Wt(e)&&".priority"!==zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?E(e.name,t.name):o}makePost(e,t){const r=vr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,mb);return new Zt(b,e)}toString(){return hb(this.indexPath_,0).join("/")}}const JR=new class I3 extends JI{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?E(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=vr(e);return new Zt(t,r)}toString(){return".value"}},Bg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Bg.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Bg.charAt(e[i]);return(0,O.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),pV=function(n){if(n===""+Me)return"-";const e=wt(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return b;const o=Bg.charAt(Bg.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},mV=function(n){if(n===""+vt)return g;const e=wt(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Me:(delete t[t.length-1],t.join("")):(t[t.length-1]=Bg.charAt(Bg.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function gV(n){return{type:"value",snapshotNode:n}}function Ug(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function gb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function _b(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ek{constructor(e){this.index_=e}updateChild(e,t,r,i,o,c){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(gb(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Ug(t,r)):c.trackChildChange(_b(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Hn,(i,o)=>{t.hasChild(i)||r.trackChildChange(gb(i,o))}),t.isLeafNode()||t.forEachChild(Hn,(i,o)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(o)||r.trackChildChange(_b(i,o,c))}else r.trackChildChange(Ug(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class yb{constructor(e){this.indexedFilter_=new ek(e.getIndex()),this.index_=e.getIndex(),this.startPost_=yb.getStartPost_(e),this.endPost_=yb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,c){return this.matches(new Zt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const o=this;return t.forEachChild(Hn,(c,h)=>{o.matches(new Zt(c,h))||(i=i.updateImmediateChild(c,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class S3{constructor(e){this.rangedFilter_=new yb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,c){return this.rangedFilter_.matches(new Zt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,c):this.fullLimitUpdateChild_(e,t,r,o,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Vt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let o,c,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();h=(x,P)=>T(P,x)}else m=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;m.hasNext();){const T=m.getNext();!C&&h(o,T)<=0&&(C=!0),C&&y<this.limit_&&h(T,c)<=0?y++:i=i.updateImmediateChild(T.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let c;if(this.reverse_){const T=this.index_.getCompare();c=(x,P)=>T(P,x)}else c=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const m=new Zt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const T=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const P=null==x?1:c(x,m);if(C&&!r.isEmpty()&&P>=0)return o?.trackChildChange(_b(t,r,T)),h.updateImmediateChild(t,r);{o?.trackChildChange(gb(t,T));const Q=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(o?.trackChildChange(Ug(x.name,x.node)),Q.updateImmediateChild(x.name,x.node)):Q}}return r.isEmpty()?e:C&&c(y,m)>=0?(null!=o&&(o.trackChildChange(gb(y.name,y.node)),o.trackChildChange(Ug(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Vt.EMPTY_NODE)):e}}class nD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:g}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:b}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hn}copy(){const e=new nD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function nk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function rD(n,e){const t=n.copy();return t.index_=e,t}function _V(n){const e={};if(n.isDefault())return e;let t;return n.index_===Hn?t="$priority":n.index_===JR?t="$value":n.index_===bc?t="$key":((0,O.hu)(n.index_ instanceof QR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function yV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Hn&&(e.i=n.index_.toString()),e}class iD extends JL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=iD.getListenId_(e,r),h={};this.listens_[c]=h;const m=_V(e._queryParams);this.restRequest_(o+".json",m,(y,C)=>{let T=C;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(o,T,!1,r),(0,O.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=iD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=_V(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,O.cI)(h.responseText)}catch{a("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&a("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class N3{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sD(){return{value:null,children:new Map}}function jg(n,e,t){if(Wt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=zt(e);n.children.has(r)||n.children.set(r,sD()),jg(n.children.get(r),e=Pn(e),t)}}function rk(n,e){if(Wt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Hn,(r,i)=>{jg(n,new wn(r),i)}),rk(n,e)}}if(n.children.size>0){const t=zt(e);return e=Pn(e),n.children.has(t)&&rk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function ik(n,e,t){null!==n.value?t(e,n.value):function P3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{ik(i,new wn(e.toString()+"/"+r),t)})}class O3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&H(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class V3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new O3(e);const r=1e4+2e4*Math.random();ko(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;H(e,(i,o)=>{o>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),ko(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ta=(()=>{return(n=Ta||(Ta={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ta;var n})();function ak(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ta.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Wt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wn(e));return new oD(mn(),t,this.revert)}}return(0,O.hu)(zt(this.path)===e,"operationForChild called for unrelated child."),new oD(Pn(this.path),this.affectedTree,this.revert)}}class vb{constructor(e,t){this.source=e,this.path=t,this.type=Ta.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new vb(this.source,mn()):new vb(this.source,Pn(this.path))}}class qf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ta.OVERWRITE}operationForChild(e){return Wt(this.path)?new qf(this.source,mn(),this.snap.getImmediateChild(e)):new qf(this.source,Pn(this.path),this.snap)}}class Hg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ta.MERGE}operationForChild(e){if(Wt(this.path)){const t=this.children.subtree(new wn(e));return t.isEmpty()?null:t.value?new qf(this.source,mn(),t.value):new Hg(this.source,mn(),t)}return(0,O.hu)(zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hg(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class th{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class B3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bb(n,e,t,r,i,o){const c=r.filter(h=>h.type===t);c.sort((h,m)=>function H3(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),i=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),c.forEach(h=>{const m=function j3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function aD(n,e){return{eventCache:n,serverCache:e}}function wb(n,e,t,r){return aD(new th(e,t,r),n.serverCache)}function bV(n,e,t,r){return aD(n.eventCache,new th(e,t,r))}function lD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Kf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let lk;class $n{constructor(e,t=(()=>(lk||(lk=new Ys(I)),lk))()){this.value=e,this.children=t}static fromObject(e){let t=new $n(null);return H(e,(r,i)=>{t=t.set(new wn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:mn(),value:this.value};if(Wt(e))return null;{const r=zt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Pn(e),t);return null!=o?{path:or(new wn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const t=zt(e),r=this.children.get(t);return null!==r?r.subtree(Pn(e)):new $n(null)}}set(e,t){if(Wt(e))return new $n(t,this.children);{const r=zt(e),o=(this.children.get(r)||new $n(null)).set(Pn(e),t),c=this.children.insert(r,o);return new $n(this.value,c)}}remove(e){if(Wt(e))return this.children.isEmpty()?new $n(null):new $n(null,this.children);{const t=zt(e),r=this.children.get(t);if(r){const i=r.remove(Pn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new $n(null):new $n(this.value,o)}return this}}get(e){if(Wt(e))return this.value;{const t=zt(e),r=this.children.get(t);return r?r.get(Pn(e)):null}}setTree(e,t){if(Wt(e))return t;{const r=zt(e),o=(this.children.get(r)||new $n(null)).setTree(Pn(e),t);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new $n(this.value,c)}}fold(e){return this.fold_(mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(or(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Wt(e))return null;{const o=zt(e),c=this.children.get(o);return c?c.findOnPath_(Pn(e),or(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,mn(),t)}foreachOnPath_(e,t,r){if(Wt(e))return this;{this.value&&r(t,this.value);const i=zt(e),o=this.children.get(i);return o?o.foreachOnPath_(Pn(e),or(t,i),r):new $n(null)}}foreach(e){this.foreach_(mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(or(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ll{constructor(e){this.writeTree_=e}static empty(){return new ll(new $n(null))}}function Eb(n,e,t){if(Wt(e))return new ll(new $n(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const c=Ts(i,e);return o=o.updateChild(c,t),new ll(n.writeTree_.set(i,o))}{const i=new $n(t),o=n.writeTree_.setTree(e,i);return new ll(o)}}}function ck(n,e,t){let r=n;return H(t,(i,o)=>{r=Eb(r,or(e,i),o)}),r}function wV(n,e){if(Wt(e))return ll.empty();{const t=n.writeTree_.setTree(e,new $n(null));return new ll(t)}}function uk(n,e){return null!=Zf(n,e)}function Zf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ts(t.path,e)):null}function EV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Hn,(r,i)=>{e.push(new Zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Zt(r,i.value))}),e}function nh(n,e){if(Wt(e))return n;{const t=Zf(n,e);return new ll(null!=t?new $n(t):n.writeTree_.subtree(e))}}function dk(n){return n.writeTree_.isEmpty()}function $g(n,e){return CV(mn(),n.writeTree_,e)}function CV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,O.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=CV(or(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(or(n,".priority"),r)),t}}function cD(n,e){return AV(e,n)}function K3(n,e){if(n.snap)return Da(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Da(or(n.path,t),e))return!0;return!1}function Y3(n){return n.visible}function IV(n,e,t){let r=ll.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const c=o.path;let h;if(o.snap)Da(t,c)?(h=Ts(t,c),r=Eb(r,h,o.snap)):Da(c,t)&&(h=Ts(c,t),r=Eb(r,mn(),o.snap.getChild(h)));else{if(!o.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Da(t,c))h=Ts(t,c),r=ck(r,h,o.children);else if(Da(c,t))if(h=Ts(c,t),Wt(h))r=ck(r,mn(),o.children);else{const m=(0,O.DV)(o.children,zt(h));if(m){const y=m.getChild(Pn(h));r=Eb(r,mn(),y)}}}}}return r}function DV(n,e,t,r,i){if(r||i){const o=nh(n.visibleWrites,e);return!i&&dk(o)?t:i||null!=t||uk(o,mn())?$g(IV(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Da(y.path,e)||Da(e,y.path))},e),t||Vt.EMPTY_NODE):null}{const o=Zf(n.visibleWrites,e);if(null!=o)return o;{const c=nh(n.visibleWrites,e);return dk(c)?t:null!=t||uk(c,mn())?$g(c,t||Vt.EMPTY_NODE):null}}}function uD(n,e,t,r){return DV(n.writeTree,n.treePath,e,t,r)}function hk(n,e){return function Q3(n,e,t){let r=Vt.EMPTY_NODE;const i=Zf(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Hn,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=nh(n.visibleWrites,e);return t.forEachChild(Hn,(c,h)=>{const m=$g(nh(o,new wn(c)),h);r=r.updateImmediateChild(c,m)}),EV(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return EV(nh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function TV(n,e,t,r){return function J3(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=or(e,t);if(uk(n.visibleWrites,o))return null;{const c=nh(n.visibleWrites,o);return dk(c)?i.getChild(t):$g(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function dD(n,e){return function eW(n,e){return Zf(n.visibleWrites,e)}(n.writeTree,or(n.treePath,e))}function fk(n,e,t){return function X3(n,e,t,r){const i=or(e,t),o=Zf(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?$g(nh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function SV(n,e){return AV(or(n.treePath,e),n.writeTree)}function AV(n,e){return{treePath:n,writeTree:e}}class iW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,_b(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,gb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Ug(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,_b(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const MV=new class sW{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class pk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new th(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kf(this.viewCache_),o=function rW(n,e,t,r,i,o){return function tW(n,e,t,r,i,o,c){let h;const m=nh(n.visibleWrites,e),y=Zf(m,mn());if(null!=y)h=y;else{if(null==t)return[];h=$g(m,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],T=c.getCompare(),x=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let P=x.getNext();for(;P&&C.length<i;)0!==T(P,r)&&C.push(P),P=x.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function xV(n,e,t,r,i,o){const c=e.eventCache;if(null!=dD(r,t))return e;{let h,m;if(Wt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Kf(e),T=hk(r,y instanceof Vt?y:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const y=uD(r,Kf(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=zt(t);if(".priority"===y){(0,O.hu)(1===eh(t),"Can't have a priority with additional path components");const C=c.getNode();m=e.serverCache.getNode();const T=TV(r,t,C,m);h=null!=T?n.filter.updatePriority(C,T):c.getNode()}else{const C=Pn(t);let T;if(c.isCompleteForChild(y)){m=e.serverCache.getNode();const x=TV(r,t,c.getNode(),m);T=null!=x?c.getNode().getImmediateChild(y).updateChild(C,x):c.getNode().getImmediateChild(y)}else T=fk(r,y,e.serverCache);h=null!=T?n.filter.updateChild(c.getNode(),y,T,C,i,o):c.getNode()}}return wb(e,h,c.isFullyInitialized()||Wt(t),n.filter.filtersNodes())}}function hD(n,e,t,r,i,o,c,h){const m=e.serverCache;let y;const C=c?n.filter:n.filter.getIndexedFilter();if(Wt(t))y=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const P=m.getNode().updateChild(t,r);y=C.updateFullNode(m.getNode(),P,null)}else{const P=zt(t);if(!m.isCompleteForPath(t)&&eh(t)>1)return e;const B=Pn(t),he=m.getNode().getImmediateChild(P).updateChild(B,r);y=".priority"===P?C.updatePriority(m.getNode(),he):C.updateChild(m.getNode(),P,he,B,MV,null)}const T=bV(e,y,m.isFullyInitialized()||Wt(t),C.filtersNodes());return xV(n,T,t,i,new pk(i,T,o),h)}function mk(n,e,t,r,i,o,c){const h=e.eventCache;let m,y;const C=new pk(i,e,o);if(Wt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=wb(e,y,!0,n.filter.filtersNodes());else{const T=zt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),m=wb(e,y,h.isFullyInitialized(),h.isFiltered());else{const x=Pn(t),P=h.getNode().getImmediateChild(T);let B;if(Wt(x))B=r;else{const Q=C.getCompleteChild(T);B=null!=Q?".priority"===zR(x)&&Q.getChild(nV(x)).isEmpty()?Q:Q.updateChild(x,r):Vt.EMPTY_NODE}m=P.equals(B)?e:wb(e,n.filter.updateChild(h.getNode(),T,B,x,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function RV(n,e){return n.eventCache.isCompleteForChild(e)}function kV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gk(n,e,t,r,i,o,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=Wt(t)?r:new $n(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((T,x)=>{if(C.hasChild(T)){const B=kV(0,e.serverCache.getNode().getImmediateChild(T),x);m=hD(n,m,new wn(T),B,i,o,c,h)}}),y.children.inorderTraversal((T,x)=>{const P=!e.serverCache.isCompleteForChild(T)&&null===x.value;if(!C.hasChild(T)&&!P){const Q=kV(0,e.serverCache.getNode().getImmediateChild(T),x);m=hD(n,m,new wn(T),Q,i,o,c,h)}}),m}class pW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ek(r.getIndex()),o=function A3(n){return n.loadsAllData()?new ek(n.getIndex()):n.hasLimit()?new S3(n):new yb(n)}(r);this.processor_=function oW(n){return{filter:n}}(o);const c=t.serverCache,h=t.eventCache,m=i.updateFullNode(Vt.EMPTY_NODE,c.getNode(),null),y=o.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),C=new th(m,c.isFullyInitialized(),i.filtersNodes()),T=new th(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=aD(T,C),this.eventGenerator_=new B3(this.query_)}get query(){return this.query_}}function _W(n,e){const t=Kf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Wt(e)&&!t.getImmediateChild(zt(e)).isEmpty())?t.getChild(e):null}function NV(n){return 0===n.eventRegistrations_.length}function PV(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function OV(n,e,t,r){e.type===Ta.MERGE&&null!==e.source.queryId&&((0,O.hu)(Kf(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(lD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function lW(n,e,t,r,i){const o=new iW;let c,h;if(t.type===Ta.OVERWRITE){const y=t;y.source.fromUser?c=mk(n,e,y.path,y.snap,r,i,o):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Wt(y.path),c=hD(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===Ta.MERGE){const y=t;y.source.fromUser?c=function uW(n,e,t,r,i,o,c){let h=e;return r.foreach((m,y)=>{const C=or(t,m);RV(e,zt(C))&&(h=mk(n,h,C,y,i,o,c))}),r.foreach((m,y)=>{const C=or(t,m);RV(e,zt(C))||(h=mk(n,h,C,y,i,o,c))}),h}(n,e,y.path,y.children,r,i,o):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=gk(n,e,y.path,y.children,r,i,h,o))}else if(t.type===Ta.ACK_USER_WRITE){const y=t;c=y.revert?function fW(n,e,t,r,i,o){let c;if(null!=dD(r,t))return e;{const h=new pk(r,e,i),m=e.eventCache.getNode();let y;if(Wt(t)||".priority"===zt(t)){let C;if(e.serverCache.isFullyInitialized())C=uD(r,Kf(e));else{const T=e.serverCache.getNode();(0,O.hu)(T instanceof Vt,"serverChildren would be complete if leaf node"),C=hk(r,T)}y=n.filter.updateFullNode(m,C,o)}else{const C=zt(t);let T=fk(r,C,e.serverCache);null==T&&e.serverCache.isCompleteForChild(C)&&(T=m.getImmediateChild(C)),y=null!=T?n.filter.updateChild(m,C,T,Pn(t),h,o):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Vt.EMPTY_NODE,Pn(t),h,o):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=uD(r,Kf(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=dD(r,mn()),wb(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function dW(n,e,t,r,i,o,c){if(null!=dD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Wt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return hD(n,e,t,m.getNode().getChild(t),i,o,h,c);if(Wt(t)){let y=new $n(null);return m.getNode().forEachChild(bc,(C,T)=>{y=y.set(new wn(C),T)}),gk(n,e,t,y,i,o,h,c)}return e}{let y=new $n(null);return r.foreach((C,T)=>{const x=or(t,C);m.isCompleteForPath(x)&&(y=y.set(C,m.getNode().getChild(x)))}),gk(n,e,t,y,i,o,h,c)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==Ta.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);c=function hW(n,e,t,r,i){const o=e.serverCache;return xV(n,bV(e,o.getNode(),o.isFullyInitialized()||Wt(t),o.isFiltered()),t,r,MV,i)}(n,e,t.path,r,o)}const m=o.getChanges();return function cW(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=lD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(gV(lD(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function aW(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,O.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,FV(n,o.changes,o.viewCache.eventCache.getNode(),null)}function FV(n,e,t,r){return function U3(n,e,t,r){const i=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function T3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),bb(n,i,"child_removed",e,r,t),bb(n,i,"child_added",e,r,t),bb(n,i,"child_moved",o,r,t),bb(n,i,"child_changed",e,r,t),bb(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let fD,mD;class LV{constructor(){this.views=new Map}}function _k(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,O.hu)(null!=o,"SyncTree gave us an op for an invalid query."),OV(o,e,t,r)}{let o=[];for(const c of n.views.values())o=o.concat(OV(c,e,t,r));return o}}function VV(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=uD(t,i?r:null),m=!1;h?m=!0:r instanceof Vt?(h=hk(t,r),m=!1):(h=Vt.EMPTY_NODE,m=!1);const y=aD(new th(h,m,!1),new th(r,i,!1));return new pW(e,y)}return c}function BV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function rh(n,e){let t=null;for(const r of n.views.values())t=t||_W(r,e);return t}function UV(n,e){return e._queryParams.loadsAllData()?pD(n):n.views.get(e._queryIdentifier)}function jV(n,e){return null!=UV(n,e)}function ih(n){return null!=pD(n)}function pD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let SW=1;class HV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $n(null),this.pendingWriteTree_=function nW(){return{visibleWrites:ll.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yk(n,e,t,r,i){return function G3(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Eb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Gg(n,new qf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function sh(n,e,t=!1){const r=function W3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function q3(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&K3(h,r.path)?i=!1:Da(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function Z3(n){n.visibleWrites=IV(n.allWrites,Y3,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=wV(n.visibleWrites,r.path):H(r.children,m=>{n.visibleWrites=wV(n.visibleWrites,or(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let o=new $n(null);return null!=r.snap?o=o.set(mn(),!0):H(r.children,c=>{o=o.set(new wn(c),!0)}),Gg(n,new oD(r.path,o,t))}return[]}function Cb(n,e,t){return Gg(n,new qf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function gD(n,e,t,r,i=!1){const o=e._path,c=n.syncPointTree_.get(o);let h=[];if(c&&("default"===e._queryIdentifier||jV(c,e))){const m=function IW(n,e,t,r){const i=e._queryIdentifier,o=[];let c=[];const h=ih(n);if("default"===i)for(const[m,y]of n.views.entries())c=c.concat(PV(y,t,r)),NV(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||o.push(y.query));else{const m=n.views.get(i);m&&(c=c.concat(PV(m,t,r)),NV(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||o.push(m.query)))}return h&&!ih(n)&&o.push(new(function wW(){return(0,O.hu)(fD,"Reference.ts has not been loaded"),fD}())(e._repo,e._path)),{removed:o,events:c}}(c,e,t,r);(function EW(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=m.removed;if(h=m.events,!i){const C=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(o,(x,P)=>ih(P));if(C&&!T){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const P=function PW(n){return n.fold((e,t,r)=>{if(t&&ih(t))return[pD(t)];{let i=[];return t&&(i=BV(t)),H(r,(o,c)=>{i=i.concat(c)}),i}})}(x);for(let B=0;B<P.length;++B){const Q=P[B],he=Q.query,ke=WV(n,Q);n.listenProvider_.startListening(Db(he),Ib(n,he),ke.hashFn,ke.onComplete)}}}!T&&y.length>0&&!r&&(C?n.listenProvider_.stopListening(Db(e),null):y.forEach(x=>{const P=n.queryToTagMap.get(yD(x));n.listenProvider_.stopListening(Db(x),P)}))}!function OW(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=yD(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function $V(n,e,t,r){const i=bk(n,r);if(null!=i){const o=wk(i),c=o.path,h=o.queryId,m=Ts(c,e);return Ek(n,c,new qf(ak(h),m,t))}return[]}function vk(n,e,t,r=!1){const i=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(i,(x,P)=>{const B=Ts(x,i);o=o||rh(P,B),c=c||ih(P)});let m,h=n.syncPointTree_.get(i);h?(c=c||ih(h),o=o||rh(h,mn())):(h=new LV,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?m=!0:(m=!1,o=Vt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((P,B)=>{const Q=rh(B,mn());Q&&(o=o.updateImmediateChild(P,Q))}));const y=jV(h,e);if(!y&&!e._queryParams.loadsAllData()){const x=yD(e);(0,O.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const P=function FW(){return SW++}();n.queryToTagMap.set(x,P),n.tagToQueryMap.set(P,x)}let T=function CW(n,e,t,r,i,o){const c=VV(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function yW(n,e){n.eventRegistrations_.push(e)}(c,t),function vW(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Hn,(o,c)=>{r.push(Ug(o,c))}),t.isFullyInitialized()&&r.push(gV(t.getNode())),FV(n,r,t.getNode(),e)}(c,t)}(h,e,t,cD(n.pendingWriteTree_,i),o,m);if(!y&&!c&&!r){const x=UV(h,e);T=T.concat(function LW(n,e,t){const r=e._path,i=Ib(n,e),o=WV(n,t),c=n.listenProvider_.startListening(Db(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!ih(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,C,T)=>{if(!Wt(y)&&C&&ih(C))return[pD(C).query];{let x=[];return C&&(x=x.concat(BV(C).map(P=>P.query))),H(T,(P,B)=>{x=x.concat(B)}),x}});for(let y=0;y<m.length;++y){const C=m[y];n.listenProvider_.stopListening(Db(C),Ib(n,C))}}return c}(n,e,x))}return T}function _D(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=rh(h,Ts(c,e));if(y)return y});return DV(i,e,o,t,!0)}function Gg(n,e){return GV(e,n.syncPointTree_,null,cD(n.pendingWriteTree_,mn()))}function GV(n,e,t,r){if(Wt(n.path))return zV(n,e,t,r);{const i=e.get(mn());null==t&&null!=i&&(t=rh(i,mn()));let o=[];const c=zt(n.path),h=n.operationForChild(c),m=e.children.get(c);if(m&&h){const y=t?t.getImmediateChild(c):null,C=SV(r,c);o=o.concat(GV(h,m,y,C))}return i&&(o=o.concat(_k(i,n,r,t))),o}}function zV(n,e,t,r){const i=e.get(mn());null==t&&null!=i&&(t=rh(i,mn()));let o=[];return e.children.inorderTraversal((c,h)=>{const m=t?t.getImmediateChild(c):null,y=SV(r,c),C=n.operationForChild(c);C&&(o=o.concat(zV(C,h,m,y)))}),i&&(o=o.concat(_k(i,n,r,t))),o}function WV(n,e){const t=e.query,r=Ib(n,t);return{hashFn:()=>(function mW(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function RW(n,e,t){const r=bk(n,t);if(r){const i=wk(r),o=i.path,c=i.queryId,h=Ts(o,e);return Ek(n,o,new vb(ak(c),h))}return[]}(n,t._path,r):function xW(n,e){return Gg(n,new vb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function We(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return gD(n,t,null,o)}}}}function Ib(n,e){const t=yD(e);return n.queryToTagMap.get(t)}function yD(n){return n._path.toString()+"$"+n._queryIdentifier}function bk(n,e){return n.tagToQueryMap.get(e)}function wk(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wn(n.substr(0,e))}}function Ek(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),_k(r,t,cD(n.pendingWriteTree_,e),null)}function Db(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function TW(){return(0,O.hu)(mD,"Reference.ts has not been loaded"),mD}())(n._repo,n._path):n}class Ck{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ck(t)}node(){return this.node_}}class Ik{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=or(this.path_,e);return new Ik(this.syncTree_,t)}node(){return _D(this.syncTree_,this.path_)}}const qV=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?BW(n[".sv"],e,t):"object"==typeof n[".sv"]?UW(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},BW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},UW=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},KV=function(n,e,t,r){return Tk(e,new Ik(t,n),r)},Dk=function(n,e,t){return Tk(n,new Ck(e),t)};function Tk(n,e,t){const r=n.getPriority().val(),i=qV(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,h=qV(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Lg(h,vr(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Lg(i))),c.forEachChild(Hn,(h,m)=>{const y=Tk(m,e.getImmediateChild(h),t);y!==m&&(o=o.updateImmediateChild(h,y))}),o}}class Sk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vD(n,e){let t=e instanceof wn?e:new wn(e),r=n,i=zt(t);for(;null!==i;){const o=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new Sk(i,r,o),t=Pn(t),i=zt(t)}return r}function Yf(n){return n.node.value}function Ak(n,e){n.node.value=e,Mk(n)}function ZV(n){return n.node.childCount>0}function bD(n,e){H(n.node.children,(t,r)=>{e(new Sk(t,n,r))})}function YV(n,e,t,r){t&&!r&&e(n),bD(n,i=>{YV(i,e,!0,r)}),t&&r&&e(n)}function Tb(n){return new wn(null===n.parent?n.name:Tb(n.parent)+"/"+n.name)}function Mk(n){null!==n.parent&&function $W(n,e,t){const r=function jW(n){return void 0===Yf(n)&&!ZV(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Mk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Mk(n))}(n.parent,n.name,n)}const GW=/[\[\].#$\/\u0000-\u001F\u007F]/,zW=/[\[\].#$\u0000-\u001F\u007F]/,xk=10485760,wD=function(n){return"string"==typeof n&&0!==n.length&&!GW.test(n)},QV=function(n){return"string"==typeof n&&0!==n.length&&!zW.test(n)},Sb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!u(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},wc=function(n,e,t,r){r&&void 0===e||Ab((0,O.gK)(n,"value"),e,t)},Ab=function(n,e,t){const r=t instanceof wn?new a3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zf(r));if("function"==typeof e)throw new Error(n+"contains a function "+zf(r)+" with contents = "+e.toString());if(u(e))throw new Error(n+"contains "+e.toString()+" "+zf(r));if("string"==typeof e&&e.length>xk/3&&(0,O.ug)(e)>xk)throw new Error(n+"contains a string greater than "+xk+" utf8 bytes "+zf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(H(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!wD(c)))throw new Error(n+" contains an invalid key ("+c+") "+zf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function l3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),rV(n)})(r,c),Ab(n,h,r),function c3(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+zf(r)+" in addition to actual children.")}},JV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];H(e,(c,h)=>{const m=new wn(c);if(Ab(i,h,or(t,m)),".priority"===zR(m)&&!Sb(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=hb(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!wD(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(o3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Da(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Rk=function(n,e,t){if(!t||void 0!==e){if(u(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sb(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mb=function(n,e,t,r){if(!(r&&void 0===t||wD(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xb=function(n,e,t,r){if(!(r&&void 0===t||QV(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Sa=function(n,e){if(".info"===zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},XV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!wD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QV(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ZW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ED(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!WR(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function eB(n,e,t){ED(n,t),tB(n,r=>WR(r,e))}function No(n,e,t){ED(n,t),tB(n,r=>Da(r,e)||Da(e,r))}function tB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(YW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function YW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Qd&&ti("event: "+t.toString()),Kt(r)}}}const nB="repo_interrupt";class JW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sD(),this.transactionQueueTree_=new Sk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rB(n){const t=n.infoData_.getNode(new wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Rb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:rB(n)})}function iB(n,e,t,r,i){n.dataUpdateCount++;const o=new wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,O.UI)(t,y=>vr(y));c=function kW(n,e,t,r){const i=bk(n,r);if(i){const o=wk(i),c=o.path,h=o.queryId,m=Ts(c,e),y=$n.fromObject(t);return Ek(n,c,new Hg(ak(h),m,y))}return[]}(n.serverSyncTree_,o,m,i)}else{const m=vr(t);c=$V(n.serverSyncTree_,o,m,i)}else if(r){const m=(0,O.UI)(t,y=>vr(y));c=function MW(n,e,t){const r=$n.fromObject(t);return Gg(n,new Hg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,m)}else{const m=vr(t);c=Cb(n.serverSyncTree_,o,m)}let h=o;c.length>0&&(h=Wg(n,o)),No(n.eventQueue_,h,c)}function sB(n,e){kk(n,"connected",e),!1===e&&function rq(n){zg(n,"onDisconnectEvents");const e=Rb(n),t=sD();ik(n.onDisconnect_,mn(),(i,o)=>{const c=KV(i,o,n.serverSyncTree_,e);jg(t,i,c)});let r=[];ik(t,mn(),(i,o)=>{r=r.concat(Cb(n.serverSyncTree_,i,o));const c=Fk(n,i);Wg(n,c)}),n.onDisconnect_=sD(),No(n.eventQueue_,mn(),r)}(n)}function kk(n,e,t){const r=new wn("/.info/"+e),i=vr(t);n.infoData_.updateSnapshot(r,i);const o=Cb(n.infoSyncTree_,r,i);No(n.eventQueue_,r,o)}function CD(n){return n.nextWriteId_++}function Nk(n,e,t,r,i){zg(n,"set",{path:e.toString(),value:t,priority:r});const o=Rb(n),c=vr(t,r),h=_D(n.serverSyncTree_,e),m=Dk(c,h,o),y=CD(n),C=yk(n.serverSyncTree_,e,m,y,!0);ED(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),(x,P)=>{const B="ok"===x;B||a("set at "+e+" failed: "+x);const Q=sh(n.serverSyncTree_,y,!B);No(n.eventQueue_,e,Q),oh(0,i,x,P)});const T=Fk(n,e);Wg(n,T),No(n.eventQueue_,T,[])}function iq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&rk(n.onDisconnect_,e),oh(0,t,r,i)})}function oB(n,e,t,r){const i=vr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,c)=>{"ok"===o&&jg(n.onDisconnect_,e,i),oh(0,r,o,c)})}function Pk(n,e,t){let r;r=".info"===zt(e._path)?gD(n.infoSyncTree_,e,t):gD(n.serverSyncTree_,e,t),eB(n.eventQueue_,e._path,r)}function aB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(nB)}function zg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ti(t,...e)}function oh(n,e,t,r){e&&Kt(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,e(c)}})}function Ok(n,e,t){return _D(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function ID(n,e=n.transactionQueueTree_){if(e||DD(n,e),Yf(e)){const t=cB(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function uq(n,e,t){const r=t.map(y=>y.currentWriteId),i=Ok(n,e,r);let o=i;const c=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,O.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const T=Ts(e,C.path);o=o.updateChild(T,C.currentOutputSnapshotRaw)}const h=o.val(!0),m=e;n.server_.put(m.toString(),h,y=>{zg(n,"transaction put response",{path:m.toString(),status:y});let C=[];if("ok"===y){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,C=C.concat(sh(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();DD(n,vD(n.transactionQueueTree_,e)),ID(n,n.transactionQueueTree_),No(n.eventQueue_,e,C);for(let x=0;x<T.length;x++)Kt(T[x])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{a("transaction at "+m.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}Wg(n,e)}},c)}(n,Tb(e),t)}else ZV(e)&&bD(e,t=>{ID(n,t)})}function Wg(n,e){const t=lB(n,e),r=Tb(t);return function dq(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=Ts(t,m.path);let T,C=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,T=m.abortReason,i=i.concat(sh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,T="maxretry",i=i.concat(sh(n.serverSyncTree_,m.currentWriteId,!0));else{const x=Ok(n,m.path,c);m.currentInputSnapshot=x;const P=e[h].update(x.val());if(void 0!==P){Ab("transaction failed: Data returned ",P,m.path);let B=vr(P);"object"==typeof P&&null!=P&&(0,O.r3)(P,".priority")||(B=B.updatePriority(x.getPriority()));const he=m.currentWriteId,ke=Rb(n),ze=Dk(B,x,ke);m.currentOutputSnapshotRaw=B,m.currentOutputSnapshotResolved=ze,m.currentWriteId=CD(n),c.splice(c.indexOf(he),1),i=i.concat(yk(n.serverSyncTree_,m.path,ze,m.currentWriteId,m.applyLocally)),i=i.concat(sh(n.serverSyncTree_,he,!0))}else C=!0,T="nodata",i=i.concat(sh(n.serverSyncTree_,m.currentWriteId,!0))}No(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}DD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Kt(r[h]);ID(n,n.transactionQueueTree_)}(n,cB(n,t),r),r}function lB(n,e){let t,r=n.transactionQueueTree_;for(t=zt(e);null!==t&&void 0===Yf(r);)r=vD(r,t),t=zt(e=Pn(e));return r}function cB(n,e){const t=[];return uB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function uB(n,e,t){const r=Yf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);bD(e,i=>{uB(n,i,t)})}function DD(n,e){const t=Yf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Ak(e,t.length>0?t:void 0)}bD(e,r=>{DD(n,r)})}function Fk(n,e){const t=Tb(lB(n,e)),r=vD(n.transactionQueueTree_,e);return function HW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Lk(n,i)}),Lk(n,r),YV(r,i=>{Lk(n,i)}),t}function Lk(n,e){const t=Yf(e);if(t){const r=[];let i=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,O.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,O.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(sh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Ak(e,void 0):t.length=o+1,No(n.eventQueue_,Tb(e),i);for(let c=0;c<r.length;c++)Kt(r[c])}}const Vk=function(n,e){const t=pq(n),r=t.namespace;return"firebase.com"===t.domain&&s(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&s("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&a("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new BR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new wn(t.pathString)}},pq=function(n){let e="",t="",r="",i="",o="",c=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(C,T)),C<T&&(i=function hq(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,T)));const x=function fq(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):a(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),o=r}"ns"in x&&(o=x.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};class dB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class hB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Bk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class fB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return iq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Sa("OnDisconnect.remove",this._path);const e=new O.BH;return oB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Sa("OnDisconnect.set",this._path),wc("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return oB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Sa("OnDisconnect.setWithPriority",this._path),wc("OnDisconnect.setWithPriority",e,this._path,!1),Rk("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function sq(n,e,t,r,i){const o=vr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,h)=>{"ok"===c&&jg(n.onDisconnect_,e,o),oh(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Sa("OnDisconnect.update",this._path),JV("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function oq(n,e,t,r){if((0,O.xb)(t))return ti("onDisconnect().update() called with empty data.  Don't do anything."),void oh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&H(t,(c,h)=>{const m=vr(h);jg(n.onDisconnect_,or(e,c),m)}),oh(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Qs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Wt(this._path)?null:zR(this._path)}get ref(){return new Aa(this._repo,this._path)}get _queryIdentifier(){const e=yV(this._queryParams),t=k(e);return"{}"===t?"default":t}get _queryObject(){return yV(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof Qs))return!1;const t=this._repo===e._repo,r=WR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function s3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function TD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ah(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===bc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==g)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==b)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Hn){if(null!=e&&!Sb(e)||null!=t&&!Sb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof QR||n.getIndex()===JR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Aa extends Qs{constructor(e,t){super(e,t,new nD,!1)}get parent(){const e=nV(this._path);return null===e?null:new Aa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Qf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wn(e),r=Jf(this.ref,e);return new Qf(this._node.getChild(t),r,Hn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Qf(i,Jf(this.ref,r),Hn)))}hasChild(e){const t=new wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pB(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Jf(n._root,e):n._root}function mB(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=Vk(e,n._repo.repoInfo_.nodeAdmin);XV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&s("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),pB(n,t.path.toString())}function Jf(n,e){return null===zt((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xb("child","path",t,!1)):xb("child","path",e,!1),new Aa(n._repo,or(n._path,e));var t}function Uk(n,e){n=(0,O.m9)(n),Sa("set",n._path),wc("set",e,n._path,!1);const t=new O.BH;return Nk(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function vq(n,e){JV("update",e,n._path,!1);const t=new O.BH;return function nq(n,e,t,r){zg(n,"update",{path:e.toString(),value:t});let i=!0;const o=Rb(n),c={};if(H(t,(h,m)=>{i=!1,c[h]=KV(or(e,h),vr(m),n.serverSyncTree_,o)}),i)ti("update() called with empty data.  Don't do anything."),oh(0,r,"ok",void 0);else{const h=CD(n),m=function AW(n,e,t,r){!function z3(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=ck(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=$n.fromObject(t);return Gg(n,new Hg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);ED(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,C)=>{const T="ok"===y;T||a("update at "+e+" failed: "+y);const x=sh(n.serverSyncTree_,h,!T),P=x.length>0?Wg(n,e):e;No(n.eventQueue_,P,x),oh(0,r,y,C)}),H(t,y=>{const C=Fk(n,or(e,y));Wg(n,C)}),No(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function bq(n){n=(0,O.m9)(n);const e=new Bk(()=>{}),t=new kb(e);return function tq(n,e,t){const r=function NW(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const T=Ts(y,t);r=r||rh(C,T)});let i=n.syncPointTree_.get(t);i?r=r||rh(i,mn()):(i=new LV,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,c=o?new th(r,!0,!1):null;return function gW(n){return lD(n.viewCache_)}(VV(i,e,cD(n.pendingWriteTree_,e._path),o?c.getNode():Vt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=vr(i).withIndex(e._queryParams.getIndex());let c;if(vk(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Cb(n.serverSyncTree_,e._path,o);else{const h=Ib(n.serverSyncTree_,e);c=$V(n.serverSyncTree_,e._path,o,h)}return No(n.eventQueue_,e._path,c),gD(n.serverSyncTree_,e,t,null,!0),o},i=>(zg(n,"get for query "+(0,O.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Qf(r,new Aa(n._repo,n._path),n._queryParams.getIndex()))}class kb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new dB("value",this,new Qf(e.snapshotNode,new Aa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hB(this,e,t):null}matches(e){return e instanceof kb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class AD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hB(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Jf(new Aa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new dB(e.type,this,new Qf(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof AD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Nb(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const m=t,y=(C,T)=>{Pk(n._repo,n,h),m(C,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new Bk(t,o||void 0),h="value"===e?new kb(c):new AD(e,c);return function aq(n,e,t){let r;r=".info"===zt(e._path)?vk(n.infoSyncTree_,e,t):vk(n.serverSyncTree_,e,t),eB(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Pk(n._repo,n,h)}function jk(n,e,t,r){return Nb(n,"value",e,t,r)}function gB(n,e,t,r){return Nb(n,"child_added",e,t,r)}function _B(n,e,t,r){return Nb(n,"child_changed",e,t,r)}function yB(n,e,t,r){return Nb(n,"child_moved",e,t,r)}function vB(n,e,t,r){return Nb(n,"child_removed",e,t,r)}function bB(n,e,t){let r=null;const i=t?new Bk(t):null;"value"===e?r=new kb(i):e&&(r=new AD(e,i)),Pk(n._repo,n,r)}class cl{}class wB extends cl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endAt",this._value,e._path,!0);const t=nk(e._queryParams,this._value,this._key);if(SD(t),ah(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qs(e._repo,e._path,t,e._orderByCalled)}}class Eq extends cl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endBefore",this._value,e._path,!1);const t=function k3(n,e,t){let r,i;return n.index_===bc?("string"==typeof e&&(e=mV(e)),i=nk(n,e,t)):(r=null==t?g:mV(t),i=nk(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(SD(t),ah(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qs(e._repo,e._path,t,e._orderByCalled)}}class EB extends cl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAt",this._value,e._path,!0);const t=tk(e._queryParams,this._value,this._key);if(SD(t),ah(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Qs(e._repo,e._path,t,e._orderByCalled)}}class Dq extends cl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAfter",this._value,e._path,!1);const t=function R3(n,e,t){let r;if(n.index_===bc)"string"==typeof e&&(e=pV(e)),r=tk(n,e,t);else{let i;i=null==t?b:pV(t),r=tk(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SD(t),ah(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Qs(e._repo,e._path,t,e._orderByCalled)}}class Sq extends cl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qs(e._repo,e._path,function M3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Mq extends cl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qs(e._repo,e._path,function x3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Rq extends cl{constructor(e){super(),this._path=e}_apply(e){TD(e,"orderByChild");const t=new wn(this._path);if(Wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new QR(t),i=rD(e._queryParams,r);return ah(i),new Qs(e._repo,e._path,i,!0)}}class Nq extends cl{_apply(e){TD(e,"orderByKey");const t=rD(e._queryParams,bc);return ah(t),new Qs(e._repo,e._path,t,!0)}}class Oq extends cl{_apply(e){TD(e,"orderByPriority");const t=rD(e._queryParams,Hn);return ah(t),new Qs(e._repo,e._path,t,!0)}}class Lq extends cl{_apply(e){TD(e,"orderByValue");const t=rD(e._queryParams,JR);return ah(t),new Qs(e._repo,e._path,t,!0)}}class Bq extends cl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new wB(this._value,this._key)._apply(new EB(this._value,this._key)._apply(e))}}function ul(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function bW(n){(0,O.hu)(!fD,"__referenceConstructor has already been defined"),fD=n})(Aa),function DW(n){(0,O.hu)(!mD,"__referenceConstructor has already been defined"),mD=n}(Aa);const Hk={};function IB(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||s("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ti("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,c=Vk(o,i),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(m=!0,o=`http://${y}?ns=${h.namespace}`,c=Vk(o,i),h=c.repoInfo):m=!c.repoInfo.secure;const C=i&&m?new Tu(Tu.OWNER):new db(n.name,n.options,e);XV("Invalid Firebase Database URL",c),Wt(c.path)||s("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function Gq(n,e,t,r){let i=Hk[e.name];i||(i={},Hk[e.name]=i);let o=i[n.toURLString()];return o&&s("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new JW(n,false,t,r),i[n.toURLString()]=o,o}(h,n,C,new ub(n.name,t));return new Wq(T,n)}class Wq{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function XW(n,e,t){if(n.stats_=HR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new iD(n.repoInfo_,(r,i,o,c)=>{iB(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>sB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Wf(n.repoInfo_,e,(r,i,o,c)=>{iB(n,r,i,o,c)},r=>{sB(n,r)},r=>{!function eq(n,e){H(e,(t,r)=>{kk(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Fz(n,e){const t=n.toString();return jR[t]||(jR[t]=e()),jR[t]}(n.repoInfo_,()=>new V3(n.stats_,n.server_)),n.infoData_=new N3,n.infoSyncTree_=new HV({startListening:(r,i,o,c)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=Cb(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),kk(n,"connected",!1),n.serverSyncTree_=new HV({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,m)=>{const y=c(h,m);No(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Aa(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $q(n,e){const t=Hk[e];(!t||t[n.key]!==n)&&s(`Database ${e}(${n.repoInfo_}) has already been deleted.`),aB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&s("Cannot call "+e+" on a deleted database.")}}function DB(){GL.IS_TRANSPORT_INITIALIZED&&a("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qq(){DB(),Xd.forceDisallow()}function Kq(){DB(),Fg.forceDisallow(),Xd.forceAllow()}function Jq(n,e){LR(n,e)}const e6={".sv":"timestamp"};class r6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Wf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Xq(n){RR(Ia.SDK_VERSION),(0,Ia._registerComponent)(new Ca.wA("database",(e,{instanceIdentifier:t})=>IB(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ia.registerVersion)(GI,"0.13.6",n),(0,Ia.registerVersion)(GI,"0.13.6","esm2017")}();const a6=new Ds.Yd("@firebase/database-compat"),TB=function(n){a6.warn("FIREBASE WARNING: "+n)};class u6{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,TB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class d6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class lh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),xb("DataSnapshot.child","path",e,!1),new lh(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new lh(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Po(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Fi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const c=Fi.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(c.context,new lh(this.database,y),C)};h.userCallback=t,h.context=c.context;const m=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(e){case"value":return jk(this._delegate,h,m),t;case"child_added":return gB(this._delegate,h,m),t;case"child_removed":return vB(this._delegate,h,m),t;case"child_changed":return _B(this._delegate,h,m),t;case"child_moved":return yB(this._delegate,h,m),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,bB(this._delegate,e,i)}else bB(this._delegate,e)}get(){return bq(this._delegate).then(e=>new lh(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const o=Fi.getCancelAndContextArgs_("Query.once",r,i),c=new O.BH,h=(y,C)=>{const T=new lh(this.database,y);t&&t.call(o.context,T,C),c.resolve(T)};h.userCallback=t,h.context=o.context;const m=y=>{o.cancel&&o.cancel.call(o.context,y),c.reject(y)};switch(e){case"value":jk(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":gB(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":vB(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":_B(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":yB(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Fi(this.database,ul(this._delegate,function Aq(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Sq(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Fi(this.database,ul(this._delegate,function xq(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Mq(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Fi(this.database,ul(this._delegate,function kq(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xb("orderByChild","path",n,!1),new Rq(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Fi(this.database,ul(this._delegate,function Pq(){return new Nq}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Fi(this.database,ul(this._delegate,function Fq(){return new Oq}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Fi(this.database,ul(this._delegate,function Vq(){return new Lq}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Fi(this.database,ul(this._delegate,function Iq(n=null,e){return Mb("startAt","key",e,!0),new EB(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Fi(this.database,ul(this._delegate,function Tq(n,e){return Mb("startAfter","key",e,!0),new Dq(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Fi(this.database,ul(this._delegate,function wq(n,e){return Mb("endAt","key",e,!0),new wB(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Fi(this.database,ul(this._delegate,function Cq(n,e){return Mb("endBefore","key",e,!0),new Eq(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Fi(this.database,ul(this._delegate,function Uq(n,e){return Mb("equalTo","key",e,!0),new Bq(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Fi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Po(this.database,new Aa(this._delegate._repo,this._delegate._path))}}class Po extends Fi{constructor(e,t){super(e,new Qs(t._repo,t._path,new nD,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Po(this.database,Jf(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Po(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Po(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=Uk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,TB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sa("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=vq(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function yq(n,e,t){if(Sa("setWithPriority",n._path),wc("setWithPriority",e,n._path,!1),Rk("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return Nk(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function gq(n){return Sa("remove",n._path),Uk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function i6(n,e,t){var r;if(n=(0,O.m9)(n),Sa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new O.BH,h=jk(n,()=>{});return function cq(n,e,t,r,i,o){zg(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:PR(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Ok(n,e,void 0);c.currentInputSnapshot=h;const m=c.update(h.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Ab("transaction failed: Data returned ",m,c.path),c.status=0;const y=vD(n.transactionQueueTree_,e),C=Yf(y)||[];let T;C.push(c),Ak(y,C),"object"==typeof m&&null!==m&&(0,O.r3)(m,".priority")?(T=(0,O.DV)(m,".priority"),(0,O.hu)(Sb(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(_D(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const x=Rb(n),P=vr(m,T),B=Dk(P,h,x);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=B,c.currentWriteId=CD(n);const Q=yk(n.serverSyncTree_,e,B,c.currentWriteId,c.applyLocally);No(n.eventQueue_,e,Q),ID(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,C)=>{let T=null;m?o.reject(m):(T=new Qf(C,new Aa(n._repo,n._path),Hn),o.resolve(new r6(y,T)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new d6(o.committed,new lh(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function _q(n,e){n=(0,O.m9)(n),Sa("setPriority",n._path),Rk("setPriority",e,!1);const t=new O.BH;return Nk(n._repo,or(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function mq(n,e){n=(0,O.m9)(n),Sa("push",n._path),wc("push",e,n._path,!0);const t=rB(n._repo),r=D3(t),i=Jf(n,r),o=Jf(n,r);let c;return c=null!=e?Uk(o,e).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Po(this.database,c));t&&i.then(()=>t(null),c=>t(c));const o=new Po(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Sa("Reference.onDisconnect",this._delegate._path),new u6(new fB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Pb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qq,forceLongPolling:Kq}}useEmulator(e,t,r={}){!function Zq(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&s("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&s('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Tu(Tu.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);o=new Tu(c)}!function Hq(n,e,t,r){n.repoInfo_=new BR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Po){const t=mB(this._delegate,e.toString());return new Po(this,t)}{const t=pB(this._delegate,e);return new Po(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=mB(this._delegate,e);return new Po(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function Yq(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),aB(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function Qq(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function lq(n){n.persistentConnection_&&n.persistentConnection_.resume(nB)}(n._repo)}(this._delegate)}}Pb.ServerValue={TIMESTAMP:function t6(){return e6}(),increment:n=>function n6(n){return{".sv":{increment:n}}}(n)};var f6=Object.freeze({__proto__:null,initStandalone:function h6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){RR(t);const c=new Ca.zt("auth-internal",new Ca.H0("database-standalone"));return c.setComponent(new Ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Pb(IB(n,c,void 0,e,o),n),namespace:i}}});const p6=Pb.ServerValue;!function m6(n){n.INTERNAL.registerComponent(new Ca.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Pb(i,r)},"PUBLIC").setServiceProps({Reference:Po,Query:Fi,Database:Pb,DataSnapshot:lh,enableLogging:Jq,INTERNAL:f6,ServerValue:p6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}($I.Z);var MD=L(5363),g6=L(6063);class _6 extends rn.x{constructor(e=1/0,t=1/0,r=g6.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(e),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!e.closed;c+=r?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)h=m;h&&r.splice(0,h+1)}}}function SB(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,UI.B)({connector:()=>new _6(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const xD=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function RD(n){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function AB(n=v6){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function v6(){return new xD}function Au(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yi((i,o)=>n(i,o,r)):rl.y,Ke(1),t?RD(e):AB(()=>new xD))}function MB(n,e){return(0,ma.m)(e)?Cr(()=>n,e):Cr(()=>n)}var $k=L(9468);L(5867);const RB=new Map,I6={activated:!1,tokenObservers:[]},D6={initialized:!1,enabled:!1};function _i(n){return RB.get(n)||I6}function dl(n,e){RB.set(n,e)}function ND(){return D6}class x6{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function R6(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ss=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function NB(n){if(!_i(n).activated)throw Ss.create("use-before-activation",{appName:n.name})}function qk(n,e){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,be.Z)(function*({url:n,body:e},t){var r,i;const o={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const P=yield c.getHeartbeatsHeader();P&&(o["X-Firebase-Client"]=P)}const h={method:"POST",body:JSON.stringify(e),headers:o};let m,y;try{m=yield fetch(n,h)}catch(P){throw Ss.create("fetch-network-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}if(200!==m.status)throw Ss.create("fetch-status-error",{httpStatus:m.status});try{y=yield m.json()}catch(P){throw Ss.create("fetch-parse-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}const C=y.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw Ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(C[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+T,issuedAtTimeMillis:x}})).apply(this,arguments)}function O6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ob="firebase-app-check-store";let FD=null;function OB(){return FD||(FD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;e(Ss.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ob,{keyPath:"compositeKey"})}}catch(r){e(Ss.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),FD)}function Zk(){return(Zk=(0,be.Z)(function*(n,e){const r=(yield OB()).transaction(Ob,"readwrite"),o=r.objectStore(Ob).put({compositeKey:n,value:e});return new Promise((c,h)=>{o.onsuccess=m=>{c()},r.onerror=m=>{var y;h(Ss.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Fb=new Ds.Yd("@firebase/app-check");function BB(n,e){return(0,O.hl)()?function B6(n,e){return function FB(n,e){return Zk.apply(this,arguments)}(function VB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UB(){return ND().enabled}function jB(){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,be.Z)(function*(){const n=ND();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const z6={error:"UNKNOWN_ERROR"};function W6(n){return O.US.encodeString(JSON.stringify(n),!1)}function LD(n){return eN.apply(this,arguments)}function eN(){return(eN=(0,be.Z)(function*(n,e=!1){const t=n.app;NB(t);const r=_i(t);let o,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&VD(m)&&(i=m)}if(!e&&i&&VD(i))return{token:i.token};let h,c=!1;if(UB()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qk(O6(t,yield jB()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const m=yield r.exchangeTokenPromise;return yield BB(t,m),dl(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Fb.warn(m.message):Fb.error(m),o=m}return i?(h={token:i.token},dl(t,Object.assign(Object.assign({},r),{token:i})),yield BB(t,i)):h=K6(o),c&&$B(t,h),h})).apply(this,arguments)}function nN(n,e){const t=_i(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),dl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function HB(n){const{app:e}=n,t=_i(e);let r=t.tokenRefresher;r||(r=function q6(n){const{app:e}=n;return new x6((0,be.Z)(function*(){let r;if(r=_i(e).token?yield LD(n,!0):yield LD(n),r.error)throw r.error}),()=>!0,()=>{const t=_i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),dl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $B(n,e){const t=_i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function VD(n){return n.expireTimeMillis-Date.now()>0}function K6(n){return{token:W6(z6),error:n}}class Z6{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_i(this.app);for(const t of e)nN(this.app,t.next);return Promise.resolve()}}const QB="app-check-internal";!function u4(){(0,Ia._registerComponent)(new Ca.wA("app-check",n=>function Y6(n,e){return new Z6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QB).initialize()})),(0,Ia._registerComponent)(new Ca.wA(QB,n=>function Q6(n){return{getToken:e=>LD(n,e),addTokenListener:e=>function tN(n,e,t,r){const{app:i}=n,o=_i(i),c={next:t,error:r,type:e};if(dl(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&VD(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),HB(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>HB(n))}(n,"INTERNAL",e),removeTokenListener:e=>nN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ia.registerVersion)("@firebase/app-check","0.5.12")}();class UD{constructor(){return(0,Nn.vb)("app-check")}}typeof window<"u"&&window;var m4=L(127);const aN=new d.OlP("angularfire2.auth.use-emulator"),lN=new d.OlP("angularfire2.auth.settings"),cN=new d.OlP("angularfire2.auth.tenant-id"),uN=new d.OlP("angularfire2.auth.langugage-code"),dN=new d.OlP("angularfire2.auth.use-device-language"),hN=new d.OlP("angularfire.auth.persistence"),fN=(n,e,t,r,i,o,c,h)=>(0,Oi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,o&&m.useDeviceLanguage(),c)for(const[y,C]of Object.entries(c))m.settings[y]=C;return h&&m.setPersistence(h),m},[t,r,i,o,c,h]);let pN=(()=>{class n{constructor(t,r,i,o,c,h,m,y,C,T,x,P){const B=new rn.x,Q=it(void 0).pipe((0,MD.Q)(c.outsideAngular),Cr(()=>o.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2476)))),(0,Ye.U)(()=>(0,Oi.on)(t,o,r)),(0,Ye.U)(he=>fN(he,o,h,y,C,T,m,x)),SB({bufferSize:1,refCount:!1}));if(Er(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Q.pipe(Au()).subscribe();const ke=Q.pipe(Cr(et=>et.getRedirectResult().then(Tt=>Tt,()=>null)),Nn.iC,SB({bufferSize:1,refCount:!1})),ze=Q.pipe(Cr(et=>new sn.y(Tt=>({unsubscribe:o.runOutsideAngular(()=>et.onAuthStateChanged(At=>Tt.next(At),At=>Tt.error(At),()=>Tt.complete()))})))),nt=Q.pipe(Cr(et=>new sn.y(Tt=>({unsubscribe:o.runOutsideAngular(()=>et.onIdTokenChanged(At=>Tt.next(At),At=>Tt.error(At),()=>Tt.complete()))}))));this.authState=ke.pipe(MB(ze),(0,$k.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular)),this.user=ke.pipe(MB(nt),(0,$k.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Cr(et=>et?(0,Dn.D)(et.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Cr(et=>et?(0,Dn.D)(et.getIdTokenResult()):it(null))),this.credential=(0,ec.T)(ke,B,this.authState.pipe(Yi(et=>!et))).pipe((0,Ye.U)(et=>et?.user?et:null),(0,$k.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular))}return(0,Oi.pX)(this,Q,o,{spy:{apply:(he,ke,ze)=>{(he.startsWith("signIn")||he.startsWith("createUser"))&&ze.then(nt=>B.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Oi.Dh),d.LFG(Oi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Nn.HU),d.LFG(aN,8),d.LFG(lN,8),d.LFG(cN,8),d.LFG(uN,8),d.LFG(dN,8),d.LFG(hN,8),d.LFG(UD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function XB(n){return null==n}function eU(n){return"function"==typeof n.set}function tU(n,e){return eU(e)?e:n.ref(e)}function nU(n,e){if(function _4(n){return"string"==typeof n}(n))return e.stringCase();if(eU(n))return e.firebaseCase();if(function y4(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Lb(n,e,t="on",r=da.z){return new sn.y(i=>{let o=null;return o=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Ye.U)(i=>{const{snapshot:o,prevKey:c}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:c,key:h}}),(0,UI.B)())}function rU(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function w4(n,e){const{payload:t,prevKey:r,key:i}=e,o=rU(n,i),c=function b4(n,e){if(XB(e))return 0;{const t=rU(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function iU(n){return(XB(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function sU(n,e,t){return function v4(n,e,t){return Lb(n,"value","once",t).pipe(Cr(r=>{const i=[it(r)];return e.forEach(o=>i.push(Lb(n,o,"on",t))),(0,ec.T)(...i).pipe(Du(w4,[]))}),Yl())}(n,e=iU(e),t)}function oU(n,e,t){const r=(e=iU(e)).map(i=>Lb(n,i,"on",t));return(0,ec.T)(...r)}function aU(n,e){return function(r,i){return nU(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function D4(n){return function(t){return t?nU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function lU(n,e){return function(){return Lb(n,"value","on",e)}}const A4=new d.OlP("angularfire2.realtimeDatabaseURL"),M4=new d.OlP("angularfire2.database.use-emulator");let cU=(()=>{class n{constructor(t,r,i,o,c,h,m,y,C,T,x,P,B,Q,he){this.schedulers=h;const ke=m,ze=(0,Oi.on)(t,c,r);y&&fN(ze,c,C,x,P,B,T,Q),this.database=(0,Oi.cc)(`${ze.name}.database.${i}`,"AngularFireDatabase",ze.name,()=>{const nt=c.runOutsideAngular(()=>ze.database(i||void 0));return ke&&nt.useEmulator(...ke),nt},[ke])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>tU(this.database,t));let o=i;return r&&(o=r(i)),function T4(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:aU(r,"update"),set:aU(r,"set"),push:i=>r.push(i),remove:D4(r),snapshotChanges:i=>sU(n,i,t).pipe(Nn.iC),stateChanges:i=>oU(n,i,t).pipe(Nn.iC),auditTrail:i=>function E4(n,e,t){return function I4(n,e,t){return function C4(n,e){return Lb(n,"value","on",e).pipe((0,Ye.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function jI(...n){const e=(0,Ri.jO)(n);return(0,Un.e)((t,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,vs.Xf)(n[m]).subscribe((0,kn.x)(r,y=>{o[m]=y,!h&&!c[m]&&(c[m]=!0,(h=c.every(rl.y))&&(c=null))},ha.Z));t.subscribe((0,kn.x)(r,m=>{if(h){const y=[m,...o];r.next(e?e(...y):y)}}))})}(e),(0,Ye.U)(([i,o])=>{const c=i.lastKeyToLoad,h=o.map(m=>m.key);return{actions:o,lastKeyToLoad:c,loadedKeys:h}}),function HI(n){return(0,Un.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,kn.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ye.U)(i=>i.actions))}(n,oU(n,e).pipe(Du((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Nn.iC),valueChanges:(i,o)=>sU(n,i,t).pipe((0,Ye.U)(h=>h.map(m=>o&&o.idField?Object.assign(Object.assign({},m.payload.val()),{[o.idField]:m.key}):m.payload.val())),Nn.iC)}}(o,this)}object(t){return function S4(n,e){return{query:n,snapshotChanges:()=>lU(n,e.schedulers.outsideAngular)().pipe(Nn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>lU(n,e.schedulers.outsideAngular)().pipe(Nn.iC,(0,Ye.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>tU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Oi.Dh),d.LFG(Oi.xv,8),d.LFG(A4,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Nn.HU),d.LFG(M4,8),d.LFG(pN,8),d.LFG(aN,8),d.LFG(lN,8),d.LFG(cN,8),d.LFG(uN,8),d.LFG(dN,8),d.LFG(hN,8),d.LFG(UD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),x4=(()=>{class n{constructor(){m4.Z.registerVersion("angularfire",Nn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[cU]}),n})();function uU(n){return new sn.y(e=>{(0,vs.Xf)(n()).subscribe(e)})}var R4=L(9635);function Vb(n,e){const t=(0,ma.m)(n)?n:()=>n,r=i=>i.error(t());return new sn.y(e?i=>e.schedule(r,0,i):r)}function mN(){return(0,Un.e)((n,e)=>{let t=null;n._refCount++;const r=(0,kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dU extends sn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xi.w0.EMPTY)}return e}refCount(){return mN()(this)}}function ch(n){return(0,Un.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,kn.x)(t,void 0,void 0,c=>{o=(0,vs.Xf)(n(c,ch(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gN(n){return n<=0?()=>Pe.E:(0,Un.e)((e,t)=>{let r=[];e.subscribe((0,kn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hU(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yi((i,o)=>n(i,o,r)):rl.y,gN(1),t?RD(e):AB(()=>new xD))}function _N(n){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",Bb=Symbol("RouteTitle");class P4{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qg(n){return new P4(n)}function O4(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ec(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!fU(n[i],e[i]))return!1;return!0}function fU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function pU(n){return Array.prototype.concat.apply([],n)}function mU(n){return n.length>0?n[n.length-1]:null}function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function uh(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):it(n)}const V4={exact:function yU(n,e,t){if(!ep(n.segments,e.segments)||!jD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yU(n.children[r],e.children[r],t))return!1;return!0},subset:vU},gU={exact:function B4(n,e){return Ec(n,e)},subset:function U4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fU(n[t],e[t]))},ignored:()=>!0};function _U(n,e,t){return V4[t.paths](n.root,e.root,t.matrixParams)&&gU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vU(n,e,t){return bU(n,e,e.segments,t)}function bU(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ep(i,t)||e.hasChildren()||!jD(i,t,r))}if(n.segments.length===t.length){if(!ep(n.segments,t)||!jD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!vU(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(ep(n.segments,i)&&jD(n.segments,i,r)&&n.children[qt])&&bU(n.children[qt],e,o,r)}}function jD(n,e,t){return e.every((r,i)=>gU[t](n[i].parameters,r.parameters))}class Xf{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qg(this.queryParams)),this._queryParamMap}toString(){return $4.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return HD(this)}}class Ub{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qg(this.parameters)),this._parameterMap}toString(){return IU(this)}}function ep(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let wU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new vN},providedIn:"root"}),n})();class vN{parse(e){const t=new J4(e);return new Xf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jb(e.root,!0)}`,r=function W4(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$D(t)}=${$D(i)}`).join("&"):`${$D(t)}=${$D(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function G4(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $4=new vN;function HD(n){return n.segments.map(e=>IU(e)).join("/")}function jb(n,e){if(!n.hasChildren())return HD(n);if(e){const t=n.children[qt]?jb(n.children[qt],!1):"",r=[];return Li(n.children,(i,o)=>{o!==qt&&r.push(`${o}:${jb(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function H4(n,e){let t=[];return Li(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),Li(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[jb(n.children[qt],!1)]:[`${i}:${jb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${HD(n)}/${t[0]}`:`${HD(n)}/(${t.join("//")})`}}function EU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $D(n){return EU(n).replace(/%3B/gi,";")}function bN(n){return EU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function GD(n){return decodeURIComponent(n)}function CU(n){return GD(n.replace(/\+/g,"%20"))}function IU(n){return`${bN(n.path)}${function z4(n){return Object.keys(n).map(e=>`;${bN(e)}=${bN(n[e])}`).join("")}(n.parameters)}`}const q4=/^[^\/()?;=#]+/;function zD(n){const e=n.match(q4);return e?e[0]:""}const K4=/^[^=?&#]+/,Y4=/^[^&#]+/;class J4{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Yt(e,t)),r}parseSegment(){const e=zD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Ub(GD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zD(this.remaining);i&&(r=i,this.capture(r))}e[GD(t)]=GD(r)}parseQueryParam(e){const t=function Z4(n){const e=n.match(K4);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Q4(n){const e=n.match(Y4);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=CU(t),o=CU(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qt);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[qt]:new Yt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function wN(n){return n.segments.length>0?new Yt([],{[qt]:n}):n}function WD(n){const e={};for(const r of Object.keys(n.children)){const o=WD(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function X4(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function tp(n){return n instanceof Xf}function n8(n,e,t,r,i){if(0===t.length)return Kg(e.root,e.root,e.root,r,i);const o=function SU(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new TU(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Li(o.outlets,(m,y)=>{h[y]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new TU(t,e,r)}(t);return o.toRoot()?Kg(e.root,e.root,new Yt([],{}),r,i):function c(m){const y=function i8(n,e,t,r){if(n.isAbsolute)return new Zg(e.root,!0,0);if(-1===r)return new Zg(t,t===e.root,0);return function AU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Zg(r,!1,i-o)}(t,r+(Hb(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,m),C=y.processChildren?Gb(y.segmentGroup,y.index,o.commands):CN(y.segmentGroup,y.index,o.commands);return Kg(e.root,y.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Hb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $b(n){return"object"==typeof n&&null!=n&&n.outlets}function Kg(n,e,t,r,i){let c,o={};r&&Li(r,(m,y)=>{o[y]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),c=n===e?t:DU(n,e,t);const h=wN(WD(c));return new Xf(h,o,i)}function DU(n,e,t){const r={};return Li(n.children,(i,o)=>{r[o]=i===e?t:DU(i,e,t)}),new Yt(n.segments,r)}class TU{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Hb(r[0]))throw new d.vHH(4003,!1);const i=r.find($b);if(i&&i!==mU(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function CN(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return Gb(n,e,t);const r=function o8(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const c=n.segments[i],h=t[r];if($b(h))break;const m=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!xU(m,y,c))return o;r+=2}else{if(!xU(m,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Yt(n.segments.slice(0,r.pathIndex),{});return o.children[qt]=new Yt(n.segments.slice(r.pathIndex),n.children),Gb(o,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?IN(n,e,t):r.match?Gb(n,0,i):IN(n,e,t)}function Gb(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function s8(n){return $b(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return Li(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=CN(n.children[c],e,o))}),Li(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new Yt(n.segments,i)}}function IN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if($b(o)){const m=a8(o.outlets);return new Yt(r,m)}if(0===i&&Hb(t[0])){r.push(new Ub(n.segments[e].path,MU(t[0]))),i++;continue}const c=$b(o)?o.outlets[qt]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&Hb(h)?(r.push(new Ub(c,MU(h))),i+=2):(r.push(new Ub(c,{})),i++)}return new Yt(r,{})}function a8(n){const e={};return Li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=IN(new Yt([],{}),0,t))}),e}function MU(n){const e={};return Li(n,(t,r)=>e[r]=`${t}`),e}function xU(n,e,t){return n==t.path&&Ec(e,t.parameters)}class Mu{constructor(e,t){this.id=e,this.url=t}}class RU extends Mu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zb extends Mu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qD extends Mu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kU extends Mu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class l8 extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c8 extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u8 extends Mu{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d8 extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h8 extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class m8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=DN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=TN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return TN(e,this._root).map(t=>t.value)}}function DN(n,e){if(n===e.value)return e;for(const t of e.children){const r=DN(n,t);if(r)return r}return null}function TN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=TN(n,t);if(r.length)return r.unshift(e),r}return[]}class xu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Yg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class PU extends NU{constructor(e,t){super(e),this.snapshot=t,SN(this,e)}toString(){return this.snapshot.toString()}}function OU(n,e){const t=function b8(n,e){const c=new KD([],{},{},"",{},qt,e,null,n.root,-1,{});return new LU("",new xu(c,[]))}(n,e),r=new xr([new Ub("",{})]),i=new xr({}),o=new xr({}),c=new xr({}),h=new xr(""),m=new np(r,i,c,h,o,qt,e,t.root);return m.snapshot=t.root,new PU(new xu(m,[]),t)}class np{constructor(e,t,r,i,o,c,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,Ye.U)(y=>y[Bb]))??it(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ye.U)(e=>qg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ye.U)(e=>qg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FU(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function w8(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class KD{constructor(e,t,r,i,o,c,h,m,y,C,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.title=this.data?.[Bb],this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=C,this._correctedLastPathIndex=x??C,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LU extends NU{constructor(e,t){super(t),this.url=e,SN(this,t)}toString(){return VU(this._root)}}function SN(n,e){e.value._routerState=n,e.children.forEach(t=>SN(n,t))}function VU(n){const e=n.children.length>0?` { ${n.children.map(VU).join(", ")} } `:"";return`${n.value}${e}`}function AN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ec(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ec(e.params,t.params)||n.params.next(t.params),function F4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ec(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ec(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MN(n,e){const t=Ec(n.params,e.params)&&function j4(n,e){return ep(n,e)&&n.every((t,r)=>Ec(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MN(n.parent,e.parent))}function Wb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function C8(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wb(n,r,i);return Wb(n,r)})}(n,e,t);return new xu(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Wb(n,h)),c}}const r=function I8(n){return new np(new xr(n.url),new xr(n.params),new xr(n.queryParams),new xr(n.fragment),new xr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Wb(n,o));return new xu(r,i)}}const xN="ngNavigationCancelingError";function BU(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=tp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UU(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function UU(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xN]=!0,r.cancellationCode=e,t&&(r.url=t),r}function jU(n){return HU(n)&&tp(n.url)}function HU(n){return n&&n[xN]}class D8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new qb,this.attachRef=null}}let qb=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new D8,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZD=!1;let $U=(()=>{class n{constructor(t,r,i,o,c){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,ZD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,ZD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,ZD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,ZD);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new T8(t,h,i.injector);if(r&&function S8(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,m)}else this.activated=i.createComponent(c,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qb),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class T8{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===np?this.route:e===qb?this.childContexts:this.parent.get(e,t)}}let GU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[$U],encapsulation:2}),n})();function zU(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kN(n){const e=n.children&&n.children.map(kN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=GU),t}function Ma(n){return n.outlet||qt}function WU(n,e){const t=n.filter(r=>Ma(r)===e);return t.push(...n.filter(r=>Ma(r)!==e)),t}function Kb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class k8{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Yg(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Li(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Yg(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Yg(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Yg(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new y8(o.value.snapshot))}),e.children.length&&this.forwardEvent(new g8(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(AN(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),AN(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Kb(i.snapshot),m=h?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=m,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class qU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class YD{constructor(e,t){this.component=e,this.route=t}}function N8(n,e,t){const r=n._root;return Zb(r,e?e._root:null,t,[r.value])}function Qg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Zb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Yg(e);return n.children.forEach(c=>{(function O8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const m=function F8(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ep(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ep(n.url,e.url)||!Ec(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MN(n,e)||!Ec(n.queryParams,e.queryParams);default:return!MN(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new qU(r)):(o.data=c.data,o._resolvedData=c._resolvedData),Zb(n,e,o.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new YD(h.outlet.component,c))}else c&&Yb(e,h,i),i.canActivateChecks.push(new qU(r)),Zb(n,null,o.component?h?h.children:null:t,r,i)})(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),Li(o,(c,h)=>Yb(c,t.getContext(h),i)),i}function Yb(n,e,t){const r=Yg(n),i=n.value;Li(r,(o,c)=>{Yb(o,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new YD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Qb(n){return"function"==typeof n}function NN(n){return n instanceof xD||"EmptyError"===n?.name}const QD=Symbol("INITIAL_VALUE");function Jg(){return Cr(n=>_(n.map(e=>e.pipe(Ke(1),st(QD)))).pipe((0,Ye.U)(e=>{for(const t of e)if(!0!==t){if(t===QD)return QD;if(!1===t||t instanceof Xf)return t}return!0}),Yi(e=>e!==QD),Ke(1)))}function KU(n){return(0,R4.z)((0,rr.b)(e=>{if(tp(e))throw BU(0,e)}),(0,Ye.U)(e=>!0===e))}const PN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZU(n,e,t,r,i){const o=ON(n,e,t);return o.matched?function X8(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?it(i.map(c=>{const h=Qg(c,n);return uh(function H8(n){return n&&Qb(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Jg(),KU()):it(!0)}(r=zU(e,r),e,t).pipe((0,Ye.U)(c=>!0===c?o:{...PN})):it(o)}function ON(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...PN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||O4)(t,n,e);if(!i)return{...PN};const o={};Li(i.posParams,(h,m)=>{o[m]=h.path});const c=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function JD(n,e,t,r,i="corrected"){if(t.length>0&&function n5(n,e,t){return t.some(r=>XD(n,e,r)&&Ma(r)!==qt)}(n,t,r)){const c=new Yt(e,function t5(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Ma(o)!==qt){const c=new Yt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ma(o)]=c}return i}(n,e,r,new Yt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function r5(n,e,t){return t.some(r=>XD(n,e,r))}(n,t,r)){const c=new Yt(n.segments,function e5(n,e,t,r,i,o){const c={};for(const h of r)if(XD(n,t,h)&&!i[Ma(h)]){const m=new Yt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===o?n.segments.length:e.length,c[Ma(h)]=m}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const o=new Yt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function XD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function YU(n,e,t,r){return!!(Ma(n)===r||r!==qt&&XD(e,t,n))&&("**"===n.path||ON(e,n,t).matched)}function QU(n,e,t){return 0===e.length&&!n.children[t]}const eT=!1;class tT{constructor(e){this.segmentGroup=e||null}}class JU{constructor(e){this.urlTree=e}}function Jb(n){return Vb(new tT(n))}function XU(n){return Vb(new JU(n))}class l5{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=JD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,Ye.U)(o=>this.createUrlTree(WD(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ch(o=>{if(o instanceof JU)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof tT?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,Ye.U)(i=>this.createUrlTree(WD(i),e.queryParams,e.fragment))).pipe(ch(i=>{throw i instanceof tT?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,eT)}createUrlTree(e,t,r){const i=wN(e);return new Xf(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ye.U)(o=>new Yt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Dn.D)(i).pipe(Kd(o=>{const c=r.children[o],h=WU(t,o);return this.expandSegmentGroup(e,h,c,o).pipe((0,Ye.U)(m=>({segment:m,outlet:o})))}),Du((o,c)=>(o[c.outlet]=c.segment,o),{}),hU())}expandSegment(e,t,r,i,o,c){return(0,Dn.D)(r).pipe(Kd(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,c).pipe(ch(y=>{if(y instanceof tT)return it(null);throw y}))),Au(h=>!!h),ch((h,m)=>{if(NN(h))return QU(t,i,o)?it(new Yt([],{})):Jb(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,c,h){return YU(i,t,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c):Jb(t):Jb(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?XU(o):this.lineralizeSegments(r,o).pipe((0,Pi.z)(c=>{const h=new Yt(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){const{matched:h,consumedSegments:m,remainingSegments:y,positionalParamSegments:C}=ON(t,i,o);if(!h)return Jb(t);const T=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?XU(T):this.lineralizeSegments(i,T).pipe((0,Pi.z)(x=>this.expandSegment(e,t,r,x.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=zU(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ye.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Yt(i,{})))):it(new Yt(i,{}))):ZU(t,r,i,e).pipe(Cr(({matched:c,consumedSegments:h,remainingSegments:m})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Pi.z)(C=>{const T=C.injector??e,x=C.routes,{segmentGroup:P,slicedSegments:B}=JD(t,h,m,x),Q=new Yt(P.segments,P.children);if(0===B.length&&Q.hasChildren())return this.expandChildren(T,x,Q).pipe((0,Ye.U)(nt=>new Yt(h,nt)));if(0===x.length&&0===B.length)return it(new Yt(h,{}));const he=Ma(r)===o;return this.expandSegment(T,Q,x,B,he?qt:o,!0).pipe((0,Ye.U)(ze=>new Yt(h.concat(ze.segments),ze.children)))})):Jb(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function J8(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?it(!0):it(i.map(c=>{const h=Qg(c,n);return uh(function V8(n){return n&&Qb(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Jg(),KU())}(e,t,r).pipe((0,Pi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,rr.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function o5(n){return Vb(UU(eT,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return it(r);if(i.numberOfChildren>1||!i.children[qt])return Vb(new d.vHH(4e3,eT));i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Xf(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Li(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let c={};return Li(t.children,(h,m)=>{c[m]=this.createSegmentGroup(e,h,r,i)}),new Yt(o,c)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,eT);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class u5{}class f5{constructor(e,t,r,i,o,c,h,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=m}recognize(){const e=JD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,Ye.U)(t=>{if(null===t)return null;const r=new KD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xu(r,t),o=new LU(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=FU(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Dn.D)(Object.keys(r.children)).pipe(Kd(i=>{const o=r.children[i],c=WU(t,i);return this.processSegmentGroup(e,c,o,i)}),Du((i,o)=>i&&o?(i.push(...o),i):null),function k4(n,e=!1){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,kn.x)(r,o=>{const c=n(o,i++);(c||e)&&r.next(o),!c&&r.complete()}))})}(i=>null!==i),RD(null),hU(),(0,Ye.U)(i=>{if(null===i)return null;const o=e2(i);return function p5(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,Dn.D)(t).pipe(Kd(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,o)),Au(c=>!!c),ch(c=>{if(NN(c))return QU(r,i,o)?it([]):it(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!YU(t,r,i,o))return it(null);let c;if("**"===t.path){const h=i.length>0?mU(i).parameters:{},m=n2(r)+i.length;c=it({snapshot:new KD(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s2(t),Ma(t),t.component??t._loadedComponent??null,t,t2(r),m,o2(t),m),consumedSegments:[],remainingSegments:[]})}else c=ZU(r,t,i,e).pipe((0,Ye.U)(({matched:h,consumedSegments:m,remainingSegments:y,parameters:C})=>{if(!h)return null;const T=n2(r)+m.length;return{snapshot:new KD(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s2(t),Ma(t),t.component??t._loadedComponent??null,t,t2(r),T,o2(t),T),consumedSegments:m,remainingSegments:y}}));return c.pipe(Cr(h=>{if(null===h)return it(null);const{snapshot:m,consumedSegments:y,remainingSegments:C}=h;e=t._injector??e;const T=t._loadedInjector??e,x=function m5(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:B}=JD(r,y,C,x.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution);if(0===B.length&&P.hasChildren())return this.processChildren(T,x,P).pipe((0,Ye.U)(he=>null===he?null:[new xu(m,he)]));if(0===x.length&&0===B.length)return it([new xu(m,[])]);const Q=Ma(t)===o;return this.processSegment(T,x,P,B,Q?qt:o).pipe((0,Ye.U)(he=>null===he?null:[new xu(m,he)]))}))}}function g5(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function e2(n){const e=[],t=new Set;for(const r of n){if(!g5(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=e2(r.children);e.push(new xu(r.value,i))}return e.filter(r=>!t.has(r))}function t2(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function n2(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function s2(n){return n.data||{}}function o2(n){return n.resolve||{}}function a2(n){return"string"==typeof n.title||null===n.title}function FN(n){return Cr(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,Ye.U)(()=>e)):it(e)})}let l2=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[Bb]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(c2)},providedIn:"root"}),n})(),c2=(()=>{class n extends l2{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ms))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class I5{}class T5 extends class D5{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const LN=new d.OlP("",{providedIn:"root",factory:()=>({})}),VN=new d.OlP("ROUTES");let d2=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=uh(t.loadComponent()).pipe((0,rr.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),_N(()=>{this.componentLoaders.delete(t)})),i=new dU(r,()=>new rn.x).pipe(mN());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ye.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,y,C=!1;Array.isArray(h)?y=h:(m=h.create(t).injector,y=pU(m.get(VN,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(kN),injector:m}}),_N(()=>{this.childrenLoaders.delete(r)})),c=new dU(o,()=>new rn.x).pipe(mN());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return uh(t()).pipe((0,Pi.z)(r=>r instanceof d.YKP||Array.isArray(r)?it(r):(0,Dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class A5{}class M5{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function x5(n){throw n}function R5(n,e,t){return e.parse("/")}const k5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},N5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ts=(()=>{class n{constructor(t,r,i,o,c,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rn.x,this.errorHandler=x5,this.malformedUriErrorHandler=R5,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>it(void 0),this.urlHandlingStrategy=new M5,this.routeReuseStrategy=new T5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(d2),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new p8(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new f8(x)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const T=c.get(d.R0b);this.isNgZoneEnabled=T instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function L4(){return new Xf(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=OU(this.currentUrlTree,this.rootComponentType),this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Yi(i=>0!==i.id),(0,Ye.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Cr(i=>{let o=!1,c=!1;return it(i).pipe((0,rr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Cr(h=>{const m=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return f2(h.source)&&(this.browserUrlTree=h.extractedUrl),it(h).pipe(Cr(T=>{const x=this.transitions.getValue();return r.next(new RU(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?Pe.E:Promise.resolve(T)}),function c5(n,e,t,r){return Cr(i=>function a5(n,e,t,r,i){return new l5(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ye.U)(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,rr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function y5(n,e,t,r,i,o){return(0,Pi.z)(c=>function h5(n,e,t,r,i,o,c="emptyOnly",h="legacy"){return new f5(n,e,t,r,i,c,h,o).recognize().pipe(Cr(m=>null===m?function d5(n){return new sn.y(e=>e.error(n))}(new u5):it(m)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,o).pipe((0,Ye.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,rr.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(P,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new l8(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:B,restoredState:Q,extras:he}=h,ke=new RU(x,this.serializeUrl(P),B,Q);r.next(ke);const ze=OU(P,this.rootComponentType).snapshot;return it(i={...h,targetSnapshot:ze,urlAfterRedirects:P,extras:{...he,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Pe.E}),(0,rr.b)(h=>{const m=new c8(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,Ye.U)(h=>i={...h,guards:N8(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function G8(n,e){return(0,Pi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?it({...t,guardsResult:!0}):function z8(n,e,t,r){return(0,Dn.D)(n).pipe((0,Pi.z)(i=>function Q8(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?it(o.map(h=>{const m=Kb(e)??i,y=Qg(h,m);return uh(function j8(n){return n&&Qb(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):m.runInContext(()=>y(n,e,t,r))).pipe(Au())})).pipe(Jg()):it(!0)}(i.component,i.route,t,e,r)),Au(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Pi.z)(h=>h&&function L8(n){return"boolean"==typeof n}(h)?function W8(n,e,t,r){return(0,Dn.D)(e).pipe(Kd(i=>de(function K8(n,e){return null!==n&&e&&e(new m8(n)),it(!0)}(i.route.parent,r),function q8(n,e){return null!==n&&e&&e(new _8(n)),it(!0)}(i.route,r),function Y8(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function P8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>uU(()=>it(c.guards.map(m=>{const y=Kb(c.node)??t,C=Qg(m,y);return uh(function U8(n){return n&&Qb(n.canActivateChild)}(C)?C.canActivateChild(r,n):y.runInContext(()=>C(r,n))).pipe(Au())})).pipe(Jg())));return it(o).pipe(Jg())}(n,i.path,t),function Z8(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const i=r.map(o=>uU(()=>{const c=Kb(e)??t,h=Qg(o,c);return uh(function B8(n){return n&&Qb(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Au())}));return it(i).pipe(Jg())}(n,i.route,t))),Au(i=>!0!==i,!0))}(r,o,n,e):it(h)),(0,Ye.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,rr.b)(h=>{if(i.guardsResult=h.guardsResult,tp(h.guardsResult))throw BU(0,h.guardsResult);const m=new u8(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Yi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),FN(h=>{if(h.guards.canActivateChecks.length)return it(h).pipe((0,rr.b)(m=>{const y=new d8(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),Cr(m=>{let y=!1;return it(m).pipe(function v5(n,e){return(0,Pi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return it(t);let o=0;return(0,Dn.D)(i).pipe(Kd(c=>function b5(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!a2(i)&&(o[Bb]=i.title),function w5(n,e,t,r){const i=function E5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return it({});const o={};return(0,Dn.D)(i).pipe((0,Pi.z)(c=>function C5(n,e,t,r){const i=Kb(e)??r,o=Qg(n,i);return uh(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[c],e,t,r).pipe(Au(),(0,rr.b)(h=>{o[c]=h}))),gN(1),function N4(n){return(0,Ye.U)(()=>n)}(o),ch(c=>NN(c)?Pe.E:Vb(c)))}(o,n,e,r).pipe((0,Ye.U)(c=>(n._resolvedData=c,n.data=FU(n,t).resolve,i&&a2(i)&&(n.data[Bb]=i.title),null)))}(c.route,r,n,e)),(0,rr.b)(()=>o++),gN(1),(0,Pi.z)(c=>o===i.length?it(t):Pe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,rr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,rr.b)(m=>{const y=new h8(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}))}),FN(h=>{const m=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,rr.b)(T=>{y.component=T}),(0,Ye.U)(()=>{})));for(const T of y.children)C.push(...m(T));return C};return _(m(h.targetSnapshot.root)).pipe(RD(),Ke(1))}),FN(()=>this.afterPreactivation()),(0,Ye.U)(h=>{const m=function E8(n,e,t){const r=Wb(n,e._root,t?t._root:void 0);return new PU(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:m}}),(0,rr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Ye.U)(r=>(new k8(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,rr.b)({next(){o=!0},complete(){o=!0}}),_N(()=>{o||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ch(h=>{if(c=!0,HU(h)){jU(h)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new qD(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(m),jU(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f2(i.source)};this.scheduleNavigation(y,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new kU(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Pe.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const h={...o};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(kN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:m}=r,y=i||this.routerState.root,C=m?this.currentUrlTree.fragment:c;let T=null;switch(h){case"merge":T={...this.currentUrlTree.queryParams,...o};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=o||null}return null!==T&&(T=this.removeEmptyProps(T)),n8(y,this.currentUrlTree,t,T,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=tp(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function O5(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...k5}:!1===r?{...N5}:r,tp(t))return _U(this.currentUrlTree,t,i);const o=this.parseUrl(t);return _U(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new zb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let h,m,y;c?(h=c.resolve,m=c.reject,y=c.promise):y=new Promise((x,P)=>{h=x,m=P});const C=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:C,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:h,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new qD(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return function h2(){const n=(0,d.f3M)(wU),e=(0,d.f3M)(qb),t=(0,d.f3M)(xe),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),o=(0,d.f3M)(VN,{optional:!0})??[],c=(0,d.f3M)(LN,{optional:!0})??{},h=(0,d.f3M)(c2),m=(0,d.f3M)(l2,{optional:!0}),y=(0,d.f3M)(A5,{optional:!0}),C=(0,d.f3M)(I5,{optional:!0}),T=new ts(null,n,e,t,r,i,pU(o));return y&&(T.urlHandlingStrategy=y),C&&(T.routeReuseStrategy=C),T.titleStrategy=m??h,function P5(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,T),T}()},providedIn:"root"}),n})();function f2(n){return"imperative"!==n}function GN(){return(0,Un.e)((n,e)=>{let t,r=!1;n.subscribe((0,kn.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var mt,$5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ru={},zN=zN||{},Ft=$5||self;function sT(){}function oT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var WN="closure_uid_"+(1e9*Math.random()>>>0),z5=0;function W5(n,e,t){return n.call.apply(n.bind,arguments)}function q5(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ns(n,e,t){return(ns=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?W5:q5).apply(null,arguments)}function aT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Vi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function dh(){this.s=this.s,this.o=this.o}var Z5={};dh.prototype.s=!1,dh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function G5(n){return Object.prototype.hasOwnProperty.call(n,WN)&&n[WN]||(n[WN]=++z5)}(this);delete Z5[n]}},dh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function w2(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(oT(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let c=0;c<o;c++)n[i+c]=r[c]}else n.push(r)}}function rs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}rs.prototype.h=function(){this.defaultPrevented=!0};var Y5=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",sT,e),Ft.removeEventListener("test",sT,e)}catch{}return n}();function lT(n){return/^[\s\xa0]*$/.test(n)}var E2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function KN(n,e){return n<e?-1:n>e?1:0}function cT(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Cc(n){return-1!=cT().indexOf(n)}function ZN(n){return ZN[" "](n),n}ZN[" "]=sT;var uT,n,J5=Cc("Opera"),e_=Cc("Trident")||Cc("MSIE"),C2=Cc("Edge"),YN=C2||e_,I2=Cc("Gecko")&&!(-1!=cT().toLowerCase().indexOf("webkit")&&!Cc("Edge"))&&!(Cc("Trident")||Cc("MSIE"))&&!Cc("Edge"),X5=-1!=cT().toLowerCase().indexOf("webkit")&&!Cc("Edge");function D2(){var n=Ft.document;return n?n.documentMode:void 0}e:{var QN="",JN=(n=cT(),I2?/rv:([^\);]+)(\)|;)/.exec(n):C2?/Edge\/([\d\.]+)/.exec(n):e_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):X5?/WebKit\/(\S+)/.exec(n):J5?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(JN&&(QN=JN?JN[1]:""),e_){var XN=D2();if(null!=XN&&XN>parseFloat(QN)){uT=String(XN);break e}}uT=QN}var eK={};var nK=Ft.document&&e_&&(D2()||parseInt(uT,10))||void 0;function e0(n,e){if(rs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(I2){e:{try{ZN(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rK[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&e0.X.h.call(this)}}Vi(e0,rs);var rK={2:"touch",3:"pen",4:"mouse"};e0.prototype.h=function(){e0.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var t0="closure_listenable_"+(1e6*Math.random()|0),iK=0;function sK(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++iK,this.ba=this.ea=!1}function dT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function tP(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function S2(n){const e={};for(const t in n)e[t]=n[t];return e}const A2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<A2.length;o++)t=A2[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function hT(n){this.src=n,this.g={},this.h=0}function nP(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=b2(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(dT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rP(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==r)return i}return-1}hT.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=rP(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new sK(e,this.src,o,!!r,i)).ea=t,n.push(e)),e};var iP="closure_lm_"+(1e6*Math.random()|0),sP={};function x2(n,e,t,r,i){if(r&&r.once)return k2(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)x2(n,e[o],t,r,i);return null}return t=cP(t),n&&n[t0]?n.N(e,t,Xb(r)?!!r.capture:!!r,i):R2(n,e,t,!1,r,i)}function R2(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var c=Xb(i)?!!i.capture:!!i,h=aP(n);if(h||(n[iP]=h=new hT(n)),(t=h.add(e,t,r,c,o)).proxy)return t;if(r=function oK(){const e=aK;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Y5||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(P2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function k2(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)k2(n,e[o],t,r,i);return null}return t=cP(t),n&&n[t0]?n.O(e,t,Xb(r)?!!r.capture:!!r,i):R2(n,e,t,!0,r,i)}function N2(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)N2(n,e[o],t,r,i);else r=Xb(r)?!!r.capture:!!r,t=cP(t),n&&n[t0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rP(o=n.g[e],t,r,i))&&(dT(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=aP(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rP(e,t,r,i)),(t=-1<n?e[n]:null)&&oP(t))}function oP(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[t0])nP(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(P2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=aP(e))?(nP(t,n),0==t.h&&(t.src=null,e[iP]=null)):dT(n)}}}function P2(n){return n in sP?sP[n]:sP[n]="on"+n}function aK(n,e){if(n.ba)n=!0;else{e=new e0(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&oP(n),n=t.call(r,e)}return n}function aP(n){return(n=n[iP])instanceof hT?n:null}var lP="__closure_events_fn_"+(1e9*Math.random()>>>0);function cP(n){return"function"==typeof n?n:(n[lP]||(n[lP]=function(e){return n.handleEvent(e)}),n[lP])}function yi(){dh.call(this),this.i=new hT(this),this.P=this,this.I=null}function Bi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new rs(e,n);else if(e instanceof rs)e.target=e.target||n;else{var i=e;M2(e=new rs(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];i=fT(c,r,!0,e)&&i}if(i=fT(c=e.g=n,r,!0,e)&&i,i=fT(c,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=fT(c=e.g=t[o],r,!1,e)&&i}function fT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ba&&c.capture==t){var h=c.listener,m=c.ha||c.src;c.ea&&nP(n.i,c),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Vi(yi,dh),yi.prototype[t0]=!0,yi.prototype.removeEventListener=function(n,e,t,r){N2(this,n,e,t,r)},yi.prototype.M=function(){if(yi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dT(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uP=Ft.JSON.stringify;function lK(){var n=L2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var dP,O2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new uK,n=>n.reset());class uK{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dK(n){Ft.setTimeout(()=>{throw n},0)}function F2(n,e){dP||function hK(){var n=Ft.Promise.resolve(void 0);dP=function(){n.then(fK)}}(),hP||(dP(),hP=!0),L2.add(n,e)}var hP=!1,L2=new class cK{constructor(){this.h=this.g=null}add(e,t){const r=O2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fK(){for(var n;n=lK();){try{n.h.call(n.g)}catch(t){dK(t)}var e=O2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hP=!1}function pT(n,e){yi.call(this),this.h=n||1,this.g=e||Ft,this.j=ns(this.kb,this),this.l=Date.now()}function fP(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function pP(n,e,t){if("function"==typeof n)t&&(n=ns(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ns(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function V2(n){n.g=pP(()=>{n.g=null,n.i&&(n.i=!1,V2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vi(pT,yi),(mt=pT.prototype).ca=!1,mt.R=null,mt.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Bi(this,"tick"),this.ca&&(fP(this),this.start()))}},mt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){pT.X.M.call(this),fP(this),delete this.g};class pK extends dh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:V2(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function n0(n){dh.call(this),this.h=n,this.g={}}Vi(n0,dh);var B2=[];function U2(n,e,t,r){Array.isArray(t)||(t&&(B2[0]=t.toString()),t=B2);for(var i=0;i<t.length;i++){var o=x2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function j2(n){tP(n.g,function(e,t){this.g.hasOwnProperty(t)&&oP(e)},n),n.g={}}function mT(){this.g=!0}function t_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yK(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return uP(t)}catch{return e}}(n,t)+(r?" "+r:"")})}n0.prototype.M=function(){n0.X.M.call(this),j2(this)},n0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mT.prototype.Aa=function(){this.g=!1},mT.prototype.info=function(){};var rp={},H2=null;function gT(){return H2=H2||new yi}function $2(n){rs.call(this,rp.Oa,n)}function r0(n){const e=gT();Bi(e,new $2(e,n))}function G2(n,e){rs.call(this,rp.STAT_EVENT,n),this.stat=e}function As(n){const e=gT();Bi(e,new G2(e,n))}function z2(n,e){rs.call(this,rp.Pa,n),this.size=e}function s0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}rp.Oa="serverreachability",Vi($2,rs),rp.STAT_EVENT="statevent",Vi(G2,rs),rp.Pa="timingevent",Vi(z2,rs);var _T={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},W2={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mP(){}function K2(){}mP.prototype.h=null;var yP,o0={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function gP(){rs.call(this,"d")}function _P(){rs.call(this,"c")}function yT(){}function a0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new n0(this),this.O=vK,this.T=new pT(n=YN?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Z2}function Z2(){this.i=null,this.g="",this.h=!1}Vi(gP,rs),Vi(_P,rs),Vi(yT,mP),yT.prototype.g=function(){return new XMLHttpRequest},yT.prototype.i=function(){return{}},yP=new yT;var vK=45e3,vP={},vT={};function bP(n,e,t){n.K=1,n.v=CT(ku(e)),n.s=t,n.P=!0,Y2(n,null)}function Y2(n,e){n.F=Date.now(),l0(n),n.A=ku(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),oj(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Z2,n.g=xj(n.l,t?e:null,!n.s),0<n.N&&(n.L=new pK(ns(n.Ka,n,n.g),n.N)),U2(n.S,n.g,"readystatechange",n.hb),e=n.H?S2(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),r0(1),function mK(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var C=y[0];y=y[1];var T=C.split("_");c=2<=T.length&&"type"==T[1]?c+(C+"=")+y+"&":c+(C+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Q2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function J2(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bK(n,t),i==vT){4==e&&(n.o=4,As(14),r=!1),t_(n.j,n.m,null,"[Incomplete Response]");break}if(i==vP){n.o=4,As(15),t_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}t_(n.j,n.m,i,null),wP(n,i)}Q2(n)&&i!=vT&&i!=vP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,As(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),MP(e),e.K=!0,As(11))):(t_(n.j,n.m,t,"[Invalid Chunked Response]"),ip(n),c0(n))}function bK(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vT:(t=Number(e.substring(t,r)),isNaN(t)?vP:(r+=1)+t>e.length?vT:(e=e.substr(r,t),n.C=r+t,e))}function l0(n){n.V=Date.now()+n.O,X2(n,n.O)}function X2(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=s0(ns(n.fb,n),e)}function bT(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function c0(n){0==n.l.G||n.I||Tj(n.l,n)}function ip(n){bT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,fP(n.T),j2(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wP(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||EP(t.h,n)))if(!n.J&&EP(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;MT(t),ST(t)}AP(t),As(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=s0(ns(t.bb,t),6e3));if(1>=cj(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else op(t,11)}else if((n.J||t.g==n)&&MT(t),!lT(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const C=y[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const T=y[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const B=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var o=r.h;o.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(CP(o,o.h),o.h=null))}if(r.D){const Q=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.za=Q,ar(r.F,r.D,Q))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Mj(r,r.H?r.ka:null,r.V),c.J){uj(r.h,c);var h=c,m=r.J;m&&h.setTimeout(m),h.B&&(bT(h),l0(h)),r.g=c}else Ij(r);0<t.i.length&&AT(t)}else"stop"!=y[0]&&"close"!=y[0]||op(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?op(t,7):SP(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}r0(4)}catch{}}function ej(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(oT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function EK(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(oT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function wK(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(oT(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(mt=a0.prototype).setTimeout=function(n){this.O=n},mt.hb=function(n){n=n.target;const e=this.L;e&&3==Nu(n)?e.l():this.Ka(n)},mt.Ka=function(n){try{if(n==this.g)e:{const C=Nu(this.g);var e=this.g.Ea();const T=this.g.aa();if(!(3>C)&&(3!=C||YN||this.g&&(this.h.h||this.g.fa()||yj(this.g)))){this.I||4!=C||7==e||r0(8==e||0>=T?3:2),bT(this);var t=this.g.aa();this.Y=t;t:if(Q2(this)){var r=yj(this.g);n="";var i=r.length,o=4==Nu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ip(this),c0(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function gK(n,e,t,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lT(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,As(12),ip(this),c0(this);break e}t_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wP(this,t)}this.P?(J2(this,C,c),YN&&this.i&&3==C&&(U2(this.S,this.T,"tick",this.gb),this.T.start())):(t_(this.j,this.m,c,null),wP(this,c)),4==C&&ip(this),this.i&&!this.I&&(4==C?Tj(this.l,this):(this.i=!1,l0(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,As(12)):(this.o=0,As(13)),ip(this),c0(this)}}}catch{}},mt.gb=function(){if(this.g){var n=Nu(this.g),e=this.g.fa();this.C<e.length&&(bT(this),J2(this,n,e),this.i&&4!=n&&l0(this))}},mt.cancel=function(){this.I=!0,ip(this)},mt.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function _K(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(r0(3),As(17)),ip(this),this.o=2,c0(this)):X2(this,this.V-n)};var tj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof sp){this.h=void 0!==e?e:n.h,wT(this,n.j),this.s=n.s,this.g=n.g,ET(this,n.m),this.l=n.l,e=n.i;var t=new h0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),nj(this,t),this.o=n.o}else n&&(t=String(n).match(tj))?(this.h=!!e,wT(this,t[1]||"",!0),this.s=u0(t[2]||""),this.g=u0(t[3]||"",!0),ET(this,t[4]),this.l=u0(t[5]||"",!0),nj(this,t[6]||"",!0),this.o=u0(t[7]||"")):(this.h=!!e,this.i=new h0(null,this.h))}function ku(n){return new sp(n)}function wT(n,e,t){n.j=t?u0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ET(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nj(n,e,t){e instanceof h0?(n.i=e,function MK(n,e){e&&!n.j&&(hh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ij(this,r),oj(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=d0(e,SK)),n.i=new h0(e,n.h))}function ar(n,e,t){n.i.set(e,t)}function CT(n){return ar(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function u0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function d0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,IK),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function IK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}sp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(d0(e,rj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(d0(e,rj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(d0(t,"/"==t.charAt(0)?TK:DK,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",d0(t,AK)),n.join("")};var rj=/[#\/\?@]/g,DK=/[#\?:]/g,TK=/[#\?]/g,SK=/[#\?@]/g,AK=/#/g;function h0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hh(n){n.g||(n.g=new Map,n.h=0,n.i&&function CK(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ij(n,e){hh(n),e=n_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function sj(n,e){return hh(n),e=n_(n,e),n.g.has(e)}function oj(n,e,t){ij(n,e),0<t.length&&(n.i=null,n.g.set(n_(n,e),qN(t)),n.h+=t.length)}function n_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aj(n){this.l=n||RK,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ga&&Ft.g.Ga()&&Ft.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=h0.prototype).add=function(n,e){hh(this),this.i=null,n=n_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){hh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},mt.oa=function(){hh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},mt.W=function(n){hh(this);let e=[];if("string"==typeof n)sj(this,n)&&(e=e.concat(this.g.get(n_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},mt.set=function(n,e){return hh(this),this.i=null,sj(this,n=n_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=o;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var RK=10;function lj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cj(n){return n.h?1:n.g?n.g.size:0}function EP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function CP(n,e){n.g?n.g.add(e):n.h=e}function uj(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dj(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return qN(n.i)}function IP(){}function kK(){this.g=new IP}function NK(n,e,t){const r=t||"";try{ej(n,function(i,o){let c=i;Xb(i)&&(c=uP(i)),e.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function IT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function f0(n){this.l=n.$b||null,this.j=n.ib||!1}function DT(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=DP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aj.prototype.cancel=function(){if(this.i=dj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},IP.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},IP.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},Vi(f0,mP),f0.prototype.g=function(){return new DT(this.l,this.j)},f0.prototype.i=function(n){return function(){return n}}({}),Vi(DT,yi);var DP=0;function hj(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function p0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,m0(n)}function m0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=DT.prototype).open=function(n,e){if(this.readyState!=DP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,m0(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,p0(this)),this.readyState=DP},mt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,m0(this)),this.g&&(this.readyState=3,m0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hj(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},mt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?p0(this):m0(this),3==this.readyState&&hj(this)}},mt.Ua=function(n){this.g&&(this.response=this.responseText=n,p0(this))},mt.Ta=function(n){this.g&&(this.response=n,p0(this))},mt.ga=function(){this.g&&p0(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(DT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var OK=Ft.JSON.parse;function Hr(n){yi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fj,this.K=this.L=!1}Vi(Hr,yi);var fj="",FK=/^https?$/i,LK=["POST","PUT"];function pj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mj(n),TT(n)}function mj(n){n.D||(n.D=!0,Bi(n,"complete"),Bi(n,"error"))}function gj(n){if(n.h&&typeof zN<"u"&&(!n.C[1]||4!=Nu(n)||2!=n.aa()))if(n.v&&4==Nu(n))pP(n.Ha,0,n);else if(Bi(n,"readystatechange"),4==Nu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(tj)[1]||null;if(!i&&Ft.self&&Ft.self.location){var o=Ft.self.location.protocol;i=o.substr(0,o.length-1)}r=!FK.test(i?i.toLowerCase():"")}t=r}if(t)Bi(n,"complete"),Bi(n,"success");else{n.m=6;try{var c=2<Nu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",mj(n)}}finally{TT(n)}}}function TT(n,e){if(n.g){_j(n);const t=n.g,r=n.C[0]?sT:null;n.g=null,n.C=null,e||Bi(n,"ready");try{t.onreadystatechange=r}catch{}}}function _j(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Nu(n){return n.g?n.g.readyState:0}function yj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vj(n){let e="";return tP(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function TP(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=vj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ar(n,e,t))}function g0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function bj(n){this.Ca=0,this.i=[],this.j=new mT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=g0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=g0("baseRetryDelayMs",5e3,n),this.ab=g0("retryDelaySeedMs",1e4,n),this.Za=g0("forwardChannelMaxRetries",2,n),this.ta=g0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new aj(n&&n.concurrentRequestLimit),this.Fa=new kK,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function SP(n){if(wj(n),3==n.G){var e=n.U++,t=ku(n.F);ar(t,"SID",n.I),ar(t,"RID",e),ar(t,"TYPE","terminate"),_0(n,t),(e=new a0(n,n.j,e,void 0)).K=2,e.v=CT(ku(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=xj(e.l,null),e.g.da(e.v)),e.F=Date.now(),l0(e)}Aj(n)}function ST(n){n.g&&(MP(n),n.g.cancel(),n.g=null)}function wj(n){ST(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),MT(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function AT(n){lj(n.h)||n.m||(n.m=!0,F2(n.Ja,n),n.C=0)}function Ej(n,e){var t;t=e?e.m:n.U++;const r=ku(n.F);ar(r,"SID",n.I),ar(r,"RID",t),ar(r,"AID",n.T),_0(n,r),n.o&&n.s&&TP(r,n.o,n.s),t=new a0(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Cj(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),CP(n.h,t),bP(t,r,e)}function _0(n,e){n.ia&&tP(n.ia,function(t,r){ar(e,r,t)}),n.l&&ej({},function(t,r){ar(e,r,t)})}function Cj(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ns(n.l.Qa,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let m=0;m<t;m++){let y=i[m].h;const C=i[m].g;if(y-=o,0>y)o=Math.max(0,i[m].h-100),h=!1;else try{NK(C,c,"req"+y+"_")}catch{r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Ij(n){n.g||n.u||(n.Z=1,F2(n.Ia,n),n.A=0)}function AP(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=s0(ns(n.Ia,n),Sj(n,n.A)),n.A++,0))}function MP(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Dj(n){n.g=new a0(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ku(n.sa);ar(e,"RID","rpc"),ar(e,"SID",n.I),ar(e,"CI",n.L?"0":"1"),ar(e,"AID",n.T),ar(e,"TYPE","xmlhttp"),_0(n,e),n.o&&n.s&&TP(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=CT(ku(e)),t.s=null,t.P=!0,Y2(t,n)}function MT(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Tj(n,e){var t=null;if(n.g==e){MT(n),MP(n),n.g=null;var r=2}else{if(!EP(n.h,e))return;t=e.D,uj(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Bi(r=gT(),new z2(r,t,e,i)),AT(n)}else Ij(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function BK(n,e){return!(cj(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=s0(ns(n.Ja,n,e),Sj(n,n.C)),n.C++,0)))}(n,e)||2==r&&AP(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:op(n,5);break;case 4:op(n,10);break;case 3:op(n,6);break;default:op(n,2)}}function Sj(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function op(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ns(n.jb,n);t||(t=new sp("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||wT(t,"https"),CT(t)),function PK(n,e){const t=new mT;if(Ft.Image){const r=new Image;r.onload=aT(IT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=aT(IT,t,r,"TestLoadImage: error",!1,e),r.onabort=aT(IT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=aT(IT,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else As(2);n.G=0,n.l&&n.l.va(e),Aj(n),wj(n)}function Aj(n){if(n.G=0,n.la=[],n.l){const e=dj(n.h);(0!=e.length||0!=n.i.length)&&(w2(n.la,e),w2(n.la,n.i),n.h.i.length=0,qN(n.i),n.i.length=0),n.l.ua()}}function Mj(n,e,t){var r=t instanceof sp?ku(t):new sp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ET(r,r.m);else{var i=Ft.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new sp(null,void 0);r&&wT(o,r),e&&(o.g=e),i&&ET(o,i),t&&(o.l=t),r=o}return e=n.za,(t=n.D)&&e&&ar(r,t,e),ar(r,"VER",n.ma),_0(n,r),r}function xj(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(t&&n.Da&&!n.ra?new f0({ib:!0}):n.ra)).L=n.H,e}function Rj(){}function xT(){if(e_&&!(10<=Number(nK)))throw Error("Environmental error: no available transport.")}function Oo(n,e){yi.call(this),this.g=new bj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!lT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new r_(this)}function kj(n){gP.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Nj(){_P.call(this),this.status=1}function r_(n){this.g=n}(mt=Hr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yP.g(),this.C=function q2(n){return n.h||(n.h=n.i())}(this.u?this.u:yP),this.g.onreadystatechange=ns(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void pj(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Ft.FormData&&n instanceof Ft.FormData,!(0<=b2(LK,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of t)this.g.setRequestHeader(o,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_j(this),0<this.B&&((this.K=function VK(n){return e_&&function tK(){return function Q5(n){var e=eK;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=E2(String(uT)).split("."),t=E2("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",o=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=KN(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||KN(0==i[2].length,0==o[2].length)||KN(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ns(this.qa,this)):this.A=pP(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){pj(this,o)}},mt.qa=function(){typeof zN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bi(this,"complete"),Bi(this,"abort"),TT(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),TT(this,!0)),Hr.X.M.call(this)},mt.Ha=function(){this.s||(this.F||this.v||this.l?gj(this):this.eb())},mt.eb=function(){gj(this)},mt.aa=function(){try{return 2<Nu(this)?this.g.status:-1}catch{return-1}},mt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},mt.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),OK(e)}},mt.Ea=function(){return this.m},mt.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=bj.prototype).ma=8,mt.G=1,mt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new a0(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=S2(o),M2(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cj(this,i,e),ar(t=ku(this.F),"RID",n),ar(t,"CVER",22),this.D&&ar(t,"X-HTTP-Session-Id",this.D),_0(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(vj(o)))+"&"+e:this.o&&TP(t,this.o,o)),CP(this.h,i),this.Xa&&ar(t,"TYPE","init"),this.O?(ar(t,"$req",e),ar(t,"SID","null"),i.Z=!0,bP(i,t,null)):bP(i,t,e),this.G=2}}else 3==this.G&&(n?Ej(this,n):0==this.i.length||lj(this.h)||Ej(this))},mt.Ia=function(){if(this.u=null,Dj(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=s0(ns(this.cb,this),n)}},mt.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,As(10),ST(this),Dj(this))},mt.bb=function(){null!=this.v&&(this.v=null,ST(this),AP(this),As(19))},mt.jb=function(n){n?(this.j.info("Successfully pinged google.com"),As(2)):(this.j.info("Failed to ping google.com"),As(1))},(mt=Rj.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Qa=function(){},xT.prototype.g=function(n,e){return new Oo(n,e)},Vi(Oo,yi),Oo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;As(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Mj(n,null,n.V),AT(n)},Oo.prototype.close=function(){SP(this.g)},Oo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=uP(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&AT(e)},Oo.prototype.M=function(){this.g.l=null,delete this.j,SP(this.g),delete this.g,Oo.X.M.call(this)},Vi(kj,gP),Vi(Nj,_P),Vi(r_,Rj),r_.prototype.xa=function(){Bi(this.g,"a")},r_.prototype.wa=function(n){Bi(this.g,new kj(n))},r_.prototype.va=function(n){Bi(this.g,new Nj(n))},r_.prototype.ua=function(){Bi(this.g,"b")},xT.prototype.createWebChannel=xT.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,_T.NO_ERROR=0,_T.TIMEOUT=8,_T.HTTP_ERROR=6,W2.COMPLETE="complete",K2.EventType=o0,o0.OPEN="a",o0.CLOSE="b",o0.ERROR="c",o0.MESSAGE="d",yi.prototype.listen=yi.prototype.N,Hr.prototype.listenOnce=Hr.prototype.O,Hr.prototype.getLastError=Hr.prototype.Na,Hr.prototype.getLastErrorCode=Hr.prototype.Ea,Hr.prototype.getStatus=Hr.prototype.aa,Hr.prototype.getResponseJson=Hr.prototype.Ra,Hr.prototype.getResponseText=Hr.prototype.fa,Hr.prototype.send=Hr.prototype.da;var UK=Ru.createWebChannelTransport=function(){return new xT},jK=Ru.getStatEventTarget=function(){return gT()},xP=Ru.ErrorCode=_T,HK=Ru.EventType=W2,$K=Ru.Event=rp,Pj=Ru.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},GK=Ru.FetchXmlHttpFactory=f0,RT=Ru.WebChannel=K2,zK=Ru.XhrIo=Hr;const Oj="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let i_="9.10.0";const fh=new Ds.Yd("@firebase/firestore");function RP(){return fh.logLevel}function Le(n,...e){if(fh.logLevel<=Ds.in.DEBUG){const t=e.map(kP);fh.debug(`Firestore (${i_}): ${n}`,...t)}}function Nr(n,...e){if(fh.logLevel<=Ds.in.ERROR){const t=e.map(kP);fh.error(`Firestore (${i_}): ${n}`,...t)}}function ap(n,...e){if(fh.logLevel<=Ds.in.WARN){const t=e.map(kP);fh.warn(`Firestore (${i_}): ${n}`,...t)}}function kP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${i_}) INTERNAL ASSERTION FAILED: `+n;throw Nr(e),new Error(e)}function xt(n,e){n||ot()}function Qe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Fj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class ZK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YK{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new bi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,be.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},m=y=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new bi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new Fj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new vi(e)}}class QK{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(xt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class JK{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new QK(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XK{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=o=>{null!=o.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.A;return this.A=o.token,Le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?i(o):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.A=t.token,new Lj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Vj{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=eZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function s_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Bj(n){return n+"\0"}class lr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new lr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new lr(0,0))}static max(){return new St(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class y0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===y0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof y0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends y0{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const tZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends y0{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return tZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ne(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ne(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new Ne(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(un.fromString(e))}static fromName(e){return new Ze(un.fromString(e).popFirst(5))}static empty(){return new Ze(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new un(e.slice()))}}class kT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function NP(n){return n.fields.find(e=>2===e.kind)}function lp(n){return n.fields.filter(e=>2!==e.kind)}kT.UNKNOWN_ID=-1;class NT{constructor(e,t){this.fieldPath=e,this.kind=t}}class v0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new v0(0,Fo.min())}}function Uj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new lr(t+1,0):new lr(t,r));return new Fo(i,Ze.empty(),e)}function jj(n){return new Fo(n.readTime,n.key,-1)}class Fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fo(St.min(),Ze.empty(),-1)}static max(){return new Fo(St.max(),Ze.empty(),-1)}}function PP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const Hj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $j{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ph(n){return OP.apply(this,arguments)}function OP(){return OP=(0,be.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Hj)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),OP.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},m=>r(m))}),c=!0,o===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let m=0;m<o;m++){const y=m;t(e[y]).next(C=>{c[y]=C,++h,h===o&&r(c)},C=>i(C))}})}static doWhile(e,t){return new ce((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class PT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new bi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new b0(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=FP(r.target.error);this.P.reject(new b0(e,i))}}static open(e,t,r,i){try{return new PT(t,e.transaction(i,r))}catch(o){throw new b0(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sZ(t)}}class hl{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===hl.D((0,O.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),cp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,O.hl)())return!1;if(hl.N())return!0;const e=(0,O.z$)(),t=hl.D(e),r=0<t&&t<10,i=hl.k(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,be.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new b0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ne(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new b0(e,h))},o.onupgradeneeded=c=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,be.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.F(e);const m=PT.open(o.db,e,c?"readonly":"readwrite",r),y=i(m).next(C=>(m.V(),C)).catch(C=>(m.abort(C),ce.reject(C))).toPromise();return y.catch(()=>{}),yield m.v,y}catch(m){const y=m,C="FirebaseError"!==y.name&&h<3;if(Le("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),o.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iZ{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return cp(this.U.delete())}}class b0 extends Ne{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mh(n){return"IndexedDbTransactionError"===n.name}class sZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cp(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),cp(this.store.add(e))}get(e){return cp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),cp(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),cp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.H(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ce((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,c,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=o=>{const c=FP(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ce((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new iZ(h),y=t(h.primaryKey,h.value,m);if(y instanceof ce){const C=y.catch(T=>(m.done(),ce.reject(T)));r.push(C)}m.isDone?i():null===m.G?h.continue():h.continue(m.G)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cp(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=FP(r.target.error);t(i)}})}let Gj=!1;function FP(n){const e=hl.D((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gj||(Gj=!0,setTimeout(()=>{throw r},0)),r}}return n}class oZ{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){mh(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ph(r)}yield t.nt(6e4)}))}}class aZ{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,o=!0;return ce.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Le("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,o)).next(h=>(Le("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=jj(o);PP(c,r)>0&&(r=c)}),new Fo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Js{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function zj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function up(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Wj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Js.at=-1;class Tr{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new OT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new OT(this.root,e,this.comparator,!1)}getReverseIterator(){return new OT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new OT(this.root,e,this.comparator,!0)}}class OT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ui{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Ui.RED,this.left=i??Ui.EMPTY,this.right=o??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Ui(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1,Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qj(this.data.getIterator())}getIteratorFrom(e){return new qj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class qj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function o_(n){return n.hasNext()?n.getNext():void 0}class Lo{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new Lo([])}unionWith(e){let t=new Tn(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return s_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ni(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const cZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gh(n){if(xt(!!n),"string"==typeof n){let e=0;const t=cZ.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function dp(n){return"string"==typeof n?ni.fromBase64String(n):ni.fromUint8Array(n)}function LP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kj(n){const e=n.mapValue.fields.__previous_value__;return LP(e)?Kj(e):e}function w0(n){const e=gh(n.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}class uZ{constructor(e,t,r,i,o,c,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class _h{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _h("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _h&&e.projectId===this.projectId&&e.database===this.database}}function E0(n){return null==n}function C0(n){return 0===n&&1/n==-1/0}function Zj(n){return"number"==typeof n&&Number.isInteger(n)&&!C0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},FT={nullValue:"NULL_VALUE"};function hp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LP(n)?4:Xj(n)?9007199254740991:10:ot()}function Ic(n,e){if(n===e)return!0;const t=hp(n);if(t!==hp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return w0(n).isEqual(w0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=gh(r.timestampValue),c=gh(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,dp(n.bytesValue).isEqual(dp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Sr(r.doubleValue),c=Sr(i.doubleValue);return o===c?C0(o)===C0(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return s_(n.arrayValue.values||[],e.arrayValue.values||[],Ic);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(zj(o)!==zj(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!Ic(o[h],c[h])))return!1;return!0}(n,e);default:return ot()}var i}function I0(n,e){return void 0!==(n.values||[]).find(t=>Ic(t,e))}function vh(n,e){if(n===e)return 0;const t=hp(n),r=hp(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Sr(i.integerValue||i.doubleValue),h=Sr(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Yj(n.timestampValue,e.timestampValue);case 4:return Yj(w0(n),w0(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,o){const c=dp(i),h=dp(o);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let m=0;m<c.length&&m<h.length;m++){const y=Lt(c[m],h[m]);if(0!==y)return y}return Lt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Lt(Sr(i.latitude),Sr(o.latitude));return 0!==c?c:Lt(Sr(i.longitude),Sr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let m=0;m<c.length&&m<h.length;++m){const y=vh(c[m],h[m]);if(y)return y}return Lt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===yh.mapValue&&o===yh.mapValue)return 0;if(i===yh.mapValue)return 1;if(o===yh.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),m=o.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const T=Lt(h[C],y[C]);if(0!==T)return T;const x=vh(c[h[C]],m[y[C]]);if(0!==x)return x}return Lt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ot()}}function Yj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=gh(n),r=gh(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function a_(n){return VP(n)}function VP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=gh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?dp(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=VP(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${VP(r.fields[h])}`;return o+"}"}(n.mapValue):ot();var e}function fp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BP(n){return!!n&&"integerValue"in n}function D0(n){return!!n&&"arrayValue"in n}function Qj(n){return!!n&&"nullValue"in n}function Jj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function LT(n){return!!n&&"mapValue"in n}function T0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return up(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=T0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=T0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Xj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dZ(n){return"nullValue"in n?FT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fp(_h.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function hZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fp(_h.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yh:ot()}function eH(n,e){const t=vh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tH(n,e){const t=vh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ji{constructor(e){this.value=e}static empty(){return new ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!LT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=T0(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=T0(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());LT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];LT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){up(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ji(T0(this.value))}}function nH(n){const e=[];return up(n.fields,(t,r)=>{const i=new Dr([t]);if(LT(r)){const o=nH(r.mapValue).fields;if(0===o.length)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Lo(e)}class Gn{constructor(e,t,r,i,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Gn(e,0,St.min(),St.min(),ji.empty(),0)}static newFoundDocument(e,t,r){return new Gn(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new Gn(e,2,t,St.min(),ji.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,St.min(),ji.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fZ{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.ht=null}}function rH(n,e=null,t=[],r=[],i=null,o=null,c=null){return new fZ(n,e,t,r,i,o,c)}function pp(n){const e=Qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+a_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),E0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>a_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>a_(r)).join(",")),e.ht=t}return e.ht}function S0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!EZ(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ic(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lH(n.startAt,e.startAt)&&lH(n.endAt,e.endAt)}function VT(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function BT(n,e){return n.filters.filter(t=>t instanceof Hi&&t.field.isEqual(e))}function iH(n,e,t){let r=FT,i=!0;for(const o of BT(n,e)){let c=FT,h=!0;switch(o.op){case"<":case"<=":c=dZ(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=FT}eH({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];eH({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function sH(n,e,t){let r=yh,i=!0;for(const o of BT(n,e)){let c=yh,h=!0;switch(o.op){case">=":case">":c=hZ(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=yh}tH({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];tH({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Hi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new mZ(e,t,r):"array-contains"===t?new yZ(e,r):"in"===t?new vZ(e,r):"not-in"===t?new bZ(e,r):"array-contains-any"===t?new wZ(e,r):new Hi(e,t,r)}static lt(e,t,r){return"in"===t?new gZ(e,r):new _Z(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(vh(t,this.value)):null!==t&&hp(this.value)===hp(t)&&this.ft(vh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class mZ extends Hi{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.ft(t)}}class gZ extends Hi{constructor(e,t){super(e,"in",t),this.keys=oH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _Z extends Hi{constructor(e,t){super(e,"not-in",t),this.keys=oH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class yZ extends Hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return D0(t)&&I0(t.arrayValue,this.value)}}class vZ extends Hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&I0(this.value.arrayValue,t)}}class bZ extends Hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(I0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!I0(this.value.arrayValue,t)}}class wZ extends Hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!D0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>I0(this.value.arrayValue,r))}}class bh{constructor(e,t){this.position=e,this.inclusive=t}}class l_{constructor(e,t="asc"){this.field=e,this.dir=t}}function EZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function aH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(r=o.field.isKeyField()?Ze.comparator(Ze.fromName(c.referenceValue),t.key):vh(c,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function lH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ic(n.position[t],e.position[t]))return!1;return!0}class Pu{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=m,this._t=null,this.wt=null}}function cH(n,e,t,r,i,o,c,h){return new Pu(n,e,t,r,i,o,c,h)}function c_(n){return new Pu(n)}function uH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function UP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jP(n){for(const e of n.filters)if(e.dt())return e.field;return null}function HP(n){return null!==n.collectionGroup}function u_(n){const e=Qe(n);if(null===e._t){e._t=[];const t=jP(e),r=UP(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new l_(t)),e._t.push(new l_(Dr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e._t.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new l_(Dr.keyField(),o))}}}return e._t}function Xs(n){const e=Qe(n);if(!e.wt)if("F"===e.limitType)e.wt=rH(e.path,e.collectionGroup,u_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of u_(e))t.push(new l_(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new bh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new bh(e.startAt.position,e.startAt.inclusive):null;e.wt=rH(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function UT(n,e,t){return new Pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function A0(n,e){return S0(Xs(n),Xs(e))&&n.limitType===e.limitType}function dH(n){return`${pp(Xs(n))}|lt:${n.limitType}`}function $P(n){return`Query(target=${function pZ(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${a_(r.value)}`;var r}).join(", ")}]`),E0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>a_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>a_(t)).join(",")),`Target(${e})`}(Xs(n))}; limitType=${n.limitType})`}function GP(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,c){const h=aH(i,o,c);return i.inclusive?h<=0:h<0}(t.startAt,u_(t),r)||t.endAt&&!function(i,o,c){const h=aH(i,o,c);return i.inclusive?h>=0:h>0}(t.endAt,u_(t),r)));var t,r}function hH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fH(n){return(e,t)=>{let r=!1;for(const i of u_(n)){const o=CZ(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function CZ(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,o,c){const h=o.data.field(i),m=c.data.field(i);return null!==h&&null!==m?vh(h,m):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function pH(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:C0(e)?"-0":e}}function mH(n){return{integerValue:""+n}}function gH(n,e){return Zj(e)?mH(e):pH(n,e)}class jT{constructor(){this._=void 0}}function IZ(n,e,t){return n instanceof d_?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof mp?yH(n,e):n instanceof gp?vH(n,e):function(r,i){const o=_H(r,i),c=bH(o)+bH(r.yt);return BP(o)&&BP(r.yt)?mH(c):pH(r.It,c)}(n,e)}function DZ(n,e,t){return n instanceof mp?yH(n,e):n instanceof gp?vH(n,e):t}function _H(n,e){return n instanceof h_?BP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class d_ extends jT{}class mp extends jT{constructor(e){super(),this.elements=e}}function yH(n,e){const t=wH(e);for(const r of n.elements)t.some(i=>Ic(i,r))||t.push(r);return{arrayValue:{values:t}}}class gp extends jT{constructor(e){super(),this.elements=e}}function vH(n,e){let t=wH(e);for(const r of n.elements)t=t.filter(i=>!Ic(i,r));return{arrayValue:{values:t}}}class h_ extends jT{constructor(e,t){super(),this.It=e,this.yt=t}}function bH(n){return Sr(n.integerValue||n.doubleValue)}function wH(n){return D0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class M0{constructor(e,t){this.field=e,this.transform=t}}class SZ{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function HT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class $T{}function EH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new p_(n.key,cr.none()):new f_(n.key,n.data,cr.none());{const t=n.data,r=ji.empty();let i=new Tn(Dr.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);null===c&&o.length>1&&(o=o.popLast(),c=t.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new Ou(n.key,r,new Lo(i.toArray()),cr.none())}}function AZ(n,e,t){n instanceof f_?function(r,i,o){const c=r.value.clone(),h=DH(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ou?function(r,i,o){if(!HT(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=DH(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(IH(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function x0(n,e,t,r){return n instanceof f_?function(i,o,c,h){if(!HT(i.precondition,o))return c;const m=i.value.clone(),y=TH(i.fieldTransforms,h,o);return m.setAll(y),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ou?function(i,o,c,h){if(!HT(i.precondition,o))return c;const m=TH(i.fieldTransforms,h,o),y=o.data;return y.setAll(IH(i)),y.setAll(m),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,HT(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function MZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=_H(r.transform,i||null);null!=o&&(null===t&&(t=ji.empty()),t.set(r.field,o))}return t||null}function CH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&s_(t,r,(i,o)=>function TZ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mp&&r instanceof mp||t instanceof gp&&r instanceof gp?s_(t.elements,r.elements,Ic):t instanceof h_&&r instanceof h_?Ic(t.yt,r.yt):t instanceof d_&&r instanceof d_);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class f_ extends $T{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ou extends $T{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DH(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,DZ(c,h,t[i]))}return r}function TH(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,IZ(o,c,e))}return r}class p_ extends $T{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zP extends $T{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xZ{constructor(e){this.count=e}}var $r,dn;function SH(n){switch(n){default:return ot();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function AH(n){if(void 0===n)return Nr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case $r.OK:return pe.OK;case $r.CANCELLED:return pe.CANCELLED;case $r.UNKNOWN:return pe.UNKNOWN;case $r.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case $r.INTERNAL:return pe.INTERNAL;case $r.UNAVAILABLE:return pe.UNAVAILABLE;case $r.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case $r.NOT_FOUND:return pe.NOT_FOUND;case $r.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case $r.ABORTED:return pe.ABORTED;case $r.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case $r.DATA_LOSS:return pe.DATA_LOSS;default:return ot()}}(dn=$r||($r={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class wh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){up(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Wj(this.inner)}size(){return this.innerSize}}const RZ=new Tr(Ze.comparator);function eo(){return RZ}const MH=new Tr(Ze.comparator);function R0(...n){let e=MH;for(const t of n)e=e.insert(t.key,t);return e}function xH(n){let e=MH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Dc(){return k0()}function RH(){return k0()}function k0(){return new wh(n=>n.toString(),(n,e)=>n.isEqual(e))}const kZ=new Tr(Ze.comparator),NZ=new Tn(Ze.comparator);function Ht(...n){let e=NZ;for(const t of n)e=e.add(t);return e}const PZ=new Tn(Lt);function GT(){return PZ}class N0{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,P0.createSynthesizedTargetChangeForCurrentChange(e,t)),new N0(St.min(),r,GT(),eo(),Ht())}}class P0{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new P0(ni.EMPTY_BYTE_STRING,t,Ht(),Ht(),Ht())}}class zT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class kH{constructor(e,t){this.targetId=e,this.At=t}}class NH{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class PH{constructor(){this.Rt=0,this.bt=FH(),this.Pt=ni.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ht(),t=Ht(),r=Ht();return this.bt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot()}}),new P0(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=FH()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class OZ{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=eo(),this.qt=OH(),this.Kt=new Tn(Lt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const o=i.target;if(VT(o))if(0===r){const c=new Ze(o.path);this.jt(t,c,Gn.newNoDocument(c,St.min()))}else xt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((o,c)=>{const h=this.Xt(c);if(h){if(o.current&&VT(h.target)){const m=new Ze(h.target.path);null!==this.Ut.get(m)||this.ee(c,m)||this.jt(c,m,Gn.newNoDocument(m,e))}o.Dt&&(t.set(c,o.xt()),o.Nt())}});let r=Ht();this.qt.forEach((o,c)=>{let h=!0;c.forEachWhile(m=>{const y=this.Xt(m);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.Ut.forEach((o,c)=>c.setReadTime(e));const i=new N0(e,t,this.Kt,this.Ut,r);return this.Ut=eo(),this.qt=OH(),this.Kt=new Tn(Lt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new PH,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Tn(Lt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new PH),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function OH(){return new Tr(Ze.comparator)}function FH(){return new Tr(Ze.comparator)}const FZ={asc:"ASCENDING",desc:"DESCENDING"},LZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class VZ{constructor(e,t){this.databaseId=e,this.gt=t}}function O0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LH(n,e){return n.gt?e.toBase64():e.toUint8Array()}function BZ(n,e){return O0(n,e.toTimestamp())}function wi(n){return xt(!!n),St.fromTimestamp(function(e){const t=gh(e);return new lr(t.seconds,t.nanos)}(n))}function WP(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function VH(n){const e=un.fromString(n);return xt(qH(e)),e}function F0(n,e){return WP(n.databaseId,e.path)}function Tc(n,e){const t=VH(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(UH(t))}function qP(n,e){return WP(n.databaseId,e)}function BH(n){const e=VH(n);return 4===e.length?un.emptyPath():UH(e)}function L0(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UH(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jH(n,e,t){return{name:F0(n,e),fields:t.value.mapValue.fields}}function HH(n,e,t){const r=Tc(n,e.name),i=wi(e.updateTime),o=new ji({mapValue:{fields:e.fields}}),c=Gn.newFoundDocument(r,i,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function V0(n,e){let t;if(e instanceof f_)t={update:jH(n,e.key,e.value)};else if(e instanceof p_)t={delete:F0(n,e.key)};else if(e instanceof Ou)t={update:jH(n,e.key,e.data),updateMask:KZ(e.fieldMask)};else{if(!(e instanceof zP))return ot();t={verify:F0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof d_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof gp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof h_)return{fieldPath:o.field.canonicalString(),increment:c.yt};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:BZ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ot()),t;var i}function KP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?cr.updateTime(wi(i.updateTime)):void 0!==i.exists?cr.exists(i.exists):cr.none():cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),h=new d_):"appendMissingElements"in c?h=new mp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new gp(c.removeAllFromArray.values||[]):"increment"in c?h=new h_(o,c.increment):ot();const m=Dr.fromServerFormat(c.fieldPath);return new M0(m,h)}(n,i)):[];var i;if(e.update){const i=Tc(n,e.update.name),o=new ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Lo((e.updateMask.fieldPaths||[]).map(y=>Dr.fromServerFormat(y)));return new Ou(i,o,c,t,r)}return new f_(i,o,t,r)}if(e.delete){const i=Tc(n,e.delete);return new p_(i,t)}if(e.verify){const i=Tc(n,e.verify);return new zP(i,t)}return ot()}function $H(n,e){return{documents:[qP(n,e.path)]}}function GH(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=qP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=qP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const y=m.map(C=>function(T){if("=="===T.op){if(Jj(T.value))return{unaryFilter:{field:m_(T.field),op:"IS_NAN"}};if(Qj(T.value))return{unaryFilter:{field:m_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(Jj(T.value))return{unaryFilter:{field:m_(T.field),op:"IS_NOT_NAN"}};if(Qj(T.value))return{unaryFilter:{field:m_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:m_(T.field),op:zZ(T.op),value:T.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(m){if(0!==m.length)return m.map(y=>{return{field:m_((C=y).field),direction:GZ(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=(y=e.limit,n.gt||E0(y)?y:{value:y});var y,h,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function zH(n){let e=BH(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let o=[];t.where&&(o=WH(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new l_(g_((T=C).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(C){let T;return T="object"==typeof C?C.value:C,E0(T)?null:T}(t.limit));let m=null;var C;t.startAt&&(m=new bh((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new bh(C.values||[],!C.before)}(t.endAt)),cH(e,i,c,o,h,"F",m,y)}function WH(n){return n?void 0!==n.unaryFilter?[qZ(n)]:void 0!==n.fieldFilter?[WZ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>WH(e)).reduce((e,t)=>e.concat(t)):ot():[]}function GZ(n){return FZ[n]}function zZ(n){return LZ[n]}function m_(n){return{fieldPath:n.canonicalString()}}function g_(n){return Dr.fromServerFormat(n.fieldPath)}function WZ(n){return Hi.create(g_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function qZ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=g_(n.unaryFilter.field);return Hi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=g_(n.unaryFilter.field);return Hi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=g_(n.unaryFilter.field);return Hi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=g_(n.unaryFilter.field);return Hi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function KZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ms(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KH(e)),e=ZZ(n.get(t),e);return KH(e)}function ZZ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function KH(n){return n+"\x01\x01"}function Sc(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&ot(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:ot()}o=c+2}return new un(r)}const ZH=["userId","batchId"];function WT(n,e){return[n,Ms(e)]}function YH(n,e,t){return[n,Ms(e),t]}const YZ={},QZ=["prefixPath","collectionGroup","readTime","documentId"],JZ=["prefixPath","collectionGroup","documentId"],XZ=["collectionGroup","readTime","prefixPath","documentId"],e7=["canonicalId","targetId"],t7=["targetId","path"],n7=["path","targetId"],r7=["collectionId","parent"],s7=["indexId","uid"],o7=["uid","sequenceNumber"],a7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],l7=["indexId","uid","orderedDocumentKey"],c7=["userId","collectionPath","documentId"],u7=["userId","collectionPath","largestBatchId"],d7=["userId","collectionGroup","largestBatchId"],QH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],h7=[...QH,"documentOverlays"],JH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XH=JH,f7=[...XH,"indexConfiguration","indexState","indexEntries"];class ZP extends $j{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ei(n,e){const t=Qe(n);return hl.O(t.ie,e)}class YP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&AZ(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=x0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=x0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RH();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const m=EH(c,h);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&s_(this.mutations,e.mutations,(t,r)=>CH(t,r))&&s_(this.baseMutations,e.baseMutations,(t,r)=>CH(t,r))}}class QP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=kZ;const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new QP(e,t,r,i)}}class JP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Eh{constructor(e,t,r,i,o=St.min(),c=St.min(),h=ni.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Eh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class e${constructor(e){this.re=e}}function t$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:F0(i=n.re,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:O0(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_p(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:_p(e.version)}}var i,o;return r}function qT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _p(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yp(n){const e=new lr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function vp(n,e){const t=(e.baseMutations||[]).map(o=>KP(n.re,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(c.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>KP(n.re,o)),i=lr.fromMillis(e.localWriteTimeMs);return new YP(e.batchId,i,t,r)}function B0(n){const e=yp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?yp(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=Xs(c_(BH(i.documents[0])))):r=Xs(zH(n.query)),new Eh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ni.fromBase64String(n.resumeToken))}function n$(n,e){const t=_p(e.snapshotVersion),r=_p(e.lastLimboFreeSnapshotVersion);let i;i=VT(e.target)?$H(n.re,e.target):GH(n.re,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pp(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XP(n){const e=zH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?UT(e,e.limit,"L"):e}function eO(n,e){return new JP(e.largestBatchId,KP(n.re,e.overlayMutation))}function r$(n,e){const t=e.path.lastSegment();return[n,Ms(e.path.popLast()),t]}function i$(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:_p(r.readTime),documentKey:Ms(r.documentKey.path),largestBatchId:r.largestBatchId}}class m7{getBundleMetadata(e,t){return s$(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:yp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return s$(e).put({bundleId:(r=t).id,createTime:_p(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return o$(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:XP(i.bundledQuery),readTime:yp(i.readTime)};var i})}saveNamedQuery(e,t){return o$(e).put({name:(r=t).name,readTime:_p(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function s$(n){return Ei(n,"bundles")}function o$(n){return Ei(n,"namedQueries")}class KT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new KT(e,t.uid||"")}getOverlay(e,t){return U0(e).get(r$(this.userId,t)).next(r=>r?eO(this.It,r):null)}getOverlays(e,t){const r=Dc();return ce.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new JP(t,c);i.push(this.ue(e,h))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ms(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(U0(e).Y("collectionPathOverlayIndex",h))}),ce.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Dc(),o=Ms(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return U0(e).W("collectionPathOverlayIndex",c).next(h=>{for(const m of h){const y=eO(this.It,m);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Dc();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return U0(e).Z({index:"collectionGroupOverlayIndex",range:h},(m,y,C)=>{const T=eO(this.It,y);o.size()<i||T.largestBatchId===c?(o.set(T.getKey(),T),c=T.largestBatchId):C.done()}).next(()=>o)}ue(e,t){return U0(e).put(function(r,i,o){const[c,h,m]=r$(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:V0(r.re,o.mutation)}}(this.It,this.userId,t))}}function U0(n){return Ei(n,"documentOverlays")}class bp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),C0(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(dp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Xj(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ot()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function g7(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function a$(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=g7(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}bp.Te=new bp;class _7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=a$(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=a$(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class y7{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class v7{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class j0{constructor(){this.Be=new _7,this.Le=new y7(this.Be),this.Ue=new v7(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class wp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wp(this.indexId,this.documentKey,this.arrayValue,r)}}function Ep(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=l$(n.arrayValue,e.arrayValue),0!==t?t:(t=l$(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function l$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class b7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=NP(e);if(void 0!==t&&!this.ze(t))return!1;const r=lp(e);let i=0,o=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[o++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(o>=this.Ge.length||!this.Je(this.Ge[o++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class w7{constructor(){this.Ye=new tO}addToCollectionParentIndex(e,t){return this.Ye.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Fo.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class tO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(un.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(un.comparator)).toArray()}}const ZT=new Uint8Array(0);class E7{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new tO,this.Ze=new wh(r=>pp(r),(r,i)=>S0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const o={collectionId:r,parent:Ms(i)};return c$(e).put(o)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Bj(t),""],!1,!0);return c$(e).W(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Sc(c.parent))}return r})}addFieldIndex(e,t){const r=YT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const o=r.add(i);if(t.indexState){const c=$0(e);return o.next(h=>{c.put(i$(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=YT(e),i=$0(e),o=H0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=H0(e);let i=!0;const o=new Map;return ce.forEach(this.tn(t),c=>this.en(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Ht();const h=[];return ce.forEach(o,(m,y)=>{var C;Le("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${pp(t)}`);const T=function(nt,et){const Tt=NP(et);if(void 0===Tt)return null;for(const At of BT(nt,Tt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(y,m),x=function(nt,et){const Tt=new Map;for(const At of lp(et))for(const an of BT(nt,At.fieldPath))switch(an.op){case"==":case"in":Tt.set(At.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return Tt.set(At.fieldPath.canonicalString(),an.value),Array.from(Tt.values())}return null}(y,m),P=function(nt,et){const Tt=[];let At=!0;for(const an of lp(et)){const ks=0===an.kind?iH(nt,an.fieldPath,nt.startAt):sH(nt,an.fieldPath,nt.startAt);Tt.push(ks.value),At&&(At=ks.inclusive)}return new bh(Tt,At)}(y,m),B=function(nt,et){const Tt=[];let At=!0;for(const an of lp(et)){const ks=0===an.kind?sH(nt,an.fieldPath,nt.endAt):iH(nt,an.fieldPath,nt.endAt);Tt.push(ks.value),At&&(At=ks.inclusive)}return new bh(Tt,At)}(y,m),Q=this.nn(m,y,P),he=this.nn(m,y,B),ke=this.sn(m,y,x),ze=this.rn(m.indexId,T,Q,P.inclusive,he,B.inclusive,ke);return ce.forEach(ze,nt=>r.J(nt,t.limit).next(et=>{et.forEach(Tt=>{const At=Ze.fromSegments(Tt.documentKey);c.has(At)||(c=c.add(At),h.push(At))})}))}).next(()=>h)}return ce.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,o,c,h){const m=(null!=t?t.length:1)*Math.max(r.length,o.length),y=m/(null!=t?t.length:1),C=[];for(let T=0;T<m;++T){const x=t?this.on(t[T/y]):ZT,P=this.un(e,x,r[T%y],i),B=this.cn(e,x,o[T%y],c),Q=h.map(he=>this.un(e,x,he,!0));C.push(...this.createRange(P,B,Q))}return C}un(e,t,r,i){const o=new wp(e,Ze.empty(),t,r);return i?o:o.Ke()}cn(e,t,r,i){const o=new wp(e,Ze.empty(),t,r);return i?o.Ke():o}en(e,t){const r=new b7(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return ce.forEach(this.tn(t),i=>this.en(e,i).next(o=>{o?0!==r&&o.fields.length<function(c){let h=new Tn(Dr.comparator),m=!1;for(const y of c.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:h=h.add(C.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new j0;for(const i of lp(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const c=r.qe(i.kind);bp.Te.ce(o,c)}return r.$e()}on(e){const t=new j0;return bp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new j0;return bp.Te.ce(fp(this.databaseId,t),r.qe(function(i){const o=lp(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new j0);let o=0;for(const c of lp(e)){const h=r[o++];for(const m of i)if(this.ln(t,c.fieldPath)&&D0(h))i=this.fn(i,c,h);else{const y=m.qe(c.kind);bp.Te.ce(h,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const m=new j0;m.seed(h.$e()),bp.Te.ce(c,m.qe(t.kind)),o.push(m)}return o}ln(e,t){return!!e.filters.find(r=>r instanceof Hi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=YT(e),i=$0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(o=>{const c=[];return ce.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(y,C){const T=C?new v0(C.sequenceNumber,new Fo(yp(C.readTime),new Ze(Sc(C.documentKey)),C.largestBatchId)):v0.empty(),x=y.fields.map(([P,B])=>new NT(Dr.fromServerFormat(P),B));return new kT(y.indexId,y.collectionGroup,x,T)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=YT(e),o=$0(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ce.forEach(h,m=>o.put(i$(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ce.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ce.forEach(h,m=>this.wn(e,i,m).next(y=>{const C=this.mn(o,m);return y.isEqual(C)?ce.resolve():this.gn(e,o,m,y,C)}))))})}yn(e,t,r,i){return H0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return H0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=H0(e);let o=new Tn(Ep);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,h)=>{o=o.add(new wp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}mn(e,t){let r=new Tn(Ep);const i=this.an(t,e);if(null==i)return r;const o=NP(t);if(null!=o){const c=e.data.field(o.fieldPath);if(D0(c))for(const h of c.arrayValue.values||[])r=r.add(new wp(t.indexId,e.key,this.on(h),i))}else r=r.add(new wp(t.indexId,e.key,ZT,i));return r}gn(e,t,r,i,o){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,m,y,C,T){const x=h.getIterator(),P=m.getIterator();let B=o_(x),Q=o_(P);for(;B||Q;){let he=!1,ke=!1;if(B&&Q){const ze=y(B,Q);ze<0?ke=!0:ze>0&&(he=!0)}else null!=B?ke=!0:he=!0;he?(C(Q),Q=o_(P)):ke?(T(B),B=o_(x)):(B=o_(x),Q=o_(P))}}(i,o,Ep,h=>{c.push(this.yn(e,t,r,h))},h=>{c.push(this.pn(e,t,r,h))}),ce.waitFor(c)}_n(e){let t=1;return $0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Ep(c,h)).filter((c,h,m)=>!h||0!==Ep(c,m[h-1]));const i=[];i.push(e);for(const c of r){const h=Ep(c,e),m=Ep(c,t);if(0===h)i[0]=e.Ke();else if(h>0&&m<0)i.push(c),i.push(c.Ke());else if(m>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,ZT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,ZT,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(u$)}getMinOffset(e,t){return ce.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ot())).next(u$)}}function c$(n){return Ei(n,"collectionParents")}function H0(n){return Ei(n,"indexEntries")}function YT(n){return Ei(n,"indexConfiguration")}function $0(n){return Ei(n,"indexState")}function u$(n){xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;PP(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fo(e.readTime,e.documentKey,t)}const d$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new to(e,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function h$(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.Z({range:c},(C,T,x)=>(h++,x.delete()));o.push(m.next(()=>{xt(1===h)}));const y=[];for(const C of t.mutations){const T=YH(e,C.key.path,t.batchId);o.push(i.delete(T)),y.push(C.key)}return ce.waitFor(o).next(()=>y)}function QT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class JT{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){xt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new JT(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ch(e).Z({index:"userMutationsIndex",range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=__(e),c=Ch(e);return c.add({}).next(h=>{xt("number"==typeof h);const m=new YP(h,t,r,i),y=function(x,P,B){const Q=B.baseMutations.map(ke=>V0(x.re,ke)),he=B.mutations.map(ke=>V0(x.re,ke));return{userId:P,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Q,mutations:he}}(this.It,this.userId,m),C=[];let T=new Tn((x,P)=>Lt(x.canonicalString(),P.canonicalString()));for(const x of i){const P=YH(this.userId,x.key.path,h);T=T.add(x.key.path.popLast()),C.push(c.put(y)),C.push(o.put(P,YZ))}return T.forEach(x=>{C.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[h]=m.keys()}),ce.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return Ch(e).get(t).next(r=>r?(xt(r.userId===this.userId),vp(this.It,r)):null)}Tn(e,t){return this.In[t]?ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ch(e).Z({index:"userMutationsIndex",range:i},(c,h,m)=>{h.userId===this.userId&&(xt(h.batchId>=r),o=vp(this.It,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ch(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ch(e).W("userMutationsIndex",t).next(r=>r.map(i=>vp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=WT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return __(e).Z({range:i},(c,h,m)=>{const[y,C,T]=c,x=Sc(C);if(y===this.userId&&t.path.isEqual(x))return Ch(e).get(T).next(P=>{if(!P)throw ot();xt(P.userId===this.userId),o.push(vp(this.It,P))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Lt);const i=[];return t.forEach(o=>{const c=WT(this.userId,o.path),h=IDBKeyRange.lowerBound(c),m=__(e).Z({range:h},(y,C,T)=>{const[x,P,B]=y,Q=Sc(P);x===this.userId&&o.path.isEqual(Q)?r=r.add(B):T.done()});i.push(m)}),ce.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=WT(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new Tn(Lt);return __(e).Z({range:c},(m,y,C)=>{const[T,x,P]=m,B=Sc(x);T===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(P)):C.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Ch(e).get(o).next(c=>{if(null===c)throw ot();xt(c.userId===this.userId),r.push(vp(this.It,c))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return h$(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return __(e).Z({range:r},(o,c,h)=>{if(o[0]===this.userId){const m=Sc(o[1]);i.push(m)}else h.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return f$(e,this.userId,t)}Rn(e){return p$(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function f$(n,e,t){const r=WT(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return __(n).Z({range:o,X:!0},(h,m,y)=>{const[C,T,x]=h;C===e&&T===i&&(c=!0),y.done()}).next(()=>c)}function Ch(n){return Ei(n,"mutations")}function __(n){return Ei(n,"documentMutations")}function p$(n){return Ei(n,"mutationQueues")}class Cp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Cp(0)}static vn(){return new Cp(-1)}}class C7{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Cp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>St.fromTimestamp(new lr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>y_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return y_(e).Z((c,h)=>{const m=B0(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>ce.waitFor(o)).next(()=>i)}forEachTarget(e,t){return y_(e).Z((r,i)=>{const o=B0(i);t(o)})}Vn(e){return m$(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}Sn(e,t){return m$(e).put("targetGlobalKey",t)}Dn(e,t){return y_(e).put(n$(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=pp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return y_(e).Z({range:i,index:"queryTargetsIndex"},(c,h,m)=>{const y=B0(h);S0(t,y.target)&&(o=y,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Ih(e);return t.forEach(c=>{const h=Ms(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ih(e);return ce.forEach(t,o=>{const c=Ms(o.path);return ce.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Ih(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ih(e);let o=Ht();return i.Z({range:r,X:!0},(c,h,m)=>{const y=Sc(c[1]),C=new Ze(y);o=o.add(C)}).next(()=>o)}containsKey(e,t){const r=Ms(t.path),i=IDBKeyRange.bound([r],[Bj(r)],!1,!0);let o=0;return Ih(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,h],m,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}se(e,t){return y_(e).get(t).next(r=>r?B0(r):null)}}function y_(n){return Ei(n,"targets")}function m$(n){return Ei(n,"targetGlobal")}function Ih(n){return Ei(n,"targetDocuments")}function g$([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class I7{constructor(e){this.xn=e,this.buffer=new Tn(g$),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();g$(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class D7{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){mh(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ph(r)}yield t.Fn(3e5)}))}}class T7{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Js.at);const r=new I7(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(d$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d$):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,o,c,h,m,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,c=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,t))).next(T=>(o=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),RP()<=Ds.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(m-h)+`ms\n\tRemoved ${T} documents in `+(y-m)+`ms\nTotal Duration: ${y-C}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:T})))}}class S7{constructor(e,t){this.db=e,this.garbageCollector=new T7(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return XT(e,r)}removeReference(e,t,r){return XT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return XT(e,t)}Gn(e,t){return function(r,i){let o=!1;return p$(r).tt(c=>f$(r,c,i).next(h=>(h&&(o=!0),ce.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Kn(e,(c,h)=>{if(h<=t){const m=this.Gn(e,c).next(y=>{if(!y)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,St.min()),Ih(e).delete([0,Ms(c.path)])))});i.push(m)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return XT(e,t)}Kn(e,t){const r=Ih(e);let i,o=Js.at;return r.Z({index:"documentTargetsIndex"},([c,h],{path:m,sequenceNumber:y})=>{0===c?(o!==Js.at&&t(new Ze(Sc(i)),o),o=y,i=m):o=Js.at}).next(()=>{o!==Js.at&&t(new Ze(Sc(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function XT(n,e){return Ih(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:r}));var r}class _${constructor(){this.changes=new wh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class A7{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ip(e).put(r)}removeEntry(e,t,r){return Ip(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],qT(o),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return Ip(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(G0(t))},(i,o)=>{r=this.jn(t,o)}).next(()=>r)}Wn(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return Ip(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(G0(t))},(i,o)=>{r={document:this.jn(t,o),size:QT(o)}}).next(()=>r)}getEntries(e,t){let r=eo();return this.zn(e,t,(i,o)=>{const c=this.jn(i,o);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=eo(),i=new Tr(Ze.comparator);return this.zn(e,t,(o,c)=>{const h=this.jn(o,c);r=r.insert(o,h),i=i.insert(o,QT(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Tn(w$);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(G0(i.first()),G0(i.last())),c=i.getIterator();let h=c.getNext();return Ip(e).Z({index:"documentKeyIndex",range:o},(m,y,C)=>{const T=Ze.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&w$(h,T)<0;)r(h,null),h=c.getNext();h&&h.isEqual(T)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?C.j(G0(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),qT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ip(e).W(IDBKeyRange.bound(i,o,!0)).next(c=>{let h=eo();for(const m of c){const y=this.jn(Ze.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let o=eo();const c=b$(t,r),h=b$(t,Fo.max());return Ip(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(m,y,C)=>{const T=this.jn(Ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(T.key,T),o.size===i&&C.done()}).next(()=>o)}newChangeBuffer(e){return new M7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return v$(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Qn(e,t){return v$(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function p7(n,e){let t;if(e.document)t=HH(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=yp(e.noDocument.readTime);t=Gn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=Ze.fromSegments(e.unknownDocument.path),i=yp(e.unknownDocument.version);t=Gn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new lr(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return Gn.newInvalidDocument(e)}}function y$(n){return new A7(n)}class M7 extends _${constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new wh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Tn((o,c)=>Lt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,h.readTime)),c.isValidDocument()){const m=t$(this.Yn.It,c);i=i.add(o.path.popLast()),r+=QT(m)-h.size,t.push(this.Yn.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=t$(this.Yn.It,c.convertToNoDocument(St.min()));t.push(this.Yn.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((o,c)=>{this.Xn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function v$(n){return Ei(n,"remoteDocumentGlobal")}function Ip(n){return Ei(n,"remoteDocumentsV14")}function G0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function b$(n,e){const t=e.documentKey.path.toArray();return[n,qT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function w$(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Lt(t[o],r[o]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class x7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class E${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&x0(r.mutation,i,Lo.empty(),lr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const i=Dc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=R0();return o.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Dc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=eo();const c=k0(),h=k0();return t.forEach((m,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof Ou)?o=o.insert(y.key,y):void 0!==C&&(c.set(y.key,C.mutation.getFieldMask()),x0(C.mutation,y,C.mutation.getFieldMask(),lr.now()))}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((y,C)=>c.set(y,C)),t.forEach((y,C)=>{var T;return h.set(y,new x7(C,null!==(T=c.get(y))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(e,t){const r=k0();let i=new Tr((c,h)=>c-h),o=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const y=t.get(m);if(null===y)return;let C=r.get(m)||Lo.empty();C=h.applyToLocalView(y,C),r.set(m,C);const T=(i.get(h.batchId)||Ht()).add(m);i=i.insert(h.batchId,T)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,C=m.value,T=RH();C.forEach(x=>{if(!o.has(x)){const P=EH(t.get(x),r.get(x));null!==P&&T.set(x,P),o=o.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ce.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):HP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ce.resolve(Dc());let h=-1,m=o;return c.next(y=>ce.forEach(y,(C,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(C)?ce.resolve():this.getBaseDocument(e,C,T).next(x=>{m=m.insert(C,x)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,m,y,Ht())).next(C=>({batchId:h,changes:xH(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=R0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=R0();return this.indexManager.getCollectionParents(e,i).next(c=>ce.forEach(c,h=>{const m=(y=t,C=h.child(i),new Pu(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(y=>{y.forEach((C,T)=>{o=o.insert(C,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((h,m)=>{const y=m.getKey();null===i.get(y)&&(i=i.insert(y,Gn.newInvalidDocument(y)))});let c=R0();return i.forEach((h,m)=>{const y=o.get(h);void 0!==y&&x0(y.mutation,m,Lo.empty(),lr.now()),GP(t,m)&&(c=c.insert(h,m))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(Gn.newInvalidDocument(t))}}class R7{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:XP(r.bundledQuery),readTime:wi(r.readTime)}),ce.resolve();var r}}class k7{constructor(){this.overlays=new Tr(Ze.comparator),this.es=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Dc();return ce.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ue(e,t,o)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Dc(),o=t.length+1,c=new Ze(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Tr((y,C)=>y-C);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=o.get(y.largestBatchId);null===C&&(C=Dc(),o=o.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=Dc(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=i)););return ce.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new JP(t,r));let o=this.es.get(t);void 0===o&&(o=Ht(),this.es.set(t,o)),this.es.set(t,o.add(r.key))}}class nO{constructor(){this.ns=new Tn(Ci.ss),this.rs=new Tn(Ci.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ci(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ci(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new un([])),r=new Ci(t,e),i=new Ci(t,e+1),o=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),o.push(c.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new un([])),r=new Ci(t,e),i=new Ci(t,e+1);let o=Ht();return this.rs.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Ci(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ci{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class N7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Tn(Ci.ss)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.ws;this.ws++;const c=new YP(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.gs=this.gs.add(new Ci(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),o=i<0?0:i;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ci(t,0),i=new Ci(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([r,i],c=>{const h=this.ys(c._s);o.push(h)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Lt);return t.forEach(i=>{const o=new Ci(i,0),c=new Ci(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,c],h=>{r=r.add(h._s)})}),ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ze.isDocumentKey(o)||(o=o.child(""));const c=new Ci(new Ze(o),0);let h=new Tn(Lt);return this.gs.forEachWhile(m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(m._s)),!0)},c),ce.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ce.forEach(t.mutations,i=>{const o=new Ci(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ci(t,0),i=this.gs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class P7{constructor(e){this.Es=e,this.docs=new Tr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=eo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=eo();const o=new Ze(t.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||PP(jj(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ot()}As(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new O7(this)}getSize(e){return ce.resolve(this.size)}}class O7 extends _${constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class F7{constructor(e){this.persistence=e,this.Rs=new wh(t=>pp(t),S0),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.bs=0,this.Ps=new nO,this.targetCount=0,this.vs=Cp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Cp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Dn(t),ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ce.waitFor(o).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ce.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Ps.containsKey(t))}}class C${constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Js(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new F7(this),this.indexManager=new w7,this.remoteDocumentCache=new P7(r=>this.referenceDelegate.xs(r)),this.It=new e$(t),this.Ns=new R7(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new N7(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new L7(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(o=>this.referenceDelegate.Ms(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Os(e,t){return ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class L7 extends $j{constructor(e){super(),this.currentSequenceNumber=e}}class eS{constructor(e){this.persistence=e,this.Fs=new nO,this.$s=null}static Bs(e){return new eS(e)}get Ls(){if(this.$s)return this.$s;throw ot()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ls.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,r=>{const i=Ze.fromPath(r);return this.Us(e,i).next(o=>{o||t.removeEntry(i,St.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ce.or([()=>ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class V7{constructor(e){this.It=e}$(e,t,r,i){const o=new PT("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZH,{unique:!0}),h.createObjectStore("documentMutations"),I$(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),I$(e)),c=c.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,m){return m.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZH,{unique:!0});const C=m.store("mutations"),T=y.map(x=>C.put(x));return ce.waitFor(T)})}(e,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(o))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:c7});m.createIndex("collectionPathOverlayIndex",u7,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",d7,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:QZ});m.createIndex("documentKeyIndex",JZ),m.createIndex("collectionGroupIndex",XZ)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,o))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:s7}).createIndex("sequenceNumberIndex",o7,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:a7}).createIndex("documentKeyIndex",l7,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=QT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ce.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>ce.forEach(h,m=>{xt(m.userId===o.userId);const y=vp(this.It,m);return h$(e,o.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Z((c,h)=>{const m=new un(c),y=[0,Ms(m)];o.push(t.get(y).next(C=>C?ce.resolve():t.put({targetId:0,path:Ms(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:r7});const r=t.store("collectionParents"),i=new tO,o=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:Ms(m)})}};return t.store("remoteDocuments").Z({X:!0},(c,h)=>{const m=new un(c);return o(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,h,m],y)=>{const C=Sc(h);return o(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const o=B0(i),c=n$(this.It,o);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((o,c)=>{const h=t.store("remoteDocumentsV14"),m=(y=c,y.document?new Ze(un.fromString(y.document.name).popFirst(5)):y.noDocument?Ze.fromSegments(y.noDocument.path):y.unknownDocument?Ze.fromSegments(y.unknownDocument.path):ot()).path.toArray();var y;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>ce.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=y$(this.It),o=new C$(eS.Bs,this.It.re);return r.W().next(c=>{const h=new Map;return c.forEach(m=>{var y;let C=null!==(y=h.get(m.userId))&&void 0!==y?y:Ht();vp(this.It,m).keys().forEach(T=>C=C.add(T)),h.set(m.userId,C)}),ce.forEach(h,(m,y)=>{const C=new vi(y),T=KT.oe(this.It,C),x=o.getIndexManager(C),P=JT.oe(C,this.It,x,o.referenceDelegate);return new E$(i,P,T,x).recalculateAndSaveOverlaysForDocumentKeys(new ZP(t,Js.at),m).next()})})}}function I$(n){n.createObjectStore("targetDocuments",{keyPath:t7}).createIndex("documentTargetsIndex",n7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",e7,{unique:!0}),n.createObjectStore("targetGlobal")}const rO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iO{constructor(e,t,r,i,o,c,h,m,y,C,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=o,this.window=c,this.document=h,this.Js=y,this.Ys=C,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!iO.C())throw new Ne(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new S7(this,i),this.ii=t+"main",this.It=new e$(m),this.ri=new hl(this.ii,this.Xs,new V7(this.It)),this.Cs=new C7(this.referenceDelegate,this.It),this.remoteDocumentCache=y$(this.It),this.Ns=new m7,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(pe.FAILED_PRECONDITION,rO);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Js(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(mh(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return z0(e).get("owner").next(t=>ce.resolve(this.mi(t)))}gi(e){return tS(e).delete(this.clientId)}yi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ei(r,"clientMetadata");return i.W().next(o=>{const c=e.Ii(o,18e5),h=o.filter(m=>-1===c.indexOf(m));return ce.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ce.resolve(!0):z0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(pe.FAILED_PRECONDITION,rO);return!1}}return!(!this.networkEnabled||!this.inForeground)||tS(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ZP(t,Js.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>tS(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return JT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new E7(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return KT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(c=this.Xs)?f7:14===c?XH:13===c?JH:12===c?h7:11===c?QH:void ot();var c;let h;return this.ri.runTransaction(e,i,o,m=>(h=new ZP(m,this.Ss?this.Ss.next():Js.at),"readwrite-primary"===t?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(pe.FAILED_PRECONDITION,Hj);return r(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Vi(e){return z0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(pe.FAILED_PRECONDITION,rO)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return z0(e).put("owner",t)}static C(){return hl.C()}_i(e){const t=z0(e);return t.get("owner").next(r=>this.mi(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function z0(n){return Ei(n,"owner")}function tS(n){return Ei(n,"clientMetadata")}function sO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class oO{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Ht(),i=Ht();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new oO(e,t.fromCache,r,i)}}class D${constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(o=>o||this.Mi(e,t,i,r)).next(o=>o||this.Oi(e,t))}ki(e,t){if(uH(t))return ce.resolve(null);let r=Xs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=UT(t,null,"F"),r=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Ht(...o);return this.Ni.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const y=this.Fi(t,h);return this.$i(t,y,c,m.readTime)?this.ki(e,UT(t,null,"F")):this.Bi(e,y,t,m)}))})))}Mi(e,t,r,i){return uH(t)||i.isEqual(St.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(o=>{const c=this.Fi(t,o);return this.$i(t,c,r,i)?this.Oi(e,t):(RP()<=Ds.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$P(t)),this.Bi(e,c,t,Uj(i,-1)))})}Fi(e,t){let r=new Tn(fH(e));return t.forEach((i,o)=>{GP(e,o)&&(r=r.add(o))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Oi(e,t){return RP()<=Ds.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",$P(t)),this.Ni.getDocumentsMatchingQuery(e,t,Fo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class B7{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Tr(Lt),this.qi=new wh(o=>pp(o),S0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E$(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function T$(n,e,t,r){return new B7(n,e,t,r)}function S$(n,e){return aO.apply(this,arguments)}function aO(){return aO=(0,be.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let m=Ht();for(const y of i){c.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}for(const y of o){h.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:h}))})})}),aO.apply(this,arguments)}function U7(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,m,y){const C=m.batch,T=C.keys();let x=ce.resolve();return T.forEach(P=>{x=x.next(()=>y.getEntry(h,P)).next(B=>{const Q=m.docVersions.get(P);xt(null!==Q),B.version.compareTo(Q)<0&&(C.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,C))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ht();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(h=h.add(c.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function A$(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function j7(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((C,T)=>{const x=i.get(T);if(!x)return;h.push(t.Cs.removeMatchingKeys(o,C.removedDocuments,T).next(()=>t.Cs.addMatchingKeys(o,C.addedDocuments,T)));let P=x.withSequenceNumber(o.currentSequenceNumber);var B,Q,he;e.targetMismatches.has(T)?P=P.withResumeToken(ni.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):C.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(C.resumeToken,r)),i=i.insert(T,P),Q=P,he=C,(0===(B=x).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(o,P))});let m=eo(),y=Ht();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,C))}),h.push(M$(o,c,e.documentUpdates).next(C=>{m=C.Wi,y=C.zi})),!r.isEqual(St.min())){const C=t.Cs.getLastRemoteSnapshotVersion(o).next(T=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(C)}return ce.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,y)).next(()=>m)}).then(o=>(t.Ui=i,o))}function M$(n,e,t){let r=Ht(),i=Ht();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=eo();return t.forEach((h,m)=>{const y=o.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(St.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||0===m.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Le("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)}),{Wi:c,zi:i}})}function H7(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function v_(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(o=>o?(i=o,ce.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Eh(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function b_(n,e,t){return lO.apply(this,arguments)}function lO(){return lO=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=r.Ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!mh(c))throw c;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),lO.apply(this,arguments)}function nS(n,e,t){const r=Qe(n);let i=St.min(),o=Ht();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,m,y){const C=Qe(h),T=C.qi.get(y);return void 0!==T?ce.resolve(C.Ui.get(T)):C.Cs.getTargetData(m,y)}(r,c,Xs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,h.targetId).next(m=>{o=m})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:St.min(),t?o:Ht())).next(h=>(k$(r,hH(e),h),{documents:h,Hi:o})))}function x$(n,e){const t=Qe(n),r=Qe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.se(o,e).next(c=>c?c.target:null))}function R$(n,e){const t=Qe(n),r=t.Ki.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Uj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(k$(t,e,i),i))}function k$(n,e,t){let r=St.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ki.set(e,r)}function cO(){return cO=(0,be.Z)(function*(n,e,t,r){const i=Qe(n);let o=Ht(),c=eo();for(const y of t){const C=e.Ji(y.metadata.name);y.document&&(o=o.add(C));const T=e.Yi(y);T.setReadTime(e.Xi(y.metadata.readTime)),c=c.insert(C,T)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield v_(i,(y=r,Xs(c_(un.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>M$(y,h,c).next(C=>(h.apply(y),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>i.Cs.addMatchingKeys(y,o,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.Wi,C.zi)).next(()=>C.Wi)))}),cO.apply(this,arguments)}function G7(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,be.Z)(function*(n,e,t=Ht()){const r=yield v_(n,Xs(XP(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=wi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(o,e);const h=r.withResumeToken(ni.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(o,h).next(()=>i.Cs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Cs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(o,e))})}),uO.apply(this,arguments)}function N$(n,e){return`firestore_clients_${n}_${e}`}function P$(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function dO(n,e){return`firestore_targets_${n}_${e}`}class rS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Ne(i.error.code,i.error.message))),c?new rS(e,t,i.state,o):(Nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class W0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ne(r.error.code,r.error.message))),o?new W0(e,r.state,i):(Nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=GT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Zj(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new iS(e,o):(Nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class hO{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new hO(t.clientId,t.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fO{constructor(){this.activeTargetIds=GT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pO{constructor(e,t,r,i,o){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Tr(Lt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=N$(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new fO),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const o=e.getItem(N$(e.persistenceKey,i));if(o){const c=iS.Zi(i,o);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(dO(this.persistenceKey,e));if(r){const i=W0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(o){let c=Js.at;if(null!=o)try{const h=JSON.parse(o);xt("number"==typeof h),c=h}catch(h){Nr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Js.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Or(o)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new rS(this.currentUser,e,t,r),o=P$(this.persistenceKey,this.currentUser,e);this.setItem(o,i.tr())}Er(e){const t=P$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=dO(this.persistenceKey,e),o=new W0(e,t,r);this.setItem(i,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return iS.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return rS.Zi(new vi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return W0.Zi(i,t)}yr(e){return hO.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),o=this.Ir(r),c=[],h=[];return o.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{o.has(m)||h.push(m)}),this.syncEngine.Br(c,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=GT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class O${constructor(){this.Lr=new fO,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new fO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class z7{qr(e){}shutdown(){}}class F${constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const W7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class q7{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class K7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,o){const c=this.ao(e,t);Le("RestConnection","Sending: ",c,r);const h={};return this.ho(h,i,o),this.lo(e,c,h,r).then(m=>(Le("RestConnection","Received: ",m),m),m=>{throw ap("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",r),m})}fo(e,t,r,i,o,c){return this.co(e,t,r,i,o)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+i_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ao(e,t){return`${this.oo}/v1/${t}:${W7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((o,c)=>{const h=new zK;h.listenOnce(HK.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case xP.NO_ERROR:const y=h.getResponseJson();Le("Connection","XHR received:",JSON.stringify(y)),o(y);break;case xP.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),c(new Ne(pe.DEADLINE_EXCEEDED,"Request time out"));break;case xP.HTTP_ERROR:const C=h.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const T=h.getResponseJson().error;if(T&&T.status&&T.message){const x=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(B)>=0?B:pe.UNKNOWN}(T.status);c(new Ne(x,T.message))}else c(new Ne(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ne(pe.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UK(),c=jK(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new GK({})),this.ho(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=i.join("");Le("Connection","Creating WebChannel: "+m,h);const y=o.createWebChannel(m,h);let C=!1,T=!1;const x=new q7({Hr:B=>{T?Le("Connection","Not sending because WebChannel is closed:",B):(C||(Le("Connection","Opening WebChannel transport."),y.open(),C=!0),Le("Connection","WebChannel sending:",B),y.send(B))},Jr:()=>y.close()}),P=(B,Q,he)=>{B.listen(Q,ke=>{try{he(ke)}catch(ze){setTimeout(()=>{throw ze},0)}})};return P(y,RT.EventType.OPEN,()=>{T||Le("Connection","WebChannel transport opened.")}),P(y,RT.EventType.CLOSE,()=>{T||(T=!0,Le("Connection","WebChannel transport closed"),x.io())}),P(y,RT.EventType.ERROR,B=>{T||(T=!0,ap("Connection","WebChannel transport errored:",B),x.io(new Ne(pe.UNAVAILABLE,"The operation could not be completed")))}),P(y,RT.EventType.MESSAGE,B=>{var Q;if(!T){const he=B.data[0];xt(!!he);const ke=he,ze=ke.error||(null===(Q=ke[0])||void 0===Q?void 0:Q.error);if(ze){Le("Connection","WebChannel received error:",ze);const nt=ze.status;let et=function(At){const an=$r[At];if(void 0!==an)return AH(an)}(nt),Tt=ze.message;void 0===et&&(et=pe.INTERNAL,Tt="Unknown error status: "+nt+" with message "+ze.message),T=!0,x.io(new Ne(et,Tt)),y.close()}else Le("Connection","WebChannel received:",he),x.ro(he)}}),P(c,$K.STAT_EVENT,B=>{B.stat===Pj.PROXY?Le("Connection","Detected buffering proxy"):B.stat===Pj.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function L$(){return typeof window<"u"?window:null}function sS(){return typeof document<"u"?document:null}function q0(n){return new VZ(n,!0)}class mO{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class V${constructor(e,t,r,i,o,c,h,m){this.Hs=e,this.Po=r,this.vo=i,this.Vo=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new mO(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,be.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,be.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ne(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,be.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z7 extends V${constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=o}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function jZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ot(),i=e.targetChange.targetIds||[],o=function(m,y){return m.gt?(xt(void 0===y||"string"==typeof y),ni.fromBase64String(y||"")):(xt(void 0===y||y instanceof Uint8Array),ni.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const y=void 0===m.code?pe.UNKNOWN:AH(m.code);return new Ne(y,m.message||"")}(c);t=new NH(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Tc(n,r.document.name),o=wi(r.document.updateTime),c=new ji({mapValue:{fields:r.document.fields}}),h=Gn.newFoundDocument(i,o,c);t=new zT(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Tc(n,r.document),o=r.readTime?wi(r.readTime):St.min(),c=Gn.newNoDocument(i,o);t=new zT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Tc(n,r.document);t=new zT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ot();{const r=e.filter,o=new xZ(r.count||0);t=new kH(r.targetId,o)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return St.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?St.min():o.readTime?wi(o.readTime):St.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=L0(this.It),t.addTarget=function(i,o){let c;const h=o.target;return c=VT(h)?{documents:$H(i,h)}:{query:GH(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=LH(i,o.resumeToken):o.snapshotVersion.compareTo(St.min())>0&&(c.readTime=O0(i,o.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function $Z(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=L0(this.It),t.removeTarget=e,this.Bo(t)}}class Y7 extends V${constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function HZ(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let o=wi(r.updateTime?r.updateTime:i);return o.isEqual(St.min())&&(o=wi(i)),new SZ(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.Zo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=L0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>V0(this.It,r))};this.Bo(t)}}class Q7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.co(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(pe.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.Vo.fo(e,t,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(pe.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class J7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Nr(t),this.ou=!1):Le("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class X7{constructor(e,t,r,i,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.qr(h=>{r.enqueueAndForget((0,be.Z)(function*(){var m;Dh(c)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,be.Z)(function*(y){const C=Qe(y);C._u.add(4),yield w_(C),C.gu.set("Unknown"),C._u.delete(4),yield K0(C)}),function(y){return m.apply(this,arguments)})(c))}))}),this.gu=new J7(r,i)}}function K0(n){return gO.apply(this,arguments)}function gO(){return gO=(0,be.Z)(function*(n){if(Dh(n))for(const e of n.wu)yield e(!0)}),gO.apply(this,arguments)}function w_(n){return _O.apply(this,arguments)}function _O(){return _O=(0,be.Z)(function*(n){for(const e of n.wu)yield e(!1)}),_O.apply(this,arguments)}function oS(n,e){const t=Qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),bO(t)?vO(t):C_(t).ko()&&yO(t,e))}function Z0(n,e){const t=Qe(n),r=C_(t);t.du.delete(e),r.ko()&&B$(t,e),0===t.du.size&&(r.ko()?r.Fo():Dh(t)&&t.gu.set("Unknown"))}function yO(n,e){n.yu.Ot(e.targetId),C_(n).zo(e)}function B$(n,e){n.yu.Ot(e),C_(n).Ho(e)}function vO(n){n.yu=new OZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),C_(n).start(),n.gu.uu()}function bO(n){return Dh(n)&&!C_(n).No()&&n.du.size>0}function Dh(n){return 0===Qe(n)._u.size}function U$(n){n.yu=void 0}function eY(n){return wO.apply(this,arguments)}function wO(){return wO=(0,be.Z)(function*(n){n.du.forEach((e,t)=>{yO(n,e)})}),wO.apply(this,arguments)}function tY(n,e){return EO.apply(this,arguments)}function EO(){return EO=(0,be.Z)(function*(n,e){U$(n),bO(n)?(n.gu.hu(e),vO(n)):n.gu.set("Unknown")}),EO.apply(this,arguments)}function nY(n,e,t){return CO.apply(this,arguments)}function CO(){return CO=(0,be.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof NH&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.du.delete(h),i.yu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aS(n,r)}else if(e instanceof zT?n.yu.Gt(e):e instanceof kH?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(St.min()))try{const r=yield A$(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const c=i.yu.te(o);return c.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.du.get(m);y&&i.du.set(m,y.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach(h=>{const m=i.du.get(h);if(!m)return;i.du.set(h,m.withResumeToken(ni.EMPTY_BYTE_STRING,m.snapshotVersion)),B$(i,h);const y=new Eh(m.target,h,1,m.sequenceNumber);yO(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield aS(n,r)}var r}),CO.apply(this,arguments)}function aS(n,e,t){return IO.apply(this,arguments)}function IO(){return IO=(0,be.Z)(function*(n,e,t){if(!mh(e))throw e;n._u.add(1),yield w_(n),n.gu.set("Offline"),t||(t=()=>A$(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield K0(n)}))}),IO.apply(this,arguments)}function j$(n,e){return e().catch(t=>aS(n,t,e))}function E_(n){return DO.apply(this,arguments)}function DO(){return DO=(0,be.Z)(function*(n){const e=Qe(n),t=Th(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;rY(e);)try{const i=yield H7(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,iY(e,i)}catch(i){yield aS(e,i)}H$(e)&&$$(e)}),DO.apply(this,arguments)}function rY(n){return Dh(n)&&n.fu.length<10}function iY(n,e){n.fu.push(e);const t=Th(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function H$(n){return Dh(n)&&!Th(n).No()&&n.fu.length>0}function $$(n){Th(n).start()}function sY(n){return TO.apply(this,arguments)}function TO(){return TO=(0,be.Z)(function*(n){Th(n).eu()}),TO.apply(this,arguments)}function oY(n){return SO.apply(this,arguments)}function SO(){return SO=(0,be.Z)(function*(n){const e=Th(n);for(const t of n.fu)e.Xo(t.mutations)}),SO.apply(this,arguments)}function aY(n,e,t){return AO.apply(this,arguments)}function AO(){return AO=(0,be.Z)(function*(n,e,t){const r=n.fu.shift(),i=QP.from(r,e,t);yield j$(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield E_(n)}),AO.apply(this,arguments)}function lY(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,be.Z)(function*(n,e){var t;e&&Th(n).Yo&&(yield(t=(0,be.Z)(function*(r,i){if(SH(o=i.code)&&o!==pe.ABORTED){const c=r.fu.shift();Th(r).Oo(),yield j$(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield E_(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),H$(n)&&$$(n)}),MO.apply(this,arguments)}function G$(n,e){return xO.apply(this,arguments)}function xO(){return xO=(0,be.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Dh(t);t._u.add(3),yield w_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield K0(t)}),xO.apply(this,arguments)}function RO(n,e){return kO.apply(this,arguments)}function kO(){return kO=(0,be.Z)(function*(n,e){const t=Qe(n);e?(t._u.delete(2),yield K0(t)):e||(t._u.add(2),yield w_(t),t.gu.set("Unknown"))}),kO.apply(this,arguments)}function C_(n){return n.pu||(n.pu=function(e,t,r){const i=Qe(e);return i.su(),new Z7(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:eY.bind(null,n),Zr:tY.bind(null,n),Wo:nY.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.pu.Oo(),bO(n)?vO(n):n.gu.set("Unknown")):(yield n.pu.stop(),U$(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Th(n){return n.Iu||(n.Iu=function(e,t,r){const i=Qe(e);return i.su(),new Y7(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:sY.bind(null,n),Zr:lY.bind(null,n),tu:oY.bind(null,n),Zo:aY.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Oo(),yield E_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class NO{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new NO(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),mh(n))return new Ne(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class D_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=R0(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new D_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof D_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new D_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class z${constructor(){this.Tu=new Tr(Ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ot():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class T_{constructor(e,t,r,i,o,c,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new T_(e,t,D_.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&A0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cY{constructor(){this.Au=void 0,this.listeners=[]}}class uY{constructor(){this.queries=new wh(e=>dH(e),A0),this.onlineState="Unknown",this.Ru=new Set}}function PO(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new cY),i)try{o.Au=yield t.onListen(r)}catch(c){const h=I_(c,`Initialization of query '${$P(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&VO(t)}),OO.apply(this,arguments)}function FO(n,e){return LO.apply(this,arguments)}function LO(){return LO=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),LO.apply(this,arguments)}function dY(n,e){const t=Qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Pu(i)&&(r=!0);c.Au=i}}r&&VO(t)}function hY(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function VO(n){n.Ru.forEach(e=>{e.next()})}class BO{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new T_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=T_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class fY{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class W${constructor(e){this.It=e}Ji(e){return Tc(this.It,e)}Yi(e){return e.metadata.exists?HH(this.It,e.document,!1):Gn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return wi(e)}}class pY{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=q$(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new W$(this.It);for(const i of e)if(i.metadata.queries){const o=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Ht()).add(o);t.set(c,h)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function $7(n,e,t,r){return cO.apply(this,arguments)}(e.localStore,new W$(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield G7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function q$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class K${constructor(e){this.key=e}}class Z${constructor(e){this.key=e}}class Y${constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ht(),this.mutatedKeys=Ht(),this.Ku=fH(e),this.Gu=new D_(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new z$,i=t?t.Gu:this.Gu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,T)=>{const x=i.get(C),P=GP(this.query,T)?T:null,B=!!x&&this.mutatedKeys.has(x.key),Q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let he=!1;x&&P?x.data.isEqual(P.data)?B!==Q&&(r.track({type:3,doc:P}),he=!0):this.zu(x,P)||(r.track({type:2,doc:P}),he=!0,(m&&this.Ku(P,m)>0||y&&this.Ku(P,y)<0)&&(h=!0)):!x&&P?(r.track({type:0,doc:P}),he=!0):x&&!P&&(r.track({type:1,doc:x}),he=!0,(m||y)&&(h=!0)),he&&(P?(c=c.add(P),o=Q?o.add(C):o.delete(C)):(c=c.delete(C),o=o.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),o=o.delete(C.key),r.track({type:1,doc:C})}return{Gu:c,Wu:r,$i:h,mutatedKeys:o}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.Wu.Eu();o.sort((y,C)=>function(T,x){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return P(T)-P(x)}(y.type,C.type)||this.Ku(y.doc,C.doc)),this.Hu(r);const c=t?this.Ju():[],h=0===this.qu.size&&this.current?1:0,m=h!==this.Uu;return this.Uu=h,0!==o.length||m?{snapshot:new T_(this.query,e.Gu,i,o,e.mutatedKeys,0===h,m,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new z$,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ht(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new Z$(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new K$(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ht();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return T_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class mY{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gY{constructor(e){this.key=e,this.ec=!1}}class _Y{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new wh(h=>dH(h),A0),this.ic=new Map,this.rc=new Set,this.oc=new Tr(Ze.comparator),this.uc=new Map,this.cc=new nO,this.ac={},this.hc=new Map,this.lc=Cp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function yY(n,e){return UO.apply(this,arguments)}function UO(){return UO=(0,be.Z)(function*(n,e){const t=u1(n);let r,i;const o=t.sc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.tc();else{const c=yield v_(t.localStore,Xs(e));t.isPrimaryClient&&oS(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield jO(t,e,r,"current"===h)}return i}),UO.apply(this,arguments)}function jO(n,e,t,r){return HO.apply(this,arguments)}function HO(){return HO=(0,be.Z)(function*(n,e,t,r){n.dc=(C,T,x)=>{return(P=(0,be.Z)(function*(B,Q,he,ke){let ze=Q.view.ju(he);ze.$i&&(ze=yield nS(B.localStore,Q.query,!1).then(({documents:Tt})=>Q.view.ju(Tt,ze)));const nt=ke&&ke.targetChanges.get(Q.targetId),et=Q.view.applyChanges(ze,B.isPrimaryClient,nt);return JO(B,Q.targetId,et.Yu),et.snapshot}),function(B,Q,he,ke){return P.apply(this,arguments)})(n,C,T,x);var P};const i=yield nS(n.localStore,e,!0),o=new Y$(e,i.Hi),c=o.ju(i.documents),h=P0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=o.applyChanges(c,n.isPrimaryClient,h);JO(n,t,m.Yu);const y=new mY(e,t,o);return n.sc.set(e,y),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),m.snapshot}),HO.apply(this,arguments)}function vY(n,e){return $O.apply(this,arguments)}function $O(){return $O=(0,be.Z)(function*(n,e){const t=Qe(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(o=>!A0(o,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield b_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Z0(t.remoteStore,r.targetId),S_(t,r.targetId)}).catch(ph))):(S_(t,r.targetId),yield b_(t.localStore,r.targetId,!0))}),$O.apply(this,arguments)}function GO(){return GO=(0,be.Z)(function*(n,e,t){const r=d1(n);try{const i=yield function(o,c){const h=Qe(o),m=lr.now(),y=c.reduce((x,P)=>x.add(P.key),Ht());let C,T;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let P=eo(),B=Ht();return h.Gi.getEntries(x,y).next(Q=>{P=Q,P.forEach((he,ke)=>{ke.isValidDocument()||(B=B.add(he))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,P)).next(Q=>{C=Q;const he=[];for(const ke of c){const ze=MZ(ke,C.get(ke.key).overlayedDocument);null!=ze&&he.push(new Ou(ke.key,ze,nH(ze.value.mapValue),cr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,m,he,c)}).next(Q=>{T=Q;const he=Q.applyToLocalDocumentSet(C,B);return h.documentOverlayCache.saveOverlays(x,Q.batchId,he)})}).then(()=>({batchId:T.batchId,changes:xH(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let m=o.ac[o.currentUser.toKey()];m||(m=new Tr(Lt)),m=m.insert(c,h),o.ac[o.currentUser.toKey()]=m}(r,i.batchId,t),yield Fu(r,i.changes),yield E_(r.remoteStore)}catch(i){const o=I_(i,"Failed to persist write");t.reject(o)}}),GO.apply(this,arguments)}function Q$(n,e){return zO.apply(this,arguments)}function zO(){return zO=(0,be.Z)(function*(n,e){const t=Qe(n);try{const r=yield j7(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.uc.get(o);c&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?xt(c.ec):i.removedDocuments.size>0&&(xt(c.ec),c.ec=!1))}),yield Fu(t,r,e)}catch(r){yield ph(r)}}),zO.apply(this,arguments)}function J$(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((o,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=Qe(o);h.onlineState=c;let m=!1;h.queries.forEach((y,C)=>{for(const T of C.listeners)T.bu(c)&&(m=!0)}),m&&VO(h)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wY(n,e,t){return WO.apply(this,arguments)}function WO(){return WO=(0,be.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),o=i&&i.key;if(o){let c=new Tr(Ze.comparator);c=c.insert(o,Gn.newNoDocument(o,St.min()));const h=Ht().add(o),m=new N0(St.min(),new Map,new Tn(Lt),c,h);yield Q$(r,m),r.oc=r.oc.remove(o),r.uc.delete(e),XO(r)}else yield b_(r.localStore,e,!1).then(()=>S_(r,e,t)).catch(ph)}),WO.apply(this,arguments)}function EY(n,e){return qO.apply(this,arguments)}function qO(){return qO=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield U7(t.localStore,e);QO(t,r,null),YO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fu(t,i)}catch(i){yield ph(i)}}),qO.apply(this,arguments)}function CY(n,e,t){return KO.apply(this,arguments)}function KO(){return KO=(0,be.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(o,c){const h=Qe(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,c).next(C=>(xt(null!==C),y=C.keys(),h.mutationQueue.removeMutationBatch(m,C))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(r.localStore,e);QO(r,e,t),YO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fu(r,i)}catch(i){yield ph(i)}}),KO.apply(this,arguments)}function ZO(){return ZO=(0,be.Z)(function*(n,e){const t=Qe(n);Dh(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=Qe(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=I_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ZO.apply(this,arguments)}function YO(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function QO(n,e,t){const r=Qe(n);let i=r.ac[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function S_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||X$(n,r)})}function X$(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Z0(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),XO(n))}function JO(n,e,t){for(const r of t)r instanceof K$?(n.cc.addReference(r.key,e),DY(n,r)):r instanceof Z$?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||X$(n,r.key)):ot()}function DY(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.rc.add(r),XO(n))}function XO(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ze(un.fromString(e)),r=n.lc.next();n.uc.set(r,new gY(t)),n.oc=n.oc.insert(t,r),oS(n.remoteStore,new Eh(Xs(c_(t.path)),r,2,Js.at))}}function Fu(n,e,t){return e1.apply(this,arguments)}function e1(){return e1=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[],c=[];var h;r.sc.isEmpty()||(r.sc.forEach((h,m)=>{c.push(r.dc(m,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=oO.Ci(m.targetId,y);o.push(C)}}))}),yield Promise.all(c),r.nc.Wo(i),yield(h=(0,be.Z)(function*(m,y){const C=Qe(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ce.forEach(y,x=>ce.forEach(x.Si,P=>C.persistence.referenceDelegate.addReference(T,x.targetId,P)).next(()=>ce.forEach(x.Di,P=>C.persistence.referenceDelegate.removeReference(T,x.targetId,P)))))}catch(T){if(!mh(T))throw T;Le("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const P=C.Ui.get(x),Q=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);C.Ui=C.Ui.insert(x,Q)}}}),function(m,y){return h.apply(this,arguments)})(r.localStore,o))}),e1.apply(this,arguments)}function TY(n,e){return t1.apply(this,arguments)}function t1(){return t1=(0,be.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield S$(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(h=>{h.reject(new Ne(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fu(t,r.ji)}var i}),t1.apply(this,arguments)}function SY(n,e){const t=Qe(n),r=t.uc.get(e);if(r&&r.ec)return Ht().add(r.key);{let i=Ht();const o=t.ic.get(e);if(!o)return i;for(const c of o){const h=t.sc.get(c);i=i.unionWith(h.view.Qu)}return i}}function AY(n,e){return n1.apply(this,arguments)}function n1(){return n1=(0,be.Z)(function*(n,e){const t=Qe(n),r=yield nS(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&JO(t,e.targetId,i.Yu),i}),n1.apply(this,arguments)}function MY(n,e){return r1.apply(this,arguments)}function r1(){return r1=(0,be.Z)(function*(n,e){const t=Qe(n);return R$(t.localStore,e).then(r=>Fu(t,r))}),r1.apply(this,arguments)}function xY(n,e,t,r){return s1.apply(this,arguments)}function s1(){return s1=(0,be.Z)(function*(n,e,t,r){const i=Qe(n),o=yield function(c,h){const m=Qe(c),y=Qe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Tn(C,h).next(T=>T?m.localDocuments.getDocuments(C,T):ce.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield E_(i.remoteStore):"acknowledged"===t||"rejected"===t?(QO(i,e,r||null),YO(i,e),h=e,Qe(Qe(i.localStore).mutationQueue).An(h)):ot(),yield Fu(i,o)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),s1.apply(this,arguments)}function o1(){return o1=(0,be.Z)(function*(n,e){const t=Qe(n);if(u1(t),d1(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield eG(t,r.toArray());t.fc=!0,yield RO(t.remoteStore,!0);for(const o of i)oS(t.remoteStore,o)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(S_(t,c),b_(t.localStore,c,!0))),Z0(t.remoteStore,c)}),yield i,yield eG(t,r),function(o){const c=Qe(o);c.uc.forEach((h,m)=>{Z0(c.remoteStore,m)}),c.cc.fs(),c.uc=new Map,c.oc=new Tr(Ze.comparator)}(t),t.fc=!1,yield RO(t.remoteStore,!1)}}),o1.apply(this,arguments)}function eG(n,e,t){return a1.apply(this,arguments)}function a1(){return a1=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[];for(const c of e){let h;const m=r.ic.get(c);if(m&&0!==m.length){h=yield v_(r.localStore,Xs(m[0]));for(const y of m){const C=r.sc.get(y),T=yield AY(r,C);T.snapshot&&o.push(T.snapshot)}}else{const y=yield x$(r.localStore,c);h=yield v_(r.localStore,y),yield jO(r,tG(y),c,!1)}i.push(h)}return r.nc.Wo(o),i}),a1.apply(this,arguments)}function tG(n){return cH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kY(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).vi()}function NY(n,e,t,r){return l1.apply(this,arguments)}function l1(){return l1=(0,be.Z)(function*(n,e,t,r){const i=Qe(n);if(i.fc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const o=i.ic.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield R$(i.localStore,hH(o[0])),h=N0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fu(i,c,h);break}case"rejected":yield b_(i.localStore,e,!0),S_(i,e,r);break;default:ot()}}),l1.apply(this,arguments)}function PY(n,e,t){return c1.apply(this,arguments)}function c1(){return c1=(0,be.Z)(function*(n,e,t){const r=u1(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const o=yield x$(r.localStore,i),c=yield v_(r.localStore,o);yield jO(r,tG(o),c.targetId,!1),oS(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield b_(r.localStore,i,!1).then(()=>{Z0(r.remoteStore,i),S_(r,i)}).catch(ph))}}),c1.apply(this,arguments)}function u1(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wY.bind(null,e),e.nc.Wo=dY.bind(null,e.eventManager),e.nc._c=hY.bind(null,e.eventManager),e}function d1(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CY.bind(null,e),e}class nG{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.It=q0(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return T$(this.persistence,new D$,e.initialUser,this.It)}gc(e){return new C$(eS.Bs,this.It)}mc(e){return new O$}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rG extends nG{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield d1(r.Ec.syncEngine),yield E_(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return T$(this.persistence,new D$,e.initialUser,this.It)}Ic(e,t){return new D7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new aZ(t,this.persistence);return new oZ(e.asyncQueue,r)}gc(e){const t=sO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new iO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,L$(),sS(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new O$}}class FY extends rG{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof pO&&(r.sharedClientState.syncEngine={Fr:xY.bind(null,i),$r:NY.bind(null,i),Br:PY.bind(null,i),vi:kY.bind(null,i),Or:MY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var o=(0,be.Z)(function*(c){yield function RY(n,e){return o1.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}mc(e){const t=L$();if(!pO.C(t))throw new Ne(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class h1{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>J$(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=TY.bind(null,r.syncEngine),yield RO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new uY}createDatastore(e){const t=q0(e.databaseInfo.databaseId),r=new K7(e.databaseInfo);return new Q7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>J$(this.syncEngine,h,0),c=F$.C()?new F$:new z7,new X7(t,r,i,o,c);var t,r,i,o,c}createSyncEngine(e,t){return function(r,i,o,c,h,m,y){const C=new _Y(r,i,o,c,h,m);return y&&(C.fc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Qe(t);Le("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield w_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function iG(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class lS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class LY{constructor(e,t){this.bc=e,this.It=t,this.metadata=new bi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const o=yield e.Dc(i);return new fY(JSON.parse(o),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,be.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,be.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(o,c){const h=Qe(o),m=L0(h.It)+"/documents",y={documents:c.map(P=>F0(h.It,P))},C=yield h.fo("BatchGetDocuments",m,y,c.length),T=new Map;C.forEach(P=>{const B=function UZ(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=Tc(t,r.found.name),o=wi(r.found.updateTime),c=new ji({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(i,o,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=Tc(t,r.missing),o=wi(r.readTime);return Gn.newNoDocument(i,o)}(n,e):ot()}(h.It,P);T.set(B.key.toString(),B)});const x=[];return c.forEach(P=>{const B=T.get(P.toString());xt(!!B),x.push(B)}),x}),function(o,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new p_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ze.fromPath(i);e.mutations.push(new zP(o,e.precondition(o)))}),yield(r=(0,be.Z)(function*(i,o){const c=Qe(i),h=L0(c.It)+"/documents",m={writes:o.map(y=>V0(c.It,y))};yield c.co("Commit",h,m)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?cr.exists(!1):cr.updateTime(t):cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Ne(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cr.updateTime(t)}return cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BY{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Nc=r.maxAttempts,this.xo=new mO(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,be.Z)(function*(){const t=new VY(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Oc(o)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!E0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!SH(t)}return!1}}class UY{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=Vj.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(h){Le("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Le("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=I_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sG(n,e){return f1.apply(this,arguments)}function f1(){return f1=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(o){r.isEqual(o)||(yield S$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),f1.apply(this,arguments)}function oG(n,e){return p1.apply(this,arguments)}function p1(){return p1=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield m1(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>G$(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>G$(e.remoteStore,o)),n.onlineComponents=e}),p1.apply(this,arguments)}function m1(n){return g1.apply(this,arguments)}function g1(){return g1=(0,be.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield sG(n,new nG)),n.offlineComponents}),g1.apply(this,arguments)}function cS(n){return _1.apply(this,arguments)}function _1(){return _1=(0,be.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield oG(n,new h1)),n.onlineComponents}),_1.apply(this,arguments)}function aG(n){return m1(n).then(e=>e.persistence)}function uS(n){return m1(n).then(e=>e.localStore)}function lG(n){return cS(n).then(e=>e.remoteStore)}function y1(n){return cS(n).then(e=>e.syncEngine)}function A_(n){return v1.apply(this,arguments)}function v1(){return v1=(0,be.Z)(function*(n){const e=yield cS(n),t=e.eventManager;return t.onListen=yY.bind(null,e.syncEngine),t.onUnlisten=vY.bind(null,e.syncEngine),t}),v1.apply(this,arguments)}function cG(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,o,c,h,m){const y=new lS({next:T=>{o.enqueueAndForget(()=>FO(i,C));const x=T.docs.has(c);!x&&T.fromCache?m.reject(new Ne(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&h&&"server"===h.source?m.reject(new Ne(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),C=new BO(c_(c.path),y,{includeMetadataChanges:!0,Nu:!0});return PO(i,C)}(yield A_(n),n.asyncQueue,e,t,r)})),r.promise}function uG(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,o,c,h,m){const y=new lS({next:T=>{o.enqueueAndForget(()=>FO(i,C)),T.fromCache&&"server"===h.source?m.reject(new Ne(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),C=new BO(c,y,{includeMetadataChanges:!0,Nu:!0});return PO(i,C)}(yield A_(n),n.asyncQueue,e,t,r)})),r.promise}const dG=new Map;function b1(n,e,t){if(!t)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hG(n,e,t,r){if(!0===e&&!0===r)throw new Ne(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fG(n){if(!Ze.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pG(n){if(Ze.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dS(n);throw new Ne(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mG(n,e){if(e<=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gG{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gG({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gG(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new KK;switch(t.type){case"gapi":return new JK(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dG.get(e);t&&(Le("ComponentProvider","Removing Datastore"),dG.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Ac extends is{constructor(e,t,r){super(e,t,c_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Ze(e))}withConverter(e){return new Ac(this.firestore,e,this._path)}}function _G(n,e,...t){if(n=(0,O.m9)(n),b1("collection","path",e),n instanceof Y0){const r=un.fromString(e,...t);return pG(r),new Ac(n,null,r)}{if(!(n instanceof Jn||n instanceof Ac))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return pG(r),new Ac(n.firestore,null,r)}}function hS(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=Vj.R()),b1("doc","path",e),n instanceof Y0){const r=un.fromString(e,...t);return fG(r),new Jn(n,null,new Ze(r))}{if(!(n instanceof Jn||n instanceof Ac))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return fG(r),new Jn(n.firestore,n instanceof Ac?n.converter:null,new Ze(r))}}function yG(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof Jn||n instanceof Ac)&&(e instanceof Jn||e instanceof Ac)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vG(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&A0(n._query,e._query)&&n.converter===e.converter}class QY{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new mO(this,"async_queue_retry"),this.jc=()=>{const t=sS();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=sS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=sS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new bi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!mh(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=NO.createAndSchedule(this,e,t,r,o=>this.Jc(o));return this.Uc.push(i),i}Wc(){this.qc&&ot()}verifyOperationInProgress(){}Yc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function w1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class JY{constructor(){this._progressObserver={},this._taskCompletionResolver=new bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends Y0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new QY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bG(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||bG(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bG(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new uZ(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new UY(n._authCredentials,n._appCheckCredentials,n._queue,r)}function wG(n,e,t){const r=new bi;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield sG(n,t),yield oG(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(c=o).name?c.code===pe.FAILED_PRECONDITION||c.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;ap("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function EG(n){if(n._initialized||n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(ni.fromBase64String(e))}catch(t){throw new Ne(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mc(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dp{constructor(e){this._methodName=e}}class fS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const lQ=/^__.*__$/;class cQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new f_(e,this.data,t,this.fieldTransforms)}}class CG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class pS{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ea(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new pS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return _S(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(IG(this.na)&&lQ.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class uQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||q0(e)}fa(e,t,r,i=!1){return new pS({na:e,methodName:t,la:r,path:Dr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Tp(n){const e=n._freezeSettings(),t=q0(n._databaseId);return new uQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mS(n,e,t,r,i,o={}){const c=n.fa(o.merge||o.mergeFields?2:0,e,t,i);D1("Data must be an object, but it was:",c,r);const h=SG(r,c);let m,y;if(o.merge)m=new Lo(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const C=[];for(const T of o.mergeFields){const x=T1(e,T,t);if(!c.contains(x))throw new Ne(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);MG(C,x)||C.push(x)}m=new Lo(C),y=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,y=c.fieldTransforms;return new cQ(new ji(h),m,y)}class Q0 extends Dp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q0}}function DG(n,e,t){return new pS({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class E1 extends Dp{_toFieldTransform(e){return new M0(e.path,new d_)}isEqual(e){return e instanceof E1}}class dQ extends Dp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=DG(this,e,!0),r=this.da.map(o=>Sp(o,t)),i=new mp(r);return new M0(e.path,i)}isEqual(e){return this===e}}class hQ extends Dp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=DG(this,e,!0),r=this.da.map(o=>Sp(o,t)),i=new gp(r);return new M0(e.path,i)}isEqual(e){return this===e}}class fQ extends Dp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new h_(e.It,gH(e.It,this._a));return new M0(e.path,t)}isEqual(e){return this===e}}function C1(n,e,t,r){const i=n.fa(1,e,t);D1("Data must be an object, but it was:",i,r);const o=[],c=ji.empty();up(r,(m,y)=>{const C=gS(e,m,t);y=(0,O.m9)(y);const T=i.ua(C);if(y instanceof Q0)o.push(C);else{const x=Sp(y,T);null!=x&&(o.push(C),c.set(C,x))}});const h=new Lo(o);return new CG(c,h,i.fieldTransforms)}function I1(n,e,t,r,i,o){const c=n.fa(1,e,t),h=[T1(e,r,t)],m=[i];if(o.length%2!=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(T1(e,o[x])),m.push(o[x+1]);const y=[],C=ji.empty();for(let x=h.length-1;x>=0;--x)if(!MG(y,h[x])){const P=h[x];let B=m[x];B=(0,O.m9)(B);const Q=c.ua(P);if(B instanceof Q0)y.push(P);else{const he=Sp(B,Q);null!=he&&(y.push(P),C.set(P,he))}}const T=new Lo(y);return new CG(C,T,c.fieldTransforms)}function TG(n,e,t,r=!1){return Sp(t,n.fa(r?4:3,e))}function Sp(n,e){if(AG(n=(0,O.m9)(n)))return D1("Unsupported field value:",e,n),SG(n,e);if(n instanceof Dp)return function(t,r){if(!IG(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const c of t){let h=Sp(c,r.ca(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gH(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=lr.fromDate(t);return{timestampValue:O0(r.It,i)}}if(t instanceof lr){const i=new lr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:O0(r.It,i)}}if(t instanceof fS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mc)return{bytesValue:LH(r.It,t._byteString)};if(t instanceof Jn){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.aa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:WP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${dS(t)}`)}(n,e)}function SG(n,e){const t={};return Wj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):up(n,(r,i)=>{const o=Sp(i,e.ia(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function AG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof lr||n instanceof fS||n instanceof Mc||n instanceof Jn||n instanceof Dp)}function D1(n,e,t){if(!AG(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=dS(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function T1(n,e,t){if((e=(0,O.m9)(e))instanceof Lu)return e._internalPath;if("string"==typeof e)return gS(n,e);throw _S("Field path arguments must be of type string or ",n,!1,void 0,t)}const pQ=new RegExp("[~\\*/\\[\\]]");function gS(n,e,t){if(e.search(pQ)>=0)throw _S(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch{throw _S(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _S(n,e,t,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Ne(pe.INVALID_ARGUMENT,h+n+m)}function MG(n,e){return n.some(t=>t.isEqual(e))}class J0{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mQ extends J0{data(){return super.data()}}function yS(n,e){return"string"==typeof e?gS(n,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vu extends J0{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X0 extends Vu{data(e={}){return super.data(e)}}class Sh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ap(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new X0(this._firestore,this._userDataWriter,r.key,r,new Ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new X0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ap(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new X0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ap(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return 0!==c.type&&(m=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:gQ(c.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function xG(n,e){return n instanceof Vu&&e instanceof Vu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sh&&e instanceof Sh&&n._firestore===e._firestore&&vG(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function RG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ew{}function Ah(n,...e){for(const t of e)n=t._apply(n);return n}class _Q extends ew{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Tp(e.firestore),r=function(i,o,c,h,m,y,C){let T;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){LG(C,y);const P=[];for(const B of C)P.push(FG(h,i,B));T={arrayValue:{values:P}}}else T=FG(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||LG(C,y),T=TG(c,"where",C,"in"===y||"not-in"===y);const x=Hi.create(m,y,T);return function(P,B){if(B.dt()){const he=jP(P);if(null!==he&&!he.isEqual(B.field))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${he.toString()}' and '${B.field.toString()}'`);const ke=UP(P);null!==ke&&VG(0,B.field,ke)}const Q=function(he,ke){for(const ze of he.filters)if(ke.indexOf(ze.op)>=0)return ze.op;return null}(P,function(he){switch(he){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==Q)throw new Ne(pe.INVALID_ARGUMENT,Q===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${Q.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new is(e.firestore,e.converter,function(i,o){const c=i.filters.concat([o]);return new Pu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class vQ extends ew{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new l_(i,o);return function(h,m){if(null===UP(h)){const y=jP(h);null!==y&&VG(0,y,m.field)}}(r,c),c}(e._query,this.wa,this.ya);return new is(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Pu(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class kG extends ew{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new is(e.firestore,e.converter,UT(e._query,this.pa,this.Ia))}}class NG extends ew{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=OG(e,this.type,this.Ta,this.Ea);return new is(e.firestore,e.converter,(i=t,new Pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class PG extends ew{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=OG(e,this.type,this.Ta,this.Ea);return new is(e.firestore,e.converter,(i=t,new Pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function OG(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof J0)return function(i,o,c,h,m){if(!h)throw new Ne(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const C of u_(i))if(C.field.isKeyField())y.push(fp(o,h.key));else{const T=h.data.field(C.field);if(LP(T))throw new Ne(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=C.field.canonicalString();throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(T)}return new bh(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Tp(n.firestore);return function(o,c,h,m,y,C){const T=o.explicitOrderBy;if(y.length>T.length)throw new Ne(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<y.length;P++){const B=y[P];if(T[P].field.isKeyField()){if("string"!=typeof B)throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof B}`);if(!HP(o)&&-1!==B.indexOf("/"))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${B}' contains a slash.`);const Q=o.path.child(un.fromString(B));if(!Ze.isDocumentKey(Q))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const he=new Ze(Q);x.push(fp(c,he))}else{const Q=TG(h,m,B);x.push(Q)}}return new bh(x,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FG(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HP(e)&&-1!==t.indexOf("/"))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Ze.isDocumentKey(r))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fp(n,new Ze(r))}if(t instanceof Jn)return fp(n,t._key);throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dS(t)}.`)}function LG(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function VG(n,e,t){if(!t.isEqual(e))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const SQ={maxAttempts:5};class S1{convertValue(e,t="none"){switch(hp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return up(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new fS(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kj(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(w0(e));default:return null}}convertTimestamp(e){const t=gh(e);return new lr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);xt(qH(r));const i=new _h(r.get(1),r.get(3)),o=new Ze(r.popFirst(5));return i.isEqual(t)||Nr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function vS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class AQ extends S1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class BG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tp(e)}set(e,t,r){this._verifyNotCommitted();const i=Mh(e,this._firestore),o=vS(i.converter,t,r),c=mS(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Mh(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof Lu?I1(this._dataReader,"WriteBatch.update",o._key,t,r,i):C1(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mh(e,this._firestore);return this._mutations=this._mutations.concat(new p_(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mh(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ne(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Mp extends S1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function UG(n,e,t){n=on(n,Jn);const r=on(n.firestore,ur),i=vS(n.converter,e,t);return M_(r,[mS(Tp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,cr.none())])}function jG(n,e,t,...r){n=on(n,Jn);const i=on(n.firestore,ur),o=Tp(i);let c;return c="string"==typeof(e=(0,O.m9)(e))||e instanceof Lu?I1(o,"updateDoc",n._key,e,t,r):C1(o,"updateDoc",n._key,e),M_(i,[c.toMutation(n._key,cr.exists(!0))])}function HG(n,...e){var t,r,i;n=(0,O.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||w1(e[c])||(o=e[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(w1(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[c+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let m,y,C;if(n instanceof Jn)y=on(n.firestore,ur),C=c_(n._key.path),m={next:T=>{e[c]&&e[c](A1(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=on(n,is);y=on(T.firestore,ur),C=T._query;const x=new Mp(y);m={next:P=>{e[c]&&e[c](new Sh(y,x,T,P))},error:e[c+1],complete:e[c+2]},RG(n._query)}return function(T,x,P,B){const Q=new lS(B),he=new BO(x,Q,P);return T.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return PO(yield A_(T),he)})),()=>{Q.Rc(),T.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return FO(yield A_(T),he)}))}}(Gr(y),C,h,m)}function M_(n,e){return function(t,r){const i=new bi;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function bY(n,e,t){return GO.apply(this,arguments)}(yield y1(t),r,i)})),i.promise}(Gr(n),e)}function A1(n,e,t){const r=t.docs.get(e._key),i=new Mp(n);return new Vu(n,i,e._key,r,new Ap(t.hasPendingWrites,t.fromCache),e.converter)}class VQ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tp(e)}get(e){const t=Mh(e,this._firestore),r=new AQ(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ot();const o=i[0];if(o.isFoundDocument())return new J0(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new J0(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const i=Mh(e,this._firestore),o=vS(i.converter,t,r),c=mS(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const o=Mh(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof Lu?I1(this._dataReader,"Transaction.update",o._key,t,r,i):C1(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mh(e,this._firestore),r=new Mp(this._firestore);return super.get(e).then(i=>new Vu(this._firestore,r,t._key,i._document,new Ap(!1,!1),t.converter))}}function M1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GG(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function zG(){if(!function lZ(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){i_=Ia.SDK_VERSION,(0,Ia._registerComponent)(new Ca.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),c=new ur(new YK(t.getProvider("auth-internal")),new XK(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ne(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _h(h.options.projectId,m)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Ia.registerVersion)(Oj,"3.5.0",n),(0,Ia.registerVersion)(Oj,"3.5.0","esm2017")}();class tw{constructor(e){this._delegate=e}static fromBase64String(e){return zG(),new tw(Mc.fromBase64String(e))}static fromUint8Array(e){return GG(),new tw(Mc.fromUint8Array(e))}toBase64(){return zG(),this._delegate.toBase64()}toUint8Array(){return GG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function x1(n){return function qQ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class KQ{enableIndexedDbPersistence(e,t){return function eQ(n,e){EG(n=on(n,ur));const t=Gr(n),r=n._freezeSettings(),i=new h1;return wG(t,i,new rG(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tQ(n){EG(n=on(n,ur));const e=Gr(n),t=n._freezeSettings(),r=new h1;return wG(e,r,new FY(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nQ(n){if(n._initialized&&!n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!hl.C())return Promise.resolve();const i=r+"main";yield hl.delete(i)}),function(r){return t.apply(this,arguments)})(sO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WG{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _h||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ap("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function ZY(n,e,t,r={}){var i;const o=(n=on(n,Y0))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&ap("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=vi.MOCK_USER;else{c=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ne(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vi(m)}n._authCredentials=new ZK(new Fj(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function iQ(n){return function jY(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield aG(n),t=yield lG(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i._u.delete(0),K0(i)}(t)}))}(Gr(n=on(n,ur)))}(this._delegate)}disableNetwork(){return function sQ(n){return function HY(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield aG(n),t=yield lG(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const o=Qe(i);o._u.add(0),yield w_(o),o.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gr(n=on(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hG("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rQ(n){return function(e){const t=new bi;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function IY(n,e){return ZO.apply(this,arguments)}(yield y1(e),t)})),t.promise}(Gr(n=on(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function LQ(n,e){return function zY(n,e){const t=new lS(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield A_(n),i=t,Qe(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield A_(n),i=t,void Qe(r).Ru.delete(i);var r,i}))}}(Gr(n=on(n,ur)),w1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new x_(this,_G(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new xa(this,hS(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function YY(n,e){if(n=on(n,Y0),b1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new Pu(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BQ(n,e,t){n=on(n,ur);const r=Object.assign(Object.assign({},SQ),t);return function(i){if(i.maxAttempts<1)throw new Ne(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function WY(n,e,t){const r=new bi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(o=n,cS(o).then(c=>c.datastore));var o;new BY(n.asyncQueue,i,t,e,r).run()})),r.promise}(Gr(n),i=>e(new VQ(n,i)),r)}(this._delegate,t=>e(new qG(this,t)))}batch(){return Gr(this._delegate),new KG(new BG(this._delegate,e=>M_(this._delegate,e)))}loadBundle(e){return function oQ(n,e){const t=Gr(n=on(n,ur)),r=new JY;return function qY(n,e,t,r){const i=function(o,c){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,m=function(m,y){if(m instanceof Uint8Array)return iG(m,y);if(m instanceof ArrayBuffer)return iG(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new LY(m,c);var m}(t,q0(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function OY(n,e,t){const r=Qe(n);var i;(i=(0,be.Z)(function*(o,c,h){try{const m=yield c.getMetadata();if(yield function(x,P){const B=Qe(x),Q=wi(P.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",he=>B.Ns.getBundleMetadata(he,P.id)).then(he=>!!he&&he.createTime.compareTo(Q)>=0)}(o.localStore,m))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=m).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(q$(m));const y=new pY(m,o.localStore,c.It);let C=yield c.wc();for(;C;){const x=yield y.Ou(C);x&&h._updateProgress(x),C=yield c.wc()}const T=yield y.complete();return yield Fu(o,T.Bu,void 0),yield function(x,P){const B=Qe(x);return B.persistence.runTransaction("Save bundle","readwrite",Q=>B.Ns.saveBundleMetadata(Q,P))}(o.localStore,m),h._completeWith(T.progress),Promise.resolve(T.$u)}catch(m){return ap("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var x}),function(o,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield y1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aQ(n,e){return function KY(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ns.getNamedQuery(o,r))}(yield uS(n),e)}))}(Gr(n=on(n,ur)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class bS extends S1{constructor(e){super(),this.firestore=e}convertBytes(e){return new tw(new Mc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xa.forKey(t,this.firestore,null)}}class qG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bS(e)}get(e){const t=Rp(e);return this._delegate.get(t).then(r=>new nw(this._firestore,new Vu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Rp(e);return r?(M1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Rp(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Rp(e);return this._delegate.delete(t),this}}class KG{constructor(e){this._delegate=e}set(e,t,r){const i=Rp(e);return r?(M1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Rp(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Rp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new X0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new xp(e,new bS(e),t),i.set(t,o)),o}}xp.INSTANCES=new WeakMap;class xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xa(t,new Jn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new xa(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new x_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new x_(this.firestore,_G(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof Jn&&yG(this._delegate,e)}set(e,t){t=M1("DocumentReference.set",t);try{return t?UG(this._delegate,e,t):UG(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jG(this._delegate,e):jG(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function OQ(n){return M_(on(n.firestore,ur),[new p_(n._key,cr.none())])}(this._delegate)}onSnapshot(...e){const t=ZG(e),r=YG(e,i=>new nw(this.firestore,new Vu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return HG(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function xQ(n){n=on(n,Jn);const e=on(n.firestore,ur),t=Gr(e),r=new Mp(e);return function $Y(n,e){const t=new bi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,o,c){try{const h=yield function(m,y){const C=Qe(m);return C.persistence.runTransaction("read document","readonly",T=>C.localDocuments.getDocument(T,y))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ne(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=I_(h,`Failed to get document '${o} from cache`);c.reject(m)}}),function(i,o,c){return r.apply(this,arguments)})(yield uS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vu(e,r,n._key,i,new Ap(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function RQ(n){n=on(n,Jn);const e=on(n.firestore,ur);return cG(Gr(e),n._key,{source:"server"}).then(t=>A1(e,n,t))}(this._delegate):function MQ(n){n=on(n,Jn);const e=on(n.firestore,ur);return cG(Gr(e),n._key).then(t=>A1(e,n,t))}(this._delegate),t.then(r=>new nw(this.firestore,new Vu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xa(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function ZG(n){for(const e of n)if("object"==typeof e&&!x1(e))return e;return{}}function YG(n,e){var t,r;let i;return i=x1(n[0])?n[0]:x1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class nw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xG(this._delegate,e._delegate)}}class rw extends nw{data(e){const t=this._delegate.data(e);return function qK(n,e){n||ot()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bS(e)}where(e,t,r){try{return new Rs(this.firestore,Ah(this._delegate,function yQ(n,e,t){const r=e,i=yS("where",n);return new _Q(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Ah(this._delegate,function bQ(n,e="asc"){const t=e,r=yS("orderBy",n);return new vQ(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Ah(this._delegate,function wQ(n){return mG("limit",n),new kG("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Ah(this._delegate,function EQ(n){return mG("limitToLast",n),new kG("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Ah(this._delegate,function CQ(...n){return new NG("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Ah(this._delegate,function IQ(...n){return new NG("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Ah(this._delegate,function DQ(...n){return new PG("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Ah(this._delegate,function TQ(...n){return new PG("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return vG(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function NQ(n){n=on(n,is);const e=on(n.firestore,ur),t=Gr(e),r=new Mp(e);return function GY(n,e){const t=new bi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,o,c){try{const h=yield nS(i,o,!0),m=new Y$(o,h.Hi),y=m.ju(h.documents),C=m.applyChanges(y,!1);c.resolve(C.snapshot)}catch(h){const m=I_(h,`Failed to execute query '${o} against cache`);c.reject(m)}}),function(i,o,c){return r.apply(this,arguments)})(yield uS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sh(e,r,n,i))}(this._delegate):"server"===e?.source?function PQ(n){n=on(n,is);const e=on(n.firestore,ur),t=Gr(e),r=new Mp(e);return uG(t,n._query,{source:"server"}).then(i=>new Sh(e,r,n,i))}(this._delegate):function kQ(n){n=on(n,is);const e=on(n.firestore,ur),t=Gr(e),r=new Mp(e);return RG(n._query),uG(t,n._query).then(i=>new Sh(e,r,n,i))}(this._delegate),t.then(r=>new R1(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZG(e),r=YG(e,i=>new R1(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return HG(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}class YQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class R1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new rw(this._firestore,r))})}isEqual(e){return xG(this._delegate,e._delegate)}}class x_ extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xa(this.firestore,e):null}doc(e){try{return new xa(this.firestore,void 0===e?hS(this._delegate):hS(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function FQ(n,e){const t=on(n.firestore,ur),r=hS(n),i=vS(n.converter,e);return M_(t,[mS(Tp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xa(this.firestore,t))}isEqual(e){return yG(this._delegate,e._delegate)}withConverter(e){return new x_(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function Rp(n){return on(n,Jn)}class k1{constructor(...e){this._delegate=new Lu(...e)}static documentId(){return new k1(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Lu&&this._delegate._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jQ(){return new E1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kp(e)}static delete(){const e=function UQ(){return new Q0("deleteField")}();return e._methodName="FieldValue.delete",new kp(e)}static arrayUnion(...e){const t=function HQ(...n){return new dQ("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kp(t)}static arrayRemove(...e){const t=function $Q(...n){return new hQ("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kp(t)}static increment(e){const t=function GQ(n){return new fQ("increment",n)}(e);return t._methodName="FieldValue.increment",new kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QQ={Firestore:WG,GeoPoint:fS,Timestamp:lr,Blob:tw,Transaction:qG,WriteBatch:KG,DocumentReference:xa,DocumentSnapshot:nw,Query:Rs,QueryDocumentSnapshot:rw,QuerySnapshot:R1,CollectionReference:x_,FieldPath:k1,FieldValue:kp,setLogLevel:function ZQ(n){!function WK(n){fh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function QG(n,e){return function e9(n,e=da.z){return new sn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function N1(n,e){return QG(n,e).pipe((0,Ye.U)(t=>({payload:t,type:"query"})))}function wS(n,e){return N1(n,e).pipe(st(void 0),GN(),(0,Ye.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const m=i.find(C=>C.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function JG(n,e,t){return wS(n,t).pipe(Du((r,i)=>function n9(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function r9(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return P1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return P1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return P1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Yl(),(0,Ye.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function P1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function XG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function XQ(n){(function JQ(n,e){n.INTERNAL.registerComponent(new Ca.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},QQ)))})(n,(e,t)=>new WG(e,t,new KQ)),n.registerVersion("@firebase/firestore-compat","0.1.25")}($I.Z);class ez{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ye.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(st(void 0),GN(),Yi(([r,i])=>i.length>0||!r),(0,Ye.U)(([r,i])=>i),Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Du((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XG(e);return JG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return N1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Nn.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Nn.iC)}add(e){return this.ref.add(e)}doc(e){return new tz(this.ref.doc(e),this.afs)}}class tz{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=nz(r,t);return new ez(i,o,this.afs)}snapshotChanges(){return function t9(n,e){return QG(n,e).pipe(st(void 0),GN(),(0,Ye.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ye.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(Nn.iC)}}class i9{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Yi(t=>t.length>0),Nn.iC):wS(this.query,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Du((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XG(e);return JG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return N1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Nn.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Nn.iC)}}const s9=new d.OlP("angularfire2.enableFirestorePersistence"),o9=new d.OlP("angularfire2.firestore.persistenceSettings"),a9=new d.OlP("angularfire2.firestore.settings"),l9=new d.OlP("angularfire2.firestore.use-emulator");function nz(n,e=(t=>t)){return{query:e(n),ref:n}}let c9=(()=>{class n{constructor(t,r,i,o,c,h,m,y,C,T,x,P,B,Q,he,ke,ze){this.schedulers=m;const nt=(0,Oi.on)(t,h,r),et=C;T&&fN(nt,h,x,B,Q,he,P,ke),[this.firestore,this.persistenceEnabled$]=(0,Oi.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const Tt=h.runOutsideAngular(()=>nt.firestore());if(o&&Tt.settings(o),et&&Tt.useEmulator(...et),i&&!Er(c)){const At=()=>{try{return(0,Dn.D)(Tt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(an){return typeof console<"u"&&console.warn(an),it(!1)}};return[Tt,h.runOutsideAngular(At)]}return[Tt,it(!1)]},[o,et,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=nz(i,r),h=this.schedulers.ngZone.run(()=>o);return new ez(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),o=this.firestore.collectionGroup(t);return new i9(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new tz(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Oi.Dh),d.LFG(Oi.xv,8),d.LFG(s9,8),d.LFG(a9,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Nn.HU),d.LFG(o9,8),d.LFG(l9,8),d.LFG(pN,8),d.LFG(aN,8),d.LFG(lN,8),d.LFG(cN,8),d.LFG(uN,8),d.LFG(dN,8),d.LFG(hN,8),d.LFG(UD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u9=(()=>{class n{constructor(t,r){this.afs=t,this.firebase=r,this.userList=this.firebase.list("users")}getUserDetails(){return this.userList}addUserDetails(t){this.userList.push(t)}deleteDetails(t){this.userList.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(c9),d.LFG(cU))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),d9=(()=>{class n{constructor(){this.tabSubject=new xr(0)}setTabSelected(t){this.tabSubject.next(t)}getTabSelected(){this.tabSubject.asObservable()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function h9(n,e){1&n&&(d.TgZ(0,"mat-form-field",10)(1,"mat-label"),d._uU(2,"Enter your favourite programming language"),d.qZA(),d._UZ(3,"input",25),d.qZA())}function f9(n,e){if(1&n&&(d.TgZ(0,"span",30),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.hij("=> ",t.programmingLanguage,"")}}function p9(n,e){if(1&n&&(d.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"b"),d._uU(4,"Name:"),d.qZA(),d._uU(5),d._UZ(6,"br"),d.TgZ(7,"b"),d._uU(8,"Language:"),d.qZA(),d._uU(9),d.YNc(10,f9,2,1,"span",29),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(5),d.hij(" ",t.name,""),d.xp6(4),d.hij(" ",t.radioValue," "),d.xp6(1),d.Q6J("ngIf",t.programmingLanguage)}}let m9=(()=>{class n{constructor(t,r,i,o,c){this.fb=t,this.httpClient=r,this.router=i,this.service=o,this._myTabService=c,this.selectdIndex=0,this.formDetails=this.fb.group({name:new Iu("",[Mf.required]),radioValue:new Iu("",[Mf.required]),programmingLanguage:[{value:"",disabled:!0},[Mf.required]]}),this.formDetails.controls.radioValue.valueChanges.subscribe(h=>{"other"===h?this.formDetails.get("programmingLanguage")?.enable():this.formDetails.get("programmingLanguage")?.disable()})}onSubmit(){this.service.addUserDetails(this.formDetails.value),alert("Thanks for your response"),this.formDetails.reset()}ngOnInit(){this.service.getUserDetails().snapshotChanges().forEach(t=>{this.userList=[],t.forEach(r=>{let i=r.payload.toJSON();this.userList.push(i)})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(EI),d.Y36(DR),d.Y36(ts),d.Y36(u9),d.Y36(d9))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-survey"]],decls:39,vars:4,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["role","main",1,"content"],[1,"w-75","h-75"],["mat-align-tabs","left"],["label","Name"],[3,"formGroup","ngSubmit"],[1,"p-3","pb-0"],[1,"mb-2"],["appearance","fill",1,"w-75"],["matInput","","formControlName","name","placeholder","Enter your full name"],[1,"p-3","pt-0"],["formControlName","radioValue","aria-label","Select an option"],["value","Php",1,"w-100","mb-2"],["value","Java",1,"w-100","mb-2"],["value","c-sharp",1,"w-100","mb-2"],["value","Python",1,"w-100","mb-2"],["value","other",1,"w-100","mb-3"],["class","w-75","appearance","fill",4,"ngIf"],["type","submit","mat-raised-button","",3,"disabled"],["label","Responses"],[1,"container"],[1,"row"],["class","col-md-6",4,"ngFor","ngForOf"],["matInput","","formControlName","programmingLanguage","placeholder","Programming language"],[1,"col-md-6"],[1,"card","mt-3"],[1,"card-body","p-0"],["style","font-style: italic;",4,"ngIf"],[2,"font-style","italic"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.TgZ(2,"span"),d._uU(3,"Survey Application"),d.qZA(),d._UZ(4,"div",2),d.qZA(),d.TgZ(5,"div",3)(6,"mat-card",4)(7,"mat-tab-group",5)(8,"mat-tab",6)(9,"form",7),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(10,"div",8)(11,"p",9),d._uU(12,"What is your name?"),d.qZA(),d.TgZ(13,"mat-form-field",10)(14,"mat-label"),d._uU(15,"Enter your full name"),d.qZA(),d._UZ(16,"input",11),d.qZA()(),d.TgZ(17,"div",12)(18,"p",9),d._uU(19,"What is your favourite programming language?"),d.qZA(),d.TgZ(20,"mat-radio-group",13)(21,"mat-radio-button",14),d._uU(22,"PHP"),d.qZA(),d.TgZ(23,"mat-radio-button",15),d._uU(24,"JAVA"),d.qZA(),d.TgZ(25,"mat-radio-button",16),d._uU(26,"C#"),d.qZA(),d.TgZ(27,"mat-radio-button",17),d._uU(28,"PYTHON"),d.qZA(),d.TgZ(29,"mat-radio-button",18),d._uU(30,"OTHER"),d.qZA()(),d.YNc(31,h9,4,0,"mat-form-field",19),d.TgZ(32,"div")(33,"button",20),d._uU(34,"Submit"),d.qZA()()()()(),d.TgZ(35,"mat-tab",21)(36,"div",22)(37,"div",23),d.YNc(38,p9,11,3,"div",24),d.qZA()()()()()()),2&t&&(d.xp6(9),d.Q6J("formGroup",r.formDetails),d.xp6(22),d.Q6J("ngIf","other"===r.formDetails.controls.radioValue.value),d.xp6(2),d.Q6J("disabled",r.formDetails.invalid),d.xp6(5),d.Q6J("ngForOf",r.userList))},dependencies:[Ls,Yn,_F,UE,Im,gv,fv,gi,Xm,WC,qC,fR,Cg,Xv,Lf,aI,tb],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{all:unset;border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}footer[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;line-height:20px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),n})(),g9=(()=>{class n{constructor(){this.title="survey-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-survey")},dependencies:[m9]}),n})();const rz_firebaseConfig={apiKey:"AIzaSyAAAU4H-uDgv9Z9mGlCen-oNQSvbecRk4M",authDomain:"surveyapp-59d7e.firebaseapp.com",databaseURL:"https://surveyapp-59d7e-default-rtdb.firebaseio.com",projectId:"surveyapp-59d7e",storageBucket:"surveyapp-59d7e.appspot.com",messagingSenderId:"5005742608",appId:"1:5005742608:web:412ac5ad840ff5988a3095",measurementId:"G-5JCKPPYCVT"};let _9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[g9]}),n.\u0275inj=d.cJS({imports:[Ll,fu,Fy,Ym,_v,gL,yL,AI,rR,wR,RL,Oi.hO.initializeApp(rz_firebaseConfig),x4]}),n})();(0,d.G48)(),Fl().bootstrapModule(_9).catch(n=>console.error(n))},5867:(at,De,L)=>{L.d(De,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=L(9681);(0,d.registerVersion)("firebase","9.10.0","app")},127:(at,De,L)=>{L.d(De,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(at,De,L)=>{L.r(De);var d=L(5861),te=L(3942),F=L(2090),ae=L(9681),se=L(655),fe=L(1877),le=L(4859);const Ee=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new fe.Yd("@firebase/auth");function lt(v,...p){Xe.logLevel<=fe.in.ERROR&&Xe.error(`Auth (${ae.SDK_VERSION}): ${v}`,...p)}function xe(v,...p){throw He(v,...p)}function we(v,...p){return He(v,...p)}function Ie(v,p,_){const w=Object.assign(Object.assign({},tt()),{[p]:_});return new F.LL("auth","Firebase",w).create(p,{appName:v.name})}function Ue(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&xe(v,"argument-error"),Ie(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...p){if("string"!=typeof v){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return ve.create(v,...p)}function $(v,p,..._){if(!v)throw He(p,..._)}function ye(v){const p="INTERNAL ASSERTION FAILED: "+v;throw lt(p),new Error(p)}function J(v,p){v||ye(p)}const ne=new Map;function oe(v){J(v instanceof Function,"Expected a class definition");let p=ne.get(v);return p?(J(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ne.set(v,p),p)}function Oe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ht(){return"http:"===$t()||"https:"===$t()}function $t(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class hn{constructor(p,_){this.shortDelay=p,this.longDelay=_,J(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function On(v,p){J(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Qt{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pr=new hn(3e4,6e4);function Rt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function ln(v,p,_,w){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(v,p,_,w,M={}){return zr(v,M,(0,d.Z)(function*(){let N={},Y={};w&&("GET"===p?Y=w:N={body:JSON.stringify(w)});const de=(0,F.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/json",v.languageCode&&(Pe["X-Firebase-Locale"]=v.languageCode),Qt.fetch()($i(v,v.config.apiHost,_,de),Object.assign({method:p,headers:Pe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function zr(v,p,_){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(v,p,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Jt),p);try{const M=new qr(v),N=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const Y=yield N.json();if("needConfirmation"in Y)throw ri(v,"account-exists-with-different-credential",Y);if(N.ok&&!("errorMessage"in Y))return Y;{const de=N.ok?Y.errorMessage:Y.error.message,[Pe,Ke]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw ri(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Pe)throw ri(v,"email-already-in-use",Y);if("USER_DISABLED"===Pe)throw ri(v,"user-disabled",Y);const st=w[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(v,st,Ke);xe(v,st)}}catch(M){if(M instanceof F.ZR)throw M;xe(v,"network-request-failed")}})).apply(this,arguments)}function Wr(v,p,_,w){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(v,p,_,w,M={}){const N=yield ln(v,p,_,w,M);return"mfaPendingCredential"in N&&xe(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function $i(v,p,_,w){const M=`${p}${_}?${w}`;return v.config.emulator?On(v.config,M):`${v.config.apiScheme}://${M}`}class qr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(we(this.auth,"network-request-failed")),Pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ri(v,p,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=we(v,p,w);return M.customData._tokenResponse=_,M}function Je(){return(Je=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Kr(v,p){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fn(v,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Zr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function gn(){return(gn=(0,d.Z)(function*(v,p=!1){const _=(0,F.m9)(v),w=yield _.getIdToken(p),M=ct(w);$(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const N="object"==typeof M.firebase?M.firebase:void 0,Y=N?.sign_in_provider;return{claims:M,token:w,authTime:Zr(ft(M.auth_time)),issuedAtTime:Zr(ft(M.iat)),expirationTime:Zr(ft(M.exp)),signInProvider:Y||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(v){return 1e3*Number(v)}function ct(v){var p;const[_,w,M]=v.split(".");if(void 0===_||void 0===w||void 0===M)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,F.tV)(w);return N?JSON.parse(N):(lt("Failed to decode base64 JWT payload"),null)}catch(N){return lt("Caught error parsing JWT payload as JSON",null===(p=N)||void 0===p?void 0:p.toString()),null}}function dr(v,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof F.ZR&&Or(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Or({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class It{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class as{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zr(this.lastLoginAt),this.creationTime=Zr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(v){return Di.apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(v){var p;const _=v.auth,w=yield v.getIdToken(),M=yield dr(v,Fn(_,{idToken:w}));$(M?.users.length,_,"internal-error");const N=M.users[0];v._notifyReloadListener(N);const Y=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?j(N.providerUserInfo):[],de=z(v.providerData,Y),st=!!v.isAnonymous&&!(v.email&&N.passwordHash||de?.length),_t={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:de,metadata:new as(N.createdAt,N.lastLoginAt),isAnonymous:st};Object.assign(v,_t)})).apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(v){const p=(0,F.m9)(v);yield en(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(v,p){return[...v.filter(w=>!p.some(M=>M.providerId===w.providerId)),...p]}function j(v){return v.map(p=>{var{providerId:_}=p,w=(0,se._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function K(){return(K=(0,d.Z)(function*(v,p){const _=yield zr(v,{},(0,d.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:N}=v.config,Y=$i(v,M,"/v1/token",`key=${N}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",Qt.fetch()(Y,{method:"POST",headers:de,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){$(p.idToken,"internal-error"),$(typeof p.idToken<"u","internal-error"),$(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function fn(v){const p=ct(v);return $(p,"internal-error"),$(typeof p.exp<"u","internal-error"),$(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,d.Z)(function*(){return $(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:Y}=yield function q(v,p){return K.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(M,N,Number(Y))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:M,expirationTime:N}=_,Y=new Te;return w&&($("string"==typeof w,"internal-error",{appName:p}),Y.refreshToken=w),M&&($("string"==typeof M,"internal-error",{appName:p}),Y.accessToken=M),N&&($("number"==typeof N,"internal-error",{appName:p}),Y.expirationTime=N),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Te,this.toJSON())}_performRefresh(){return ye("not implemented")}}function je(v,p){$("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class ut{constructor(p){var{uid:_,auth:w,stsTokenManager:M}=p,N=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new It(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new as(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const w=yield dr(_,_.stsTokenManager.getToken(_.auth,p));return $(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function zn(v){return gn.apply(this,arguments)}(this,p)}reload(){return function Xt(v){return Z.apply(this,arguments)}(this)}_assign(p){this!==p&&($(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ut(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,d.Z)(function*(){let M=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield en(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield dr(p,function Uo(v,p){return Je.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,M,N,Y,de,Pe,Ke,st;const _t=null!==(w=_.displayName)&&void 0!==w?w:void 0,Qn=null!==(M=_.email)&&void 0!==M?M:void 0,kr=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,Jl=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,um=null!==(de=_.tenantId)&&void 0!==de?de:void 0,Qh=null!==(Pe=_._redirectEventId)&&void 0!==Pe?Pe:void 0,wd=null!==(Ke=_.createdAt)&&void 0!==Ke?Ke:void 0,dm=null!==(st=_.lastLoginAt)&&void 0!==st?st:void 0,{uid:ny,emailVerified:hu,isAnonymous:Sw,providerData:ry,stsTokenManager:hm}=_;$(ny&&hm,p,"internal-error");const PS=Te.fromJSON(this.name,hm);$("string"==typeof ny,p,"internal-error"),je(_t,p.name),je(Qn,p.name),$("boolean"==typeof hu,p,"internal-error"),$("boolean"==typeof Sw,p,"internal-error"),je(kr,p.name),je(Jl,p.name),je(um,p.name),je(Qh,p.name),je(wd,p.name),je(dm,p.name);const fm=new ut({uid:ny,auth:p,email:Qn,emailVerified:hu,displayName:_t,isAnonymous:Sw,photoURL:Jl,phoneNumber:kr,tenantId:um,stsTokenManager:PS,createdAt:wd,lastLoginAt:dm});return ry&&Array.isArray(ry)&&(fm.providerData=ry.map(Aw=>Object.assign({},Aw))),Qh&&(fm._redirectEventId=Qh),fm}static _fromIdTokenResponse(p,_,w=!1){return(0,d.Z)(function*(){const M=new Te;M.updateFromServerResponse(_);const N=new ut({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:w});return yield en(N),N})()}}const tn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,d.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,d.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,d.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function Xn(v,p,_){return`firebase:${v}:${p}:${_}`}class Ut{constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:M,name:N}=this.auth;this.fullUserKey=Xn(this.userKey,M.apiKey,N),this.fullPersistenceKey=Xn("persistence",M.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?ut._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,d.Z)(function*(){if(!_.length)return new Ut(oe(tn),p,w);const M=(yield Promise.all(_.map(function(){var Ke=(0,d.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let N=M[0]||oe(tn);const Y=Xn(w,p.config.apiKey,p.name);let de=null;for(const Ke of _)try{const st=yield Ke._get(Y);if(st){const _t=ut._fromJSON(p,st);Ke!==N&&(de=_t),N=Ke;break}}catch{}const Pe=M.filter(Ke=>Ke._shouldAllowMigration);return N._shouldAllowMigration&&Pe.length?(N=Pe[0],de&&(yield N._set(Y,de.toJSON())),yield Promise.all(_.map(function(){var Ke=(0,d.Z)(function*(st){if(st!==N)try{yield st._remove(Y)}catch{}});return function(st){return Ke.apply(this,arguments)}}())),new Ut(N,p,w)):new Ut(N,p,w)})()}}function kt(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Fr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(En(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ge(p))return"Blackberry";if(bt(p))return"Webos";if(Wn(p))return"Safari";if((p.includes("chrome/")||Gi(p))&&!p.includes("edge/"))return"Chrome";if(qn(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function En(v=(0,F.z$)()){return/firefox\//i.test(v)}function Wn(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Gi(v=(0,F.z$)()){return/crios\//i.test(v)}function Fr(v=(0,F.z$)()){return/iemobile/i.test(v)}function qn(v=(0,F.z$)()){return/android/i.test(v)}function Ge(v=(0,F.z$)()){return/blackberry/i.test(v)}function bt(v=(0,F.z$)()){return/webos/i.test(v)}function nn(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function no(v=(0,F.z$)()){return nn(v)||qn(v)||bt(v)||Ge(v)||/windows phone/i.test(v)||Fr(v)}function Ps(v,p=[]){let _;switch(v){case"Browser":_=kt((0,F.z$)());break;case"Worker":_=`${kt((0,F.z$)())}-${v}`;break;default:_=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ae.SDK_VERSION}/${w}`}class jo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=N=>new Promise((Y,de)=>{try{Y(p(N))}catch(Pe){de(Pe)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){var w;if(_.auth.currentUser===p)return;const M=[];try{for(const N of _.queue)yield N(p),N.onAbort&&M.push(N.onAbort)}catch(N){M.reverse();for(const Y of M)try{Y()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Nt{constructor(p,_,w){this.app=p,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ro(this),this.idTokenSubscription=new ro(this),this.beforeStateQueue=new jo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=oe(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,N;if(!w._deleted&&(w.persistenceManager=yield Ut.create(w,p),!w._deleted)){if(null!==(M=w._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let N=M,Y=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const de=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Pe=N?._redirectEventId,Ke=yield _.tryRedirectSignIn(p);(!de||de===Pe)&&Ke?.user&&(N=Ke.user,Y=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(N)}catch(de){N=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(de))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return $(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){var w;try{yield en(p)}catch(M){if("auth/network-request-failed"!==(null===(w=M)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const w=p?(0,F.m9)(p):null;return w&&$(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return p&&$(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(oe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,d.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&oe(p)||_._popupRedirectResolver;$(w,_,"argument-error"),_.redirectPersistenceManager=yield Ut.create(_,[oe(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,M){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return $(Y,this,"internal-error"),Y.then(()=>N(this.currentUser)),"function"==typeof _?p.addObserver(_,w,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ps(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function Cn(v){return(0,F.m9)(v)}class ro{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zi(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Os(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class wr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ye("not implemented")}_getIdTokenResponse(p){return ye("not implemented")}_linkToIdToken(p,_){return ye("not implemented")}_getReauthenticationResolver(p){return ye("not implemented")}}function Zn(v,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:resetPassword",Rt(v,p))})).apply(this,arguments)}function cn(v,p){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Nc(v,p){return io.apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:update",Rt(v,p))})).apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithPassword",Rt(v,p))})).apply(this,arguments)}function Vs(v,p){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:sendOobCode",Rt(v,p))})).apply(this,arguments)}function Yn(v,p){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(v,p){return Vs(v,p)})).apply(this,arguments)}function fr(v,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,d.Z)(function*(v,p){return Vs(v,p)})).apply(this,arguments)}function Pa(v,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(v,p){return Vs(v,p)})).apply(this,arguments)}function Oc(v,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(v,p){return Vs(v,p)})).apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithEmailLink",Rt(v,p))})).apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithEmailLink",Rt(v,p))})).apply(this,arguments)}class Lc extends wr{constructor(p,_,w,M=null){super("password",w),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new Lc(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new Lc(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Na(v,p){return Ls.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Rh(v,p){return ju.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return cn(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function kh(v,p){return Fc.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function tr(v,p){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithIdp",Rt(v,p))})).apply(this,arguments)}class ls extends wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new ls(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M}=_,N=(0,se._T)(_,["providerId","signInMethod"]);if(!w||!M)return null;const Y=new ls(w,M);return Y.idToken=N.idToken||void 0,Y.accessToken=N.accessToken||void 0,Y.secret=N.secret,Y.nonce=N.nonce,Y.pendingToken=N.pendingToken||null,Y}_getIdTokenResponse(p){return tr(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,tr(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,tr(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function Fp(v,p){return $u.apply(this,arguments)}function $u(){return($u=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:sendVerificationCode",Rt(v,p))})).apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithPhoneNumber",Rt(v,p))})).apply(this,arguments)}function Gu(){return(Gu=(0,d.Z)(function*(v,p){const _=yield Wr(v,"POST","/v1/accounts:signInWithPhoneNumber",Rt(v,p));if(_.temporaryProof)throw ri(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Vp={USER_NOT_FOUND:"user-not-found"};function zu(){return(zu=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithPhoneNumber",Rt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Vp)})).apply(this,arguments)}class Us extends wr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Us({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Us({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Vc(v,p){return Bs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Lp(v,p){return Gu.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Bp(v,p){return zu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:N}=p;return w||_||M||N?new Us({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:N}):null}}class fl{constructor(p){var _,w,M,N,Y,de;const Pe=(0,F.zd)((0,F.pd)(p)),Ke=null!==(_=Pe.apiKey)&&void 0!==_?_:null,st=null!==(w=Pe.oobCode)&&void 0!==w?w:null,_t=function Wu(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Pe.mode)&&void 0!==M?M:null);$(Ke&&st&&_t,"argument-error"),this.apiKey=Ke,this.operation=_t,this.code=st,this.continueUrl=null!==(N=Pe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(Y=Pe.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(de=Pe.tenantId)&&void 0!==de?de:null}static parseLink(p){const _=function qu(v){const p=(0,F.zd)((0,F.pd)(v)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||_||p||v}(p);try{return new fl(_)}catch{return null}}}let Wi=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return Lc._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=fl.parseLink(w);return $(M,"argument-error"),Lc._fromEmailAndCode(_,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class cs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class us extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class so extends us{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return $("providerId"in _&&"signInMethod"in _,"argument-error"),ls._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return $(p.idToken||p.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return so.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return so.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:N,nonce:Y,providerId:de}=p;if(!w&&!M&&!_&&!N||!de)return null;try{return new so(de)._credential({idToken:_,accessToken:w,nonce:Y,pendingToken:N})}catch{return null}}}let Oa=(()=>{class v extends us{constructor(){super("facebook.com")}static credential(_){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),pl=(()=>{class v extends us{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return v.credential(w,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Bc=(()=>{class v extends us{constructor(){super("github.com")}static credential(_){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class oo extends wr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return tr(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,tr(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,tr(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M,pendingToken:N}=_;return w&&M&&N&&w===M?new oo(w,N):null}static _create(p,_){return new oo(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oi extends cs{constructor(p){$(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return oi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return oi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=oo.fromJSON(p);return $(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return oo._create(w,_)}catch{return null}}}let Yr=(()=>{class v extends us{constructor(){super("twitter.com")}static credential(_,w){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return v.credential(w,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function $o(v,p){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signUp",Rt(v,p))})).apply(this,arguments)}class Er{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,M=!1){return(0,d.Z)(function*(){const N=yield ut._fromIdTokenResponse(p,w,M),Y=Oh(w);return new Er({user:N,providerId:Y,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const M=Oh(w);return new Er({user:p,providerId:M,_tokenResponse:w,operationType:_})})()}}function Oh(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Sn(){return(Sn=(0,d.Z)(function*(v){var p;const _=Cn(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Er({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield $o(_,{returnSecureToken:!0}),M=yield Er._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class jc extends F.ZR{constructor(p,_,w,M){var N;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,M){return new jc(p,_,w,M)}}function Up(v,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?jc._fromErrorAndOperation(v,N,p,w):N})}function ai(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ml(){return(ml=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v);yield Gt(!0,_,p);const{providerUserInfo:w}=yield Kr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=ai(w||[]);return _.providerData=_.providerData.filter(N=>M.has(N.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ao(v,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(v,p,_=!1){const w=yield dr(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Er._forOperation(v,"link",w)})).apply(this,arguments)}function Gt(v,p,_){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(v,p,_){yield en(p);const M=!1===v?"provider-already-linked":"no-such-provider";$(ai(p.providerData).has(_)===v,p.auth,M)})).apply(this,arguments)}function lo(v,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(v,p,_=!1){var w;const{auth:M}=v,N="reauthenticate";try{const Y=yield dr(v,Up(M,N,p,v),_);$(Y.idToken,M,"internal-error");const de=ct(Y.idToken);$(de,M,"internal-error");const{sub:Pe}=de;return $(v.uid===Pe,M,"user-mismatch"),Er._forOperation(v,N,Y)}catch(Y){throw"auth/user-not-found"===(null===(w=Y)||void 0===w?void 0:w.code)&&xe(M,"user-mismatch"),Y}})).apply(this,arguments)}function Ai(v,p){return yl.apply(this,arguments)}function yl(){return(yl=(0,d.Z)(function*(v,p,_=!1){const w="signIn",M=yield Up(v,w,p),N=yield Er._fromIdTokenResponse(v,w,M);return _||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function In(v,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(v,p){return Ai(Cn(v),p)})).apply(this,arguments)}function vl(v,p){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v);return yield Gt(!1,_,p.providerId),ao(_,p)})).apply(this,arguments)}function bl(v,p){return wl.apply(this,arguments)}function wl(){return(wl=(0,d.Z)(function*(v,p){return lo((0,F.m9)(v),p)})).apply(this,arguments)}function Hc(v,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(v,p){return Wr(v,"POST","/v1/accounts:signInWithCustomToken",Rt(v,p))})).apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(v,p){const _=Cn(v),w=yield Hc(_,{token:p,returnSecureToken:!0}),M=yield Er._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Se{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?jt._fromServerResponse(p,_):xe(p,"internal-error")}}class jt extends Se{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new jt(_)}}function El(v,p,_){var w;$((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),$(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&($(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&($(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function An(){return(An=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v),M={requestType:"PASSWORD_RESET",email:p};_&&El(w,M,_),yield fr(w,M)})).apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(v,p,_){yield Zn((0,F.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(v,p){yield Nc((0,F.m9)(v),{oobCode:p})})).apply(this,arguments)}function Va(v,p){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v),w=yield Zn(_,{oobCode:p}),M=w.requestType;switch($(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(w.mfaInfo,_,"internal-error");default:$(w.email,_,"internal-error")}let N=null;return w.mfaInfo&&(N=Se._fromServerResponse(Cn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:M}})).apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(v,p){const{data:_}=yield Va((0,F.m9)(v),p);return _.email})).apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(v,p,_){const w=Cn(v),M=yield $o(w,{returnSecureToken:!0,email:p,password:_}),N=yield Er._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v),M={requestType:"EMAIL_SIGNIN",email:p};$(_.handleCodeInApp,w,"argument-error"),_&&El(w,M,_),yield Pa(w,M)})).apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v),M=Wi.credentialWithLink(p,_||Oe());return $(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),In(w,M)})).apply(this,arguments)}function Hp(v,p){return qc.apply(this,arguments)}function qc(){return(qc=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:createAuthUri",Rt(v,p))})).apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(v,p){const w={identifier:p,continueUri:ht()?Oe():"http://localhost"},{signinMethods:M}=yield Hp((0,F.m9)(v),w);return M||[]})).apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&El(_.auth,M,p);const{email:N}=yield Yn(_.auth,M);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function Tl(){return(Tl=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&El(w.auth,N,_);const{email:Y}=yield Oc(w.auth,N);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function Sl(v,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,d.Z)(function*(v,p){return ln(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Jc(){return(Jc=(0,d.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,F.m9)(v),N={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Y=yield dr(w,Sl(w.auth,N));w.displayName=Y.displayName||null,w.photoURL=Y.photoUrl||null;const de=w.providerData.find(({providerId:Pe})=>"password"===Pe);de&&(de.displayName=w.displayName,de.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Y)})).apply(this,arguments)}function ho(v,p,_){return Al.apply(this,arguments)}function Al(){return(Al=(0,d.Z)(function*(v,p,_){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),_&&(N.password=_);const Y=yield dr(v,cn(w,N));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Qr{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class bn extends Qr{constructor(p,_,w,M){super(p,_,w),this.username=M}}class Yu extends Qr{constructor(p,_){super(p,"facebook.com",_)}}class Xc extends bn{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Vh extends Qr{constructor(p,_){super(p,"google.com",_)}}class eu extends bn{constructor(p,_,w){super(p,"twitter.com",_,w)}}function Ml(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function nr(v){var p,_;if(!v)return null;const{providerId:w}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Y=null===(_=null===(p=ct(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new Qr(N,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!w)return null;switch(w){case"facebook.com":return new Yu(N,M);case"github.com":return new Xc(N,M);case"google.com":return new Vh(N,M);case"twitter.com":return new eu(N,M,v.screenName||null);case"custom":case"anonymous":return new Qr(N,null);default:return new Qr(N,w,M)}}(_)}class fo{constructor(p,_,w){this.type=p,this.credential=_,this.auth=w}static _fromIdtoken(p,_){return new fo("enroll",p,_)}static _fromMfaPendingCredential(p){return new fo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return fo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return fo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class xl{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=Cn(p),M=_.customData._serverResponse,N=(M.mfaInfo||[]).map(de=>Se._fromServerResponse(w,de));$(M.mfaPendingCredential,w,"internal-error");const Y=fo._fromMfaPendingCredential(M.mfaPendingCredential);return new xl(Y,N,function(){var de=(0,d.Z)(function*(Pe){const Ke=yield Pe._process(w,Y);delete M.mfaInfo,delete M.mfaPendingCredential;const st=Object.assign(Object.assign({},M),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(_.operationType){case"signIn":const _t=yield Er._fromIdTokenResponse(w,_.operationType,st);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return $(_.user,w,"internal-error"),Er._forOperation(_.user,_.operationType,st);default:xe(w,"internal-error")}});return function(Pe){return de.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}function Rl(v,p){return ln(v,"POST","/v2/accounts/mfaEnrollment:start",Rt(v,p))}class Bh{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Se._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Bh(p)}getSession(){var p=this;return(0,d.Z)(function*(){return fo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var w=this;return(0,d.Z)(function*(){const M=p,N=yield w.getSession(),Y=yield dr(w.user,M._process(w.user.auth,N,_));return yield w.user._updateTokensIfNecessary(Y),w.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){var w;const M="string"==typeof p?p:p.uid,N=yield _.user.getIdToken(),Y=yield dr(_.user,function ed(v,p){return ln(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(v,p))}(_.user.auth,{idToken:N,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:de})=>de!==M),yield _.user._updateTokensIfNecessary(Y);try{yield _.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(w=de)||void 0===w?void 0:w.code))throw de}})()}}const po=new WeakMap,mo="__sak";class Nl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(mo,"1"),this.storage.removeItem(mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ga=(()=>{class v extends Nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $a(){const v=(0,F.z$)();return Wn(v)||nn(v)}()&&function vn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=no(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),N=this.localCache[w];M!==N&&_(w,N,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((de,Pe,Ke)=>{this.notifyListeners(de,Ke)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(_.newValue!==de)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const N=()=>{const de=this.storage.getItem(M);!w&&this.localCache[M]===de||this.notifyListeners(M,de)},Y=this.storage.getItem(M);!function er(){return(0,F.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?N():setTimeout(N,10)}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const N of Array.from(M))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,N=this;return(0,d.Z)(function*(){yield M().call(N,_,w),N.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,d.Z)(function*(){const N=yield w().call(M,_);return M.localCache[_]=JSON.stringify(N),N})()}_remove(_){var w=()=>super._remove,M=this;return(0,d.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return v.type="LOCAL",v})(),Ki=(()=>{class v extends Nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let rd=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(N=>N.isListeningto(_));if(w)return w;const M=new v(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,d.Z)(function*(){const M=_,{eventId:N,eventType:Y,data:de}=M.data,Pe=w.handlersMap[Y];if(!Pe?.size)return;M.ports[0].postMessage({status:"ack",eventId:N,eventType:Y});const Ke=Array.from(Pe).map(function(){var _t=(0,d.Z)(function*(Qn){return Qn(M.origin,de)});return function(Qn){return _t.apply(this,arguments)}}()),st=yield function Wa(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(Ke);M.ports[0].postMessage({status:"done",eventId:N,eventType:Y,response:st})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function qa(v="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return v+_}class nu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var M=this;return(0,d.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let Y,de;return new Promise((Pe,Ke)=>{const st=qa("",20);N.port1.start();const _t=setTimeout(()=>{Ke(new Error("unsupported_event"))},w);de={messageChannel:N,onMessage(Qn){const kr=Qn;if(kr.data.eventId===st)switch(kr.data.status){case"ack":clearTimeout(_t),Y=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Pe(kr.data.response);break;default:clearTimeout(_t),clearTimeout(Y),Ke(new Error("invalid_response"))}}},M.handlers.add(de),N.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:p,eventId:st,data:_},[N.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function Vn(){return window}function Pl(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function Ka(){return(Ka=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $s="firebaseLocalStorageDb",Gs="firebaseLocalStorage",Ll="fbase_key";class _o{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Za(v,p){return v.transaction([Gs],p?"readwrite":"readonly").objectStore(Gs)}function Zo(){const v=indexedDB.open($s,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Gs,{keyPath:Ll})}catch(M){_(M)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Gs)?p(w):(w.close(),yield function sd(){const v=indexedDB.deleteDatabase($s);return new _o(v).toPromise()}(),p(yield Zo()))}))})}function ms(v,p,_){return ru.apply(this,arguments)}function ru(){return(ru=(0,d.Z)(function*(v,p,_){const w=Za(v,!0).put({[Ll]:p,value:_});return new _o(w).toPromise()})).apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(v,p){const _=Za(v,!1).get(p),w=yield new _o(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function yo(v,p){const _=Za(v,!0).delete(p);return new _o(_).toPromise()}const Yo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Zo()),_.db})()}_withRetries(_){var w=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const N=yield w._openDb();return yield _(N)}catch(N){if(M++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Pl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=rd._getInstance(function Fl(){return Pl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(M,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(M,N){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(M,N){return["keyChanged"]});return function(M,N){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function go(){return Ka.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new nu(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=N[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ol(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Zo();return yield ms(_,mo,"1"),yield yo(_,mo),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(N=>ms(N,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,d.Z)(function*(){const M=yield w._withRetries(N=>function Vl(v,p){return Ya.apply(this,arguments)}(N,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(M=>yo(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const w=yield _._withRetries(Y=>{const de=Za(Y,!1).getAll();return new _o(de).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:Y,value:de}of w)N.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(de)&&(_.notifyListeners(Y,de),M.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!N.has(Y)&&(_.notifyListeners(Y,null),M.push(Y));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const N of Array.from(M))N(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Qo(v,p){return ln(v,"POST","/v2/accounts/mfaSignIn:start",Rt(v,p))}function zs(){return(zs=(0,d.Z)(function*(v){return(yield ln(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xo(v){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=M=>{const N=we("internal-error");N.customData=M,_(N)},w.type="text/javascript",w.charset="UTF-8",function Jo(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function jl(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Qa=1e12;class yn{constructor(p){this.auth=p,this.counter=Qa,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new $p(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||Qa;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Qa))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var w;return null===(w=_._widgets.get(p||Qa))||void 0===w||w.execute(),""})()}}class $p{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;$(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function R_(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gp=jl("rcb"),k_=new hn(3e4,6e4);class Uh{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Vn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return $(function sw(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Vn().grecaptcha):new Promise((w,M)=>{const N=Vn().setTimeout(()=>{M(we(p,"network-request-failed"))},k_.get());Vn()[Gp]=()=>{Vn().clearTimeout(N),delete Vn()[Gp];const de=Vn().grecaptcha;if(!de)return void M(we(p,"internal-error"));const Pe=de.render;de.render=(Ke,st)=>{const _t=Pe(Ke,st);return this.counter++,_t},this.hostLanguage=_,w(de)},Xo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Gp,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),M(we(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Vn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class su{load(p){return(0,d.Z)(function*(){return new yn(p)})()}clearedOneInstance(){}}const P_="recaptcha",O_={theme:"light",type:"image"};class mr{constructor(p,_=Object.assign({},O_),w){this.parameters=_,this.type=P_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(w),this.isInvisible="invisible"===this.parameters.size,$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;$(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new su:new Uh,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(N=>{const Y=de=>{!de||(p.tokenChangeListeners.delete(Y),N(de))};p.tokenChangeListeners.add(Y),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=Vn()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){$(ht()&&!Pl(),p.auth,"internal-error"),yield function Ja(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Jr(v){return zs.apply(this,arguments)}(p.auth);$(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gr{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Us._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function _s(){return(_s=(0,d.Z)(function*(v,p,_){const w=Cn(v),M=yield ui(w,p,(0,F.m9)(_));return new gr(M,N=>In(w,N))})).apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v);yield Gt(!1,w,"phone");const M=yield ui(w.auth,p,(0,F.m9)(_));return new gr(M,N=>vl(w,N))})).apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v),M=yield ui(w.auth,p,(0,F.m9)(_));return new gr(M,N=>bl(w,N))})).apply(this,arguments)}function ui(v,p,_){return bo.apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(v,p,_){var w;const M=yield _.verify();try{let N;if($("string"==typeof M,v,"argument-error"),$(_.type===P_,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const Y=N.session;if("phoneNumber"in N)return $("enroll"===Y.type,v,"internal-error"),(yield Rl(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{$("signin"===Y.type,v,"internal-error");const de=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return $(de,v,"missing-multi-factor-info"),(yield Qo(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield Fp(v,{phoneNumber:N.phoneNumber,recaptchaToken:M});return Y}}finally{_._reset()}})).apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(v,p){yield ao((0,F.m9)(v),p)})).apply(this,arguments)}let ou=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Cn(_)}verifyPhoneNumber(_,w){return ui(this.auth,_,(0,F.m9)(w))}static credential(_,w){return Us._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?Us._fromTokenResponse(w,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ws(v,p){return p?oe(p):($(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Hl extends wr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return tr(p,this._buildIdpRequest())}_linkToIdToken(p,_){return tr(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return tr(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Xr(v){return Ai(v.auth,new Hl(v),v.bypassAuthState)}function $l(v){const{auth:p,user:_}=v;return $(_,p,"internal-error"),lo(_,new Hl(v),v.bypassAuthState)}function di(v){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,d.Z)(function*(v){const{auth:p,user:_}=v;return $(_,p,"internal-error"),ao(_,new Hl(v),v.bypassAuthState)})).apply(this,arguments)}class rn{constructor(p,_,w,M,N=!1){this.auth=p,this.resolver=w,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(w,M){p.pendingPromise={resolve:w,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:N,tenantId:Y,error:de,type:Pe}=p;if(de)return void _.reject(de);const Ke={auth:_.auth,requestUri:w,sessionId:M,tenantId:Y||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Pe)(Ke))}catch(st){_.reject(st)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Xr;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return $l;default:xe(this.auth,"internal-error")}}resolve(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xi=new hn(2e3,1e4);function Ri(){return(Ri=(0,d.Z)(function*(v,p,_){const w=Cn(v);Ue(v,p,cs);const M=Ws(w,_);return new ia(w,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v);Ue(w.auth,p,cs);const M=Ws(w.auth,_);return new ia(w.auth,"reauthViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v);Ue(w.auth,p,cs);const M=Ws(w.auth,_);return new ia(w.auth,"linkViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}let ia=(()=>{class v extends rn{constructor(_,w,M,N,Y){super(_,w,N,Y),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const w=yield _.execute();return $(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,d.Z)(function*(){J(1===_.filter.length,"Popup operations only handle one event");const w=qa();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(we(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=null!==(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,xi.get())};_()}}return v.currentPopupAction=null,v})();const Zi=new Map;class au extends rn{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let w=Zi.get(_.auth._key());if(!w){try{const N=(yield function ql(v,p){return ys.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(N)}catch(M){w=()=>Promise.reject(M)}Zi.set(_.auth._key(),w)}return _.bypassAuthState||Zi.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const M=yield w.auth._redirectUserForId(p.eventId);if(M)return w.user=M,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ys(){return(ys=(0,d.Z)(function*(v,p){const _=jh(p),w=wo(v);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function ad(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(v,p){return wo(v)._set(jh(p),"true")})).apply(this,arguments)}function sa(v,p){Zi.set(v._key(),p)}function wo(v){return oe(v._redirectPersistence)}function jh(v){return Xn("pendingRedirect",v.config.apiKey,v.name)}function D(){return(D=(0,d.Z)(function*(v,p,_){const w=Cn(v);Ue(v,p,cs);const M=Ws(w,_);return yield ad(M,w),M._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v);Ue(w.auth,p,cs);const M=Ws(w.auth,_);yield ad(M,w.auth);const N=yield gt(w);return M._openRedirect(w.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(v,p,_){const w=(0,F.m9)(v);Ue(w.auth,p,cs);const M=Ws(w.auth,_);yield Gt(!1,w,p.providerId),yield ad(M,w.auth);const N=yield gt(w);return M._openRedirect(w.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function pt(){return(pt=(0,d.Z)(function*(v,p){return yield Cn(v)._initializationPromise,Et(v,p,!1)})).apply(this,arguments)}function Et(v,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(v,p,_=!1){const w=Cn(v),M=Ws(w,p),Y=yield new au(w,M,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield w._persistUserIfCurrent(Y.user),yield w._setRedirectUser(null,p)),Y})).apply(this,arguments)}function gt(v){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(v){const p=qa(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Xa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function aa(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oa(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!oa(p)){const M=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(we(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(el(p))}saveEventToCache(p){this.cachedEventUids.add(el(p)),this.lastProcessedEventTime=Date.now()}}function el(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function oa({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Eo(v){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(v,p={}){return ln(v,"GET","/v1/projects",p)})).apply(this,arguments)}const tl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ca=/^https?/;function L_(){return(L_=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Eo(v);for(const _ of p)try{if(ow(_))return}catch{}xe(v,"unauthorized-domain")})).apply(this,arguments)}function ow(v){const p=Oe(),{protocol:_,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===w}if(!ca.test(_))return!1;if(tl.test(v))return w===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const aw=new hn(3e4,6e4);function V_(){const v=Vn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let cd=null;function lw(v){return cd=cd||function $h(v){return new Promise((p,_)=>{var w,M,N;function Y(){V_(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{V_(),_(we(v,"network-request-failed"))},timeout:aw.get()})}if(null!==(M=null===(w=Vn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(N=Vn().gapi)||void 0===N||!N.load){const de=jl("iframefcb");return Vn()[de]=()=>{gapi.load?Y():_(we(v,"network-request-failed"))},Xo(`https://apis.google.com/js/api.js?onload=${de}`).catch(Pe=>_(Pe))}Y()}}).catch(p=>{throw cd=null,p})}(v),cd}const B_=new hn(5e3,15e3),IS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cw(v){const p=v.config;$(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?On(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:ae.SDK_VERSION},M=qp.get(v.config.apiHost);M&&(w.eid=M);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${_}?${(0,F.xO)(w).slice(1)}`}function lu(){return lu=(0,d.Z)(function*(v){const p=yield lw(v),_=Vn().gapi;return $(_,v,"internal-error"),p.open({where:document.body,url:cw(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IS,dontclear:!0},w=>new Promise(function(){var M=(0,d.Z)(function*(N,Y){yield w.restyle({setHideOnLeave:!1});const de=we(v,"network-request-failed"),Pe=Vn().setTimeout(()=>{Y(de)},B_.get());function Ke(){Vn().clearTimeout(Pe),N(w)}w.ping(Ke).then(Ke,()=>{Y(de)})});return function(N,Y){return M.apply(this,arguments)}}()))}),lu.apply(this,arguments)}const Kp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ud{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dd(v,p,_,w,M,N){$(v.config.authDomain,v,"auth-domain-config-required"),$(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:ae.SDK_VERSION,eventId:M};if(p instanceof cs){p.setDefaultLanguage(v.languageCode),Y.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(Y.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Pe,Ke]of Object.entries(N||{}))Y[Pe]=Ke}if(p instanceof us){const Pe=p.getScopes().filter(Ke=>""!==Ke);Pe.length>0&&(Y.scopes=Pe.join(","))}v.tenantId&&(Y.tid=v.tenantId);const de=Y;for(const Pe of Object.keys(de))void 0===de[Pe]&&delete de[Pe];return`${function hw({config:v}){return v.emulator?On(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(de).slice(1)}`}const Qp="webStorageSupport";class Co extends class pw{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Co(p)}_finalizeEnroll(p,_,w){return function kl(v,p){return ln(v,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(v,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Ul(v,p){return ln(v,"POST","/v2/accounts/mfaSignIn:finalize",Rt(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hd=(()=>{class v{constructor(){}static assertion(_){return Co._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var z_="@firebase/auth";class TS{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{var M;p((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nl(){return window}function Jp(){return(Jp=(0,d.Z)(function*(v,p,_){var w;const{BuildInfo:M}=nl();J(p.sessionId,"AuthEvent did not contain a session ID");const N=yield q_(p.sessionId),Y={};return nn()?Y.ibi=M.packageName:qn()?Y.apn=M.packageName:xe(v,"operation-not-supported-in-this-environment"),M.displayName&&(Y.appDisplayName=M.displayName),Y.sessionId=N,dd(v,_,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,Y)})).apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(v){const{BuildInfo:p}=nl(),_={};nn()?_.iosBundleId=p.packageName:qn()?_.androidPackageName=p.packageName:xe(v,"operation-not-supported-in-this-environment"),yield Eo(v,_)})).apply(this,arguments)}function Gh(){return(Gh=(0,d.Z)(function*(v,p,_){const{cordova:w}=nl();let M=()=>{};try{yield new Promise((N,Y)=>{let de=null;function Pe(){var _t;N();const Qn=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Qn&&Qn(),"function"==typeof _?.close&&_.close()}function Ke(){de||(de=window.setTimeout(()=>{Y(we(v,"redirect-cancelled-by-user"))},2e3))}function st(){"visible"===document?.visibilityState&&Ke()}p.addPassiveListener(Pe),document.addEventListener("resume",Ke,!1),qn()&&document.addEventListener("visibilitychange",st,!1),M=()=>{p.removePassiveListener(Pe),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",st,!1),de&&window.clearTimeout(de)}})}finally{M()}})).apply(this,arguments)}function q_(v){return K_.apply(this,arguments)}function K_(){return(K_=(0,d.Z)(function*(v){const p=MS(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function MS(v){if(J(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function AS(v){(0,ae._registerComponent)(new le.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),{apiKey:N,authDomain:Y}=w.options;return((de,Pe)=>{$(N&&!N.includes(":"),"invalid-api-key",{appName:de.name}),$(!Y?.includes(":"),"argument-error",{appName:de.name});const Ke={apiKey:N,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ps(v)},st=new Nt(de,Pe,Ke);return function Fe(v,p){const _=p?.persistence||[],w=(Array.isArray(_)?_:[_]).map(oe);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(st,_),st})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new le.wA("auth-internal",p=>{const _=Cn(p.getProvider("auth").getImmediate());return new TS(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(z_,"0.20.7",function SS(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(z_,"0.20.7","esm2017")}("Browser");class Xp extends Xa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function vw(v){return zh.apply(this,arguments)}function zh(){return(zh=(0,d.Z)(function*(v){const p=yield tm()._get(nm(v));return p&&(yield tm()._remove(nm(v))),p})).apply(this,arguments)}function ww(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function tm(){return oe(Ga)}function nm(v){return Xn("authEvent",v.config.apiKey,v.name)}function qh(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,F.zd)(_.join("?"))}function Y_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function md(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function J_(v=(0,F.z$)()){return!("file:"!==md()&&"ionic:"!==md()&&"capacitor:"!==md()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function gd(){try{const v=self.localStorage,p=qa();if(v)return v.setItem(p,"1"),v.removeItem(p),!function uu(v=(0,F.z$)()){return function kS(){return(0,F.w1)()&&11===document?.documentMode}()||function NS(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return rr()&&(0,F.hl)()}return!1}function rr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function da(){return(function Dw(){return"http:"===md()||"https:"===md()}()||(0,F.ru)()||J_())&&!function Tw(){return(0,F.b$)()||(0,F.UG)()}()&&gd()&&!rr()}function Un(){return J_()&&typeof document<"u"}function Kl(){return(Kl=(0,d.Z)(function*(){return!!Un()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Ye={LOCAL:"local",NONE:"none",SESSION:"session"},Zl=$,rl="persistence";function _d(v){return vs.apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(v){yield v._initializationPromise;const p=Qi(),_=Xn(rl,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function Qi(){var v;try{return(null===(v=function Yi(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const yr=$;class Ur{constructor(){this.browserResolver=oe(class fw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ki,this._completeRedirectFn=Et,this._overrideRedirectResult=sa}_openPopup(p,_,w,M){var N=this;return(0,d.Z)(function*(){var Y;J(null===(Y=N.eventManagers[p._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const de=dd(p,_,w,Oe(),M);return function Zp(v,p,_,w=500,M=600){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),Y=Math.max((window.screen.availWidth-w)/2,0).toString();let de="";const Pe=Object.assign(Object.assign({},Kp),{width:w.toString(),height:M.toString(),top:N,left:Y}),Ke=(0,F.z$)().toLowerCase();_&&(de=Gi(Ke)?"_blank":_),En(Ke)&&(p=p||"http://localhost",Pe.scrollbars="yes");const st=Object.entries(Pe).reduce((Qn,[kr,Jl])=>`${Qn}${kr}=${Jl},`,"");if(function Ti(v=(0,F.z$)()){var p;return nn(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ke)&&"_self"!==de)return function H_(v,p){const _=document.createElement("a");_.href=v,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",de),new ud(null);const _t=window.open(p||"",de,st);$(_t,v,"popup-blocked");try{_t.focus()}catch{}return new ud(_t)}(p,de,qa())})()}_openRedirect(p,_,w,M){var N=this;return(0,d.Z)(function*(){return yield N._originValidation(p),function Mi(v){Vn().location.href=v}(dd(p,_,w,Oe(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:N}=this.eventManagers[_];return M?Promise.resolve(M):(J(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const w=yield function j_(v){return lu.apply(this,arguments)}(p),M=new Xa(p);return w.register("authEvent",N=>($(N?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=w,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Qp,{type:Qp},M=>{var N;const Y=null===(N=M?.[0])||void 0===N?void 0:N[Qp];void 0!==Y&&_(!!Y),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ld(v){return L_.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return no()||Wn()||nn()}}),this.cordovaResolver=oe(class Ew{constructor(){this._redirectPersistence=Ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Et,this._overrideRedirectResult=sa}_initialize(p){var _=this;return(0,d.Z)(function*(){const w=p._key();let M=_.eventManagers.get(w);return M||(M=new Xp(p),_.eventManagers.set(w,M),_.attachCallbackListeners(p,M)),M})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,w,M){var N=this;return(0,d.Z)(function*(){!function W_(v){var p,_,w,M,N,Y,de,Pe,Ke,st;const _t=nl();$("function"==typeof(null===(p=_t?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof(null===(_=_t?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(N=null===(M=null===(w=_t?.cordova)||void 0===w?void 0:w.plugins)||void 0===M?void 0:M.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Pe=null===(de=null===(Y=_t?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===de?void 0:de.browsertab)||void 0===Pe?void 0:Pe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(st=null===(Ke=_t?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===st?void 0:st.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Y=yield N._initialize(p);yield Y.initialized(),Y.resetRedirect(),function Wp(){Zi.clear()}(),yield N._originValidation(p);const de=function em(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:ww(),postBody:null,tenantId:v.tenantId,error:we(v,"no-auth-event")}}(p,w,M);yield function RS(v,p){return tm()._set(nm(v),p)}(p,de);const Pe=yield function _w(v,p,_){return Jp.apply(this,arguments)}(p,de,_),Ke=yield function ua(v){const{cordova:p}=nl();return new Promise(_=>{p.plugins.browsertab.isAvailable(w=>{let M=null;w?p.plugins.browsertab.openUrl(v):M=p.InAppBrowser.open(v,function si(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(M)})})}(Pe);return function pd(v,p,_){return Gh.apply(this,arguments)}(p,Y,Ke)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function yw(v){return fd.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:w,handleOpenURL:M,BuildInfo:N}=nl(),Y=setTimeout((0,d.Z)(function*(){yield vw(p),_.onEvent(Y_())}),500),de=function(){var st=(0,d.Z)(function*(_t){clearTimeout(Y);const Qn=yield vw(p);let kr=null;Qn&&_t?.url&&(kr=function bw(v,p){var _,w;const M=function Wh(v){const p=qh(v),_=p.link?decodeURIComponent(p.link):void 0,w=qh(_).link,M=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return qh(M).link||M||w||_||v}(p);if(M.includes("/__/auth/callback")){const N=qh(M),Y=N.firebaseError?function Z_(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,de=null===(w=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Pe=de?we(de):null;return Pe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(Qn,_t.url)),_.onEvent(kr||Y_())});return function(Qn){return st.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,de);const Pe=M,Ke=`${N.packageName.toLowerCase()}://`;nl().handleOpenURL=function(){var st=(0,d.Z)(function*(_t){if(_t.toLowerCase().startsWith(Ke)&&de({url:_t}),"function"==typeof Pe)try{Pe(_t)}catch(Qn){console.error(Qn)}});return function(_t){return st.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ki,this._completeRedirectFn=Et,this._overrideRedirectResult=sa}_initialize(p){var _=this;return(0,d.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,w,M){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,_,w,M)})()}_openRedirect(p,_,w,M){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,_,w,M)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Un()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const _=yield function kn(){return Kl.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function sm(v){return v.unwrap()}function Kh(v){return om(v)}function om(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ou.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=pl;break;case"facebook.com":w=Oa;break;case"github.com":w=Bc;break;case"twitter.com":w=Yr;break;default:const{oauthIdToken:M,oauthAccessToken:N,oauthTokenSecret:Y,pendingToken:de,nonce:Pe}=p;return N||Y||M||de?de?_.startsWith("saml.")?oo._create(_,de):ls._fromParams({providerId:_,signInMethod:_,pendingToken:de,idToken:M,accessToken:N}):new so(_).credential({idToken:M,accessToken:N,rawNonce:Pe}):null}return v instanceof F.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function sn(v,p){return p.catch(_=>{throw _ instanceof F.ZR&&function hi(v,p){var _,w;const M=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=p)||void 0===w?void 0:w.code))p.resolver=new Yh(v,function xn(v,p){var _;const w=(0,F.m9)(v),M=p;return $(p.customData.operationType,w,"argument-error"),$(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),xl._fromError(w,M)}(v,p));else if(M){const N=om(p),Y=p;N&&(Y.credential=N,Y.tenantId=M.tenantId||void 0,Y.email=M.email||void 0,Y.phoneNumber=M.phoneNumber||void 0)}}(v,_),_}).then(_=>{const M=_.user;return{operationType:_.operationType,credential:Kh(_),additionalUserInfo:Ml(_),user:jr.getOrCreate(M)}})}function vd(v,p){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,d.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:w=>sn(v,_.confirm(w))}})).apply(this,arguments)}class Yh{constructor(p,_){this.resolver=_,this.auth=function yd(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return sn(sm(this.auth),this.resolver.resolveSignIn(p))}}class jr{constructor(p){this._delegate=p,this.multiFactor=function Ko(v){const p=(0,F.m9)(v);return po.has(p)||po.set(p,Bh._fromUser(p)),po.get(p)}(p)}static getOrCreate(p){return jr.USER_MAP.has(p)||jr.USER_MAP.set(p,new jr(p)),jr.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,d.Z)(function*(){return sn(_.auth,vl(_._delegate,p))})()}linkWithPhoneNumber(p,_){var w=this;return(0,d.Z)(function*(){return vd(w.auth,function Br(v,p,_){return ci.apply(this,arguments)}(w._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,d.Z)(function*(){return sn(_.auth,function F_(v,p,_){return zl.apply(this,arguments)}(_._delegate,p,Ur))})()}linkWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield _d(Cn(_.auth)),function ee(v,p,_){return function ue(v,p,_){return Ae.apply(this,arguments)}(v,p,_)}(_._delegate,p,Ur)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,d.Z)(function*(){return sn(_.auth,bl(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return vd(this.auth,function ta(v,p,_){return na.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return sn(this.auth,function Dn(v,p,_){return it.apply(this,arguments)}(this._delegate,p,Ur))}reauthenticateWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield _d(Cn(_.auth)),function S(v,p,_){return function R(v,p,_){return U.apply(this,arguments)}(v,p,_)}(_._delegate,p,Ur)})()}sendEmailVerification(p){return function Kc(v,p){return Ha.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,d.Z)(function*(){return yield function Vr(v,p){return ml.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Zu(v,p){return ho((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function uo(v,p){return ho((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ra(v,p){return od.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Qc(v,p){return Jc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Zc(v,p,_){return Tl.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jr.USER_MAP=new WeakMap;const du=$;let am=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=_.options;du(M,"invalid-api-key",{appName:_.name}),du(M,"invalid-api-key",{appName:_.name});const N=typeof window<"u"?Ur:void 0;this._delegate=w.initialize({options:{persistence:X_(M,_.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ee),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function Rc(v,p,_){const w=Cn(v);$(w._canInitEmulator,w,"emulator-config-failed"),$(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const M=!!_?.disableWarnings,N=zi(p),{host:Y,port:de}=function Kn(v){const p=zi(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const N=M[1];return{host:N,port:Os(w.substr(N.length+1))}}{const[N,Y]=w.split(":");return{host:N,port:Os(Y)}}}(p);w.config.emulator={url:`${N}//${Y}${null===de?"":`:${de}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Y,port:de,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Fs(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function li(v,p){return La.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Va(this._delegate,_)}confirmPasswordReset(_,w){return function Il(v,p,_){return Go.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var M=this;return(0,d.Z)(function*(){return sn(M._delegate,function Ba(v,p,_){return Mn.apply(this,arguments)}(M._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Dl(v,p){return ja.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function ps(v,p){return"EMAIL_SIGNIN"===fl.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,d.Z)(function*(){du(da(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function $e(v,p){return pt.apply(this,arguments)}(_._delegate,Ur);return w?sn(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Cw(v,p){Cn(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,w,M){const{next:N,error:Y,complete:de}=lm(_,w,M);return this._delegate.onAuthStateChanged(N,Y,de)}onIdTokenChanged(_,w,M){const{next:N,error:Y,complete:de}=lm(_,w,M);return this._delegate.onIdTokenChanged(N,Y,de)}sendSignInLinkToEmail(_,w){return function Wc(v,p,_){return co.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Cl(v,p,_){return An.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,d.Z)(function*(){let M;switch(function Yl(v,p){Zl(Object.values(Ye).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?Zl(p!==Ye.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Zl(p===Ye.NONE,v,"unsupported-persistence-type"):rr()?Zl(p===Ye.NONE||p===Ye.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Zl(p===Ye.NONE||gd(),v,"unsupported-persistence-type")}(w._delegate,_),_){case Ye.SESSION:M=Ki;break;case Ye.LOCAL:M=(yield oe(Yo)._isAvailable())?Yo:Ga;break;case Ye.NONE:M=tn;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return sn(this._delegate,function Fh(v){return Sn.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return sn(this._delegate,In(this._delegate,_))}signInWithCustomToken(_){return sn(this._delegate,function $c(v,p){return Fa.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return sn(this._delegate,function qi(v,p,_){return In((0,F.m9)(v),Wi.credential(p,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return sn(this._delegate,function jp(v,p,_){return Ua.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return vd(this._delegate,function zp(v,p,_){return _s.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,d.Z)(function*(){return du(da(),w._delegate,"operation-not-supported-in-this-environment"),sn(w._delegate,function xr(v,p,_){return Ri.apply(this,arguments)}(w._delegate,_,Ur))})()}signInWithRedirect(_){var w=this;return(0,d.Z)(function*(){return du(da(),w._delegate,"operation-not-supported-in-this-environment"),yield _d(w._delegate),function Bn(v,p,_){return function Hh(v,p,_){return D.apply(this,arguments)}(v,p,_)}(w._delegate,_,Ur)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function zc(v,p){return Ku.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ye,v})();function lm(v,p,_){let w=v;"function"!=typeof v&&({next:w,error:p,complete:_}=v);const M=w;return{next:Y=>M(Y&&jr.getOrCreate(Y)),error:p,complete:_}}function X_(v,p){const _=function ha(v,p){const _=Qi();if(!_)return[];const w=Xn(rl,v,p);switch(_.getItem(w)){case Ye.NONE:return[tn];case Ye.LOCAL:return[Yo,Ki];case Ye.SESSION:return[Ki];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes(Yo)&&_.push(Yo),typeof window<"u")for(const w of[Ga,Ki])_.includes(w)||_.push(w);return _.includes(tn)||_.push(tn),_}class Ql{constructor(){this.providerId="phone",this._delegate=new ou(sm(te.Z.auth()))}static credential(p,_){return ou.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Ql.PHONE_SIGN_IN_METHOD=ou.PHONE_SIGN_IN_METHOD,Ql.PROVIDER_ID=ou.PROVIDER_ID;const ey=$;class cm{constructor(p,_,w=te.Z.app()){var M;ey(null===(M=w.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new mr(p,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function bd(v){v.INTERNAL.registerComponent(new le.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new am(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wi,FacebookAuthProvider:Oa,GithubAuthProvider:Bc,GoogleAuthProvider:pl,OAuthProvider:so,SAMLAuthProvider:oi,PhoneAuthProvider:Ql,PhoneMultiFactorGenerator:hd,RecaptchaVerifier:cm,TwitterAuthProvider:Yr,Auth:am,AuthCredential:wr,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.20")}(te.Z)},9751:(at,De,L)=>{L.d(De,{y:()=>me});var d=L(930),te=L(727),F=L(8822),ae=L(9635),se=L(2416),fe=L(576),le=L(2806);let me=(()=>{class X{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ee=new X;return Ee.source=this,Ee.operator=Re,Ee}subscribe(Re,Ee,tt){const ve=function W(X){return X&&X instanceof d.Lv||function G(X){return X&&(0,fe.m)(X.next)&&(0,fe.m)(X.error)&&(0,fe.m)(X.complete)}(X)&&(0,te.Nn)(X)}(Re)?Re:new d.Hp(Re,Ee,tt);return(0,le.x)(()=>{const{operator:_e,source:Xe}=this;ve.add(_e?_e.call(ve,Xe):Xe?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ee){Re.error(Ee)}}forEach(Re,Ee){return new(Ee=ge(Ee))((tt,ve)=>{const _e=new d.Hp({next:Xe=>{try{Re(Xe)}catch(lt){ve(lt),_e.unsubscribe()}},error:ve,complete:tt});this.subscribe(_e)})}_subscribe(Re){var Ee;return null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(Re)}[F.L](){return this}pipe(...Re){return(0,ae.U)(Re)(this)}toPromise(Re){return new(Re=ge(Re))((Ee,tt)=>{let ve;this.subscribe(_e=>ve=_e,_e=>tt(_e),()=>Ee(ve))})}}return X.create=Be=>new X(Be),X})();function ge(X){var Be;return null!==(Be=X??se.v.Promise)&&void 0!==Be?Be:Promise}},7579:(at,De,L)=>{L.d(De,{x:()=>le});var d=L(9751),te=L(727);const ae=(0,L(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),fe=L(2806);let le=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new me(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new ae}next(W){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:Be,observers:Re}=this;return X||Be?te.Lc:(this.currentObservers=null,Re.push(W),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Re,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:Be,isStopped:Re}=this;X?W.error(Be):Re&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return ge.create=(G,W)=>new me(G,W),ge})();class me extends le{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,G)}error(G){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==X?X:te.Lc}}},930:(at,De,L)=>{L.d(De,{Hp:()=>tt,Lv:()=>X});var d=L(576),te=L(727),F=L(2416),ae=L(7849),se=L(5032);const fe=ge("C",void 0,void 0);function ge(xe,we,Ie){return{kind:xe,value:we,error:Ie}}var G=L(3410),W=L(2806);class X extends te.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,te.Nn)(we)&&we.add(this)):this.destination=lt}static create(we,Ie,Ue){return new tt(we,Ie,Ue)}next(we){this.isStopped?Xe(function me(xe){return ge("N",xe,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Xe(function le(xe){return ge("E",void 0,xe)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Xe(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Re(xe,we){return Be.call(xe,we)}class Ee{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(we)}catch(Ue){ve(Ue)}}error(we){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(we)}catch(Ue){ve(Ue)}else ve(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ie){ve(Ie)}}}class tt extends X{constructor(we,Ie,Ue){let He;if(super(),(0,d.m)(we)||!we)He={next:we??void 0,error:Ie??void 0,complete:Ue??void 0};else{let $;this&&F.v.useDeprecatedNextContext?($=Object.create(we),$.unsubscribe=()=>this.unsubscribe(),He={next:we.next&&Re(we.next,$),error:we.error&&Re(we.error,$),complete:we.complete&&Re(we.complete,$)}):He=we}this.destination=new Ee(He)}}function ve(xe){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(xe):(0,ae.h)(xe)}function Xe(xe,we){const{onStoppedNotification:Ie}=F.v;Ie&&G.z.setTimeout(()=>Ie(xe,we))}const lt={closed:!0,next:se.Z,error:function _e(xe){throw xe},complete:se.Z}},727:(at,De,L)=>{L.d(De,{Lc:()=>fe,w0:()=>se,Nn:()=>le});var d=L(576);const F=(0,L(3888).d)(ge=>function(W){ge(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,Be)=>`${Be+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ae=L(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Re of W)Re.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Re){G=Re instanceof F?Re.errors:[Re]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Re of Be)try{me(Re)}catch(Ee){G=G??[],Ee instanceof F?G=[...G,...Ee.errors]:G.push(Ee)}}if(G)throw new F(G)}}add(G){var W;if(G&&G!==this)if(this.closed)me(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,ae.P)(W,G)}remove(G){const{_finalizers:W}=this;W&&(0,ae.P)(W,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const ge=new se;return ge.closed=!0,ge})();const fe=se.EMPTY;function le(ge){return ge instanceof se||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function me(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2416:(at,De,L)=>{L.d(De,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,L)=>{L.d(De,{E:()=>te});const te=new(L(9751).y)(se=>se.complete())},8996:(at,De,L)=>{L.d(De,{D:()=>we});var d=L(8421),te=L(5363),F=L(9468),fe=L(9751),me=L(2202),ge=L(576),G=L(9672);function X(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new fe.y(He=>{(0,G.f)(He,Ue,()=>{const $=Ie[Symbol.asyncIterator]();(0,G.f)(He,Ue,()=>{$.next().then(ye=>{ye.done?He.complete():He.next(ye.value)})},0,!0)})})}var Be=L(3670),Re=L(8239),Ee=L(1144),tt=L(6495),ve=L(2206),_e=L(4532),Xe=L(3260);function we(Ie,Ue){return Ue?function xe(Ie,Ue){if(null!=Ie){if((0,Be.c)(Ie))return function ae(Ie,Ue){return(0,d.Xf)(Ie).pipe((0,F.R)(Ue),(0,te.Q)(Ue))}(Ie,Ue);if((0,Ee.z)(Ie))return function le(Ie,Ue){return new fe.y(He=>{let $=0;return Ue.schedule(function(){$===Ie.length?He.complete():(He.next(Ie[$++]),He.closed||this.schedule())})})}(Ie,Ue);if((0,Re.t)(Ie))return function se(Ie,Ue){return(0,d.Xf)(Ie).pipe((0,F.R)(Ue),(0,te.Q)(Ue))}(Ie,Ue);if((0,ve.D)(Ie))return X(Ie,Ue);if((0,tt.T)(Ie))return function W(Ie,Ue){return new fe.y(He=>{let $;return(0,G.f)(He,Ue,()=>{$=Ie[me.h](),(0,G.f)(He,Ue,()=>{let ye,J;try{({value:ye,done:J}=$.next())}catch(ne){return void He.error(ne)}J?He.complete():He.next(ye)},0,!0)}),()=>(0,ge.m)($?.return)&&$.return()})}(Ie,Ue);if((0,Xe.L)(Ie))return function lt(Ie,Ue){return X((0,Xe.Q)(Ie),Ue)}(Ie,Ue)}throw(0,_e.z)(Ie)}(Ie,Ue):(0,d.Xf)(Ie)}},8421:(at,De,L)=>{L.d(De,{Xf:()=>Be});var d=L(655),te=L(1144),F=L(8239),ae=L(9751),se=L(3670),fe=L(2206),le=L(4532),me=L(6495),ge=L(3260),G=L(576),W=L(7849),X=L(8822);function Be(xe){if(xe instanceof ae.y)return xe;if(null!=xe){if((0,se.c)(xe))return function Re(xe){return new ae.y(we=>{const Ie=xe[X.L]();if((0,G.m)(Ie.subscribe))return Ie.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,te.z)(xe))return function Ee(xe){return new ae.y(we=>{for(let Ie=0;Ie<xe.length&&!we.closed;Ie++)we.next(xe[Ie]);we.complete()})}(xe);if((0,F.t)(xe))return function tt(xe){return new ae.y(we=>{xe.then(Ie=>{we.closed||(we.next(Ie),we.complete())},Ie=>we.error(Ie)).then(null,W.h)})}(xe);if((0,fe.D)(xe))return _e(xe);if((0,me.T)(xe))return function ve(xe){return new ae.y(we=>{for(const Ie of xe)if(we.next(Ie),we.closed)return;we.complete()})}(xe);if((0,ge.L)(xe))return function Xe(xe){return _e((0,ge.Q)(xe))}(xe)}throw(0,le.z)(xe)}function _e(xe){return new ae.y(we=>{(function lt(xe,we){var Ie,Ue,He,$;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,d.KL)(xe);!(Ue=yield Ie.next()).done;)if(we.next(Ue.value),we.closed)return}catch(ye){He={error:ye}}finally{try{Ue&&!Ue.done&&($=Ie.return)&&(yield $.call(Ie))}finally{if(He)throw He.error}}we.complete()})})(xe,we).catch(Ie=>we.error(Ie))})}},6451:(at,De,L)=>{L.d(De,{T:()=>fe});var d=L(8189),te=L(8421),F=L(515),ae=L(3269),se=L(8996);function fe(...le){const me=(0,ae.yG)(le),ge=(0,ae._6)(le,1/0),G=le;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,d.J)(ge)((0,se.D)(G,me)):F.E}},5403:(at,De,L)=>{L.d(De,{x:()=>te});var d=L(930);function te(ae,se,fe,le,me){return new F(ae,se,fe,le,me)}class F extends d.Lv{constructor(se,fe,le,me,ge,G){super(se),this.onFinalize=ge,this.shouldUnsubscribe=G,this._next=fe?function(W){try{fe(W)}catch(X){se.error(X)}}:super._next,this._error=me?function(W){try{me(W)}catch(X){se.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(at,De,L)=>{L.d(De,{U:()=>F});var d=L(4482),te=L(5403);function F(ae,se){return(0,d.e)((fe,le)=>{let me=0;fe.subscribe((0,te.x)(le,ge=>{le.next(ae.call(se,ge,me++))}))})}},8189:(at,De,L)=>{L.d(De,{J:()=>F});var d=L(5577),te=L(4671);function F(ae=1/0){return(0,d.z)(te.y,ae)}},5577:(at,De,L)=>{L.d(De,{z:()=>me});var d=L(4004),te=L(8421),F=L(4482),ae=L(9672),se=L(5403),le=L(576);function me(ge,G,W=1/0){return(0,le.m)(G)?me((X,Be)=>(0,d.U)((Re,Ee)=>G(X,Re,Be,Ee))((0,te.Xf)(ge(X,Be))),W):("number"==typeof G&&(W=G),(0,F.e)((X,Be)=>function fe(ge,G,W,X,Be,Re,Ee,tt){const ve=[];let _e=0,Xe=0,lt=!1;const xe=()=>{lt&&!ve.length&&!_e&&G.complete()},we=Ue=>_e<X?Ie(Ue):ve.push(Ue),Ie=Ue=>{Re&&G.next(Ue),_e++;let He=!1;(0,te.Xf)(W(Ue,Xe++)).subscribe((0,se.x)(G,$=>{Be?.($),Re?we($):G.next($)},()=>{He=!0},void 0,()=>{if(He)try{for(_e--;ve.length&&_e<X;){const $=ve.shift();Ee?(0,ae.f)(G,Ee,()=>Ie($)):Ie($)}xe()}catch($){G.error($)}}))};return ge.subscribe((0,se.x)(G,we,()=>{lt=!0,xe()})),()=>{tt?.()}}(X,Be,ge,W)))}},5363:(at,De,L)=>{L.d(De,{Q:()=>ae});var d=L(9672),te=L(4482),F=L(5403);function ae(se,fe=0){return(0,te.e)((le,me)=>{le.subscribe((0,F.x)(me,ge=>(0,d.f)(me,se,()=>me.next(ge),fe),()=>(0,d.f)(me,se,()=>me.complete(),fe),ge=>(0,d.f)(me,se,()=>me.error(ge),fe)))})}},3099:(at,De,L)=>{L.d(De,{B:()=>se});var d=L(8421),te=L(7579),F=L(930),ae=L(4482);function se(le={}){const{connector:me=(()=>new te.x),resetOnError:ge=!0,resetOnComplete:G=!0,resetOnRefCountZero:W=!0}=le;return X=>{let Be,Re,Ee,tt=0,ve=!1,_e=!1;const Xe=()=>{Re?.unsubscribe(),Re=void 0},lt=()=>{Xe(),Be=Ee=void 0,ve=_e=!1},xe=()=>{const we=Be;lt(),we?.unsubscribe()};return(0,ae.e)((we,Ie)=>{tt++,!_e&&!ve&&Xe();const Ue=Ee=Ee??me();Ie.add(()=>{tt--,0===tt&&!_e&&!ve&&(Re=fe(xe,W))}),Ue.subscribe(Ie),!Be&&tt>0&&(Be=new F.Hp({next:He=>Ue.next(He),error:He=>{_e=!0,Xe(),Re=fe(lt,ge,He),Ue.error(He)},complete:()=>{ve=!0,Xe(),Re=fe(lt,G),Ue.complete()}}),(0,d.Xf)(we).subscribe(Be))})(X)}}function fe(le,me,...ge){if(!0===me)return void le();if(!1===me)return;const G=new F.Hp({next:()=>{G.unsubscribe(),le()}});return me(...ge).subscribe(G)}},9468:(at,De,L)=>{L.d(De,{R:()=>te});var d=L(4482);function te(F,ae=0){return(0,d.e)((se,fe)=>{fe.add(F.schedule(()=>se.subscribe(fe),ae))})}},8505:(at,De,L)=>{L.d(De,{b:()=>se});var d=L(576),te=L(4482),F=L(5403),ae=L(4671);function se(fe,le,me){const ge=(0,d.m)(fe)||le||me?{next:fe,error:le,complete:me}:fe;return ge?(0,te.e)((G,W)=>{var X;null===(X=ge.subscribe)||void 0===X||X.call(ge);let Be=!0;G.subscribe((0,F.x)(W,Re=>{var Ee;null===(Ee=ge.next)||void 0===Ee||Ee.call(ge,Re),W.next(Re)},()=>{var Re;Be=!1,null===(Re=ge.complete)||void 0===Re||Re.call(ge),W.complete()},Re=>{var Ee;Be=!1,null===(Ee=ge.error)||void 0===Ee||Ee.call(ge,Re),W.error(Re)},()=>{var Re,Ee;Be&&(null===(Re=ge.unsubscribe)||void 0===Re||Re.call(ge)),null===(Ee=ge.finalize)||void 0===Ee||Ee.call(ge)}))}):ae.y}},4408:(at,De,L)=>{L.d(De,{o:()=>se});var d=L(727);class te extends d.w0{constructor(le,me){super()}schedule(le,me=0){return this}}const F={setInterval(fe,le,...me){const{delegate:ge}=F;return ge?.setInterval?ge.setInterval(fe,le,...me):setInterval(fe,le,...me)},clearInterval(fe){const{delegate:le}=F;return(le?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=L(8737);class se extends te{constructor(le,me){super(le,me),this.scheduler=le,this.work=me,this.pending=!1}schedule(le,me=0){if(this.closed)return this;this.state=le;const ge=this.id,G=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(G,ge,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(G,this.id,me),this}requestAsyncId(le,me,ge=0){return F.setInterval(le.flush.bind(le,this),ge)}recycleAsyncId(le,me,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return me;F.clearInterval(me)}execute(le,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(le,me);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,me){let G,ge=!1;try{this.work(le)}catch(W){ge=!0,G=W||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:me}=this,{actions:ge}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ge,this),null!=le&&(this.id=this.recycleAsyncId(me,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,De,L)=>{L.d(De,{v:()=>F});var d=L(6063);class te{constructor(se,fe=te.now){this.schedulerActionCtor=se,this.now=fe}schedule(se,fe=0,le){return new this.schedulerActionCtor(this,se).schedule(le,fe)}}te.now=d.l.now;class F extends te{constructor(se,fe=te.now){super(se,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:fe}=this;if(this._active)return void fe.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=fe.shift());if(this._active=!1,le){for(;se=fe.shift();)se.unsubscribe();throw le}}}},4986:(at,De,L)=>{L.d(De,{P:()=>ae,z:()=>F});var d=L(4408);const F=new(L(7565).v)(d.o),ae=F},6063:(at,De,L)=>{L.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(at,De,L)=>{L.d(De,{z:()=>d});const d={setTimeout(te,F,...ae){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(te,F,...ae):setTimeout(te,F,...ae)},clearTimeout(te){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(at,De,L)=>{L.d(De,{h:()=>te});const te=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,L)=>{L.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(at,De,L)=>{L.d(De,{_6:()=>fe,jO:()=>ae,yG:()=>se});var d=L(576),te=L(3532);function F(le){return le[le.length-1]}function ae(le){return(0,d.m)(F(le))?le.pop():void 0}function se(le){return(0,te.K)(F(le))?le.pop():void 0}function fe(le,me){return"number"==typeof F(le)?le.pop():me}},8737:(at,De,L)=>{function d(te,F){if(te){const ae=te.indexOf(F);0<=ae&&te.splice(ae,1)}}L.d(De,{P:()=>d})},3888:(at,De,L)=>{function d(te){const ae=te(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(De,{d:()=>d})},2806:(at,De,L)=>{L.d(De,{O:()=>ae,x:()=>F});var d=L(2416);let te=null;function F(se){if(d.v.useDeprecatedSynchronousErrorHandling){const fe=!te;if(fe&&(te={errorThrown:!1,error:null}),se(),fe){const{errorThrown:le,error:me}=te;if(te=null,le)throw me}}else se()}function ae(se){d.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(at,De,L)=>{function d(te,F,ae,se=0,fe=!1){const le=F.schedule(function(){ae(),fe?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(le),!fe)return le}L.d(De,{f:()=>d})},4671:(at,De,L)=>{function d(te){return te}L.d(De,{y:()=>d})},1144:(at,De,L)=>{L.d(De,{z:()=>d});const d=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(at,De,L)=>{L.d(De,{D:()=>te});var d=L(576);function te(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(at,De,L)=>{function d(te){return"function"==typeof te}L.d(De,{m:()=>d})},3670:(at,De,L)=>{L.d(De,{c:()=>F});var d=L(8822),te=L(576);function F(ae){return(0,te.m)(ae[d.L])}},6495:(at,De,L)=>{L.d(De,{T:()=>F});var d=L(2202),te=L(576);function F(ae){return(0,te.m)(ae?.[d.h])}},8239:(at,De,L)=>{L.d(De,{t:()=>te});var d=L(576);function te(F){return(0,d.m)(F?.then)}},3260:(at,De,L)=>{L.d(De,{L:()=>ae,Q:()=>F});var d=L(655),te=L(576);function F(se){return(0,d.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:me,done:ge}=yield(0,d.qq)(le.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(me)}}finally{le.releaseLock()}})}function ae(se){return(0,te.m)(se?.getReader)}},3532:(at,De,L)=>{L.d(De,{K:()=>te});var d=L(576);function te(F){return F&&(0,d.m)(F.schedule)}},4482:(at,De,L)=>{L.d(De,{A:()=>te,e:()=>F});var d=L(576);function te(ae){return(0,d.m)(ae?.lift)}function F(ae){return se=>{if(te(se))return se.lift(function(fe){try{return ae(fe,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,De,L)=>{function d(){}L.d(De,{Z:()=>d})},9635:(at,De,L)=>{L.d(De,{U:()=>F,z:()=>te});var d=L(4671);function te(...ae){return F(ae)}function F(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(fe){return ae.reduce((le,me)=>me(le),fe)}}},7849:(at,De,L)=>{L.d(De,{h:()=>F});var d=L(2416),te=L(3410);function F(ae){te.z.setTimeout(()=>{const{onUnhandledError:se}=d.v;if(!se)throw ae;se(ae)})}},4532:(at,De,L)=>{function d(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(De,{z:()=>d})},655:(at,De,L)=>{function ae(J,ne){var oe={};for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&ne.indexOf(ie)<0&&(oe[ie]=J[ie]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ie=Object.getOwnPropertySymbols(J);Fe<ie.length;Fe++)ne.indexOf(ie[Fe])<0&&Object.prototype.propertyIsEnumerable.call(J,ie[Fe])&&(oe[ie[Fe]]=J[ie[Fe]])}return oe}function me(J,ne,oe,ie){return new(oe||(oe=Promise))(function(Oe,ht){function $t(hn){try{qe(ie.next(hn))}catch(On){ht(On)}}function Bt(hn){try{qe(ie.throw(hn))}catch(On){ht(On)}}function qe(hn){hn.done?Oe(hn.value):function Fe(Oe){return Oe instanceof oe?Oe:new oe(function(ht){ht(Oe)})}(hn.value).then($t,Bt)}qe((ie=ie.apply(J,ne||[])).next())})}function ve(J){return this instanceof ve?(this.v=J,this):new ve(J)}function _e(J,ne,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ie=oe.apply(J,ne||[]),Oe=[];return Fe={},ht("next"),ht("throw"),ht("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ht(Qt){ie[Qt]&&(Fe[Qt]=function(Jt){return new Promise(function(Pr,Rt){Oe.push([Qt,Jt,Pr,Rt])>1||$t(Qt,Jt)})})}function $t(Qt,Jt){try{!function Bt(Qt){Qt.value instanceof ve?Promise.resolve(Qt.value.v).then(qe,hn):On(Oe[0][2],Qt)}(ie[Qt](Jt))}catch(Pr){On(Oe[0][3],Pr)}}function qe(Qt){$t("next",Qt)}function hn(Qt){$t("throw",Qt)}function On(Qt,Jt){Qt(Jt),Oe.shift(),Oe.length&&$t(Oe[0][0],Oe[0][1])}}function lt(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ne=J[Symbol.asyncIterator];return ne?ne.call(J):(J=function X(J){var ne="function"==typeof Symbol&&Symbol.iterator,oe=ne&&J[ne],ie=0;if(oe)return oe.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ie>=J.length&&(J=void 0),{value:J&&J[ie++],done:!J}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),oe={},ie("next"),ie("throw"),ie("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ie(Oe){oe[Oe]=J[Oe]&&function(ht){return new Promise(function($t,Bt){!function Fe(Oe,ht,$t,Bt){Promise.resolve(Bt).then(function(qe){Oe({value:qe,done:$t})},ht)}($t,Bt,(ht=J[Oe](ht)).done,ht.value)})}}}L.d(De,{FC:()=>_e,KL:()=>lt,_T:()=>ae,mG:()=>me,qq:()=>ve})},4650:(at,De,L)=>{L.d(De,{$8M:()=>Ul,$Z:()=>ec,AFp:()=>oR,AaK:()=>me,BQk:()=>vu,CHM:()=>El,CRH:()=>Gx,CZH:()=>Yv,CqO:()=>ya,D6c:()=>qI,EJc:()=>fR,EpF:()=>ff,F$t:()=>zy,F4k:()=>Lm,FYo:()=>Pe,FiY:()=>$e,G48:()=>FI,Gf:()=>Hx,GfV:()=>Qn,Gpc:()=>W,Hsn:()=>Wy,Ikx:()=>Hd,JOm:()=>fa,KtG:()=>Cl,LFG:()=>Bn,LSH:()=>im,Lbi:()=>_L,Lck:()=>Dv,MAs:()=>Hy,MMx:()=>zd,NdJ:()=>pf,OlP:()=>yn,Oqu:()=>ev,Q6J:()=>Nm,QGY:()=>Fm,QP$:()=>Gi,QbO:()=>uR,Qsj:()=>Ke,R0b:()=>Is,RDi:()=>cw,Rgc:()=>Eu,SBq:()=>N,Sil:()=>bL,Suo:()=>$x,TTD:()=>us,TgZ:()=>Pd,VKq:()=>Ax,W1O:()=>jv,WLB:()=>KC,X6Q:()=>Sg,XFs:()=>Je,Xpm:()=>q,Y36:()=>Md,YKP:()=>Iv,YNc:()=>bM,Yjl:()=>Ut,Yz7:()=>Jt,Z0I:()=>Bo,ZZ4:()=>be,_Bn:()=>Cv,_UZ:()=>Om,_Vd:()=>_,_c5:()=>kR,_uU:()=>Xy,aQg:()=>Ds,c2e:()=>dR,cJS:()=>Rt,cg1:()=>sv,dDg:()=>bR,dqk:()=>fn,eFA:()=>NI,ekj:()=>bf,eoX:()=>MI,f3M:()=>D,g9A:()=>cR,h0i:()=>pc,hGG:()=>NR,hij:()=>tv,iGM:()=>Vv,ifc:()=>ct,ip1:()=>EI,jDz:()=>Av,kL8:()=>ov,lG2:()=>Xn,lqb:()=>hi,lri:()=>Xv,n5z:()=>gs,n_E:()=>fg,oAB:()=>ut,oxw:()=>Gy,q4F:()=>kr,qLn:()=>pm,qOj:()=>GE,qZA:()=>Pm,rWj:()=>AI,sBO:()=>VI,sIi:()=>uf,s_b:()=>mg,soG:()=>wg,uIk:()=>zE,vHH:()=>Ee,vpe:()=>Cs,wAp:()=>yt,xp6:()=>mA,ynx:()=>Od,z2F:()=>Uf,zSh:()=>yr,zs3:()=>fu});var d=L(7579),te=L(727),F=L(9751),ae=L(6451),se=L(3099);function fe(s){for(let a in s)if(s[a]===fe)return a;throw Error("Could not find renamed property on target object.")}function le(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function me(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(me).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ge(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const G=fe({__forward_ref__:fe});function W(s){return s.__forward_ref__=W,s.toString=function(){return me(this())},s}function X(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===W}class Ee extends Error{constructor(a,l){super(function tt(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s,a){throw new Ee(-201,!1)}function Bt(s,a){null==s&&function qe(s,a,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${a} <=Actual]`))}(a,s,null,"!=")}function Jt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Rt(s){return{providers:s.providers||[],imports:s.imports||[]}}function ln(s){return zr(s,$i)||zr(s,ri)}function Bo(s){return null!==ln(s)}function zr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Ns(s){return s&&(s.hasOwnProperty(qr)||s.hasOwnProperty(Uo))?s[qr]:null}const $i=fe({\u0275prov:fe}),qr=fe({\u0275inj:fe}),ri=fe({ngInjectableDef:fe}),Uo=fe({ngInjectorDef:fe});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Kr;function Fn(s){const a=Kr;return Kr=s,a}function ii(s,a,l){const u=ln(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&Je.Optional?null:void 0!==a?a:void we(me(s))}function Ln(s){return{toString:s}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),ct=(()=>{return(s=ct||(ct={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ct;var s})();const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Or={},It=[],as=fe({\u0275cmp:fe}),en=fe({\u0275dir:fe}),Di=fe({\u0275pipe:fe}),Xt=fe({\u0275mod:fe}),Z=fe({\u0275fac:fe}),z=fe({__NG_ELEMENT_ID__:fe});let j=0;function q(s){return Ln(()=>{const l=!0===s.standalone,u={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||It,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ct.Emulated,id:"c"+j++,styles:s.styles||It,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,b=s.features;return f.inputs=tn(s.inputs,u),f.outputs=tn(s.outputs),b&&b.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Te).filter(je):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Wn).filter(je):null,f})}function Te(s){return kt(s)||En(s)}function je(s){return null!==s}function ut(s){return Ln(()=>({type:s.type,bootstrap:s.bootstrap||It,declarations:s.declarations||It,imports:s.imports||It,exports:s.exports||It,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function tn(s,a){if(null==s)return Or;const l={};for(const u in s)if(s.hasOwnProperty(u)){let f=s[u],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=u,a&&(a[f]=g)}return l}const Xn=q;function Ut(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function kt(s){return s[as]||null}function En(s){return s[en]||null}function Wn(s){return s[Di]||null}function Gi(s){const a=kt(s)||En(s)||Wn(s);return null!==a&&a.standalone}function Fr(s,a){const l=s[Xt]||null;if(!l&&!0===a)throw new Error(`Type ${me(s)} does not have '\u0275mod' property.`);return l}function fr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Lr(s){return Array.isArray(s)&&!0===s[1]}function Pa(s){return 0!=(8&s.flags)}function Ho(s){return 2==(2&s.flags)}function Oc(s){return 1==(1&s.flags)}function Mr(s){return null!==s.template}function Rh(s){return 0!=(256&s[2])}function Wi(s,a){return s.hasOwnProperty(Z)?s[Z]:null}class cs{constructor(a,l,u){this.previousValue=a,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function us(){return so}function so(s){return s.type.prototype.ngOnChanges&&(s.setInput=pl),Oa}function Oa(){const s=Ph(this),a=s?.current;if(a){const l=s.previous;if(l===Or)s.previous=a;else for(let u in a)l[u]=a[u];s.current=null,this.ngOnChanges(a)}}function pl(s,a,l,u){const f=Ph(s)||function oo(s,a){return s[Bc]=a}(s,{previous:Or,current:null}),g=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[l],I=b[E];g[E]=new cs(I&&I.currentValue,a,b===Or),s[u]=a}us.ngInherit=!0;const Bc="__ngSimpleChanges__";function Ph(s){return s[Bc]||null}function Sn(s){for(;Array.isArray(s);)s=s[0];return s}function ai(s,a){return Sn(a[s])}function Vr(s,a){return Sn(a[s.index])}function ao(s,a){return s.data[a]}function Gt(s,a){const l=a[s];return fr(l)?l:l[0]}function lo(s){return 64==(64&s[2])}function Ai(s,a){return null==a?null:s[a]}function yl(s){s[18]=0}function In(s,a){s[5]+=a;let l=s,u=s[3];for(;null!==u&&(1===a&&1===l[5]||-1===a&&0===l[5]);)u[5]+=a,l=u,u=u[3]}const Dt={lFrame:Qc(null),bindingsEnabled:!0};function fs(){return Dt.bindingsEnabled}function Se(){return Dt.lFrame.lView}function jt(){return Dt.lFrame.tView}function El(s){return Dt.lFrame.contextLView=s,s[8]}function Cl(s){return Dt.lFrame.contextLView=null,s}function An(){let s=Il();for(;null!==s&&64===s.type;)s=s.parent;return s}function Il(){return Dt.lFrame.currentTNode}function li(s,a){const l=Dt.lFrame;l.currentTNode=s,l.isParent=a}function La(){return Dt.lFrame.isParent}function Va(){Dt.lFrame.isParent=!1}function Mn(){const s=Dt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function co(){return Dt.lFrame.bindingIndex++}function Hp(s,a){const l=Dt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Dl(a)}function Dl(s){Dt.lFrame.currentDirectiveIndex=s}function Kc(){return Dt.lFrame.currentQueryIndex}function Ha(s){Dt.lFrame.currentQueryIndex=s}function Zc(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function Tl(s,a,l){if(l&Je.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||l&Je.Host||(f=Zc(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,s=g}const u=Dt.lFrame=Yc();return u.currentTNode=a,u.lView=s,!0}function Sl(s){const a=Yc(),l=s[1];Dt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Yc(){const s=Dt.lFrame,a=null===s?null:s.child;return null===a?Qc(s):a}function Qc(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Jc(){const s=Dt.lFrame;return Dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Zu=Jc;function uo(){const s=Jc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function nr(){return Dt.lFrame.selectedIndex}function Qr(s){Dt.lFrame.selectedIndex=s}function bn(){const s=Dt.lFrame;return ao(s.tView,s.selectedIndex)}function tu(s,a){for(let l=a.directiveStart,u=a.directiveEnd;l<u;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:k}=g;b&&(s.contentHooks||(s.contentHooks=[])).push(-l,b),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(l,k)}}function zo(s,a,l){qo(s,a,3,l)}function Wo(s,a,l,u){(3&s[2])===l&&qo(s,a,l,u)}function Ju(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function qo(s,a,l,u){const g=u??-1,b=a.length-1;let E=0;for(let I=void 0!==u?65535&s[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=u&&E>=u)break}else a[I]<0&&(s[18]+=65536),(E<g||-1==g)&&(Xu(s,l,a,I),s[18]=(4294901760&s[18])+I+2),I++}function Xu(s,a,l,u){const f=l[u]<0,g=l[u+1],E=s[f?-l[u]:l[u]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Hs{constructor(a,l,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function Ko(s,a,l){let u=0;for(;u<l.length;){const f=l[u];if("number"==typeof f){if(0!==f)break;u++;const g=l[u++],b=l[u++],E=l[u++];s.setAttribute(a,b,E,g)}else{const g=f,b=l[++u];Nl(g)?s.setProperty(a,g,b):s.setAttribute(a,g,b),u++}}return u}function mo(s){return 3===s||4===s||6===s}function Nl(s){return 64===s.charCodeAt(0)}function $a(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?l=f:0===l||td(s,l,f,null,-1===l||2===l?a[++u]:null)}}return s}function td(s,a,l,u,f){let g=0,b=s.length;if(-1===a)b=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===u)return void(null!==f&&(s[g+1]=f));if(u===s[g+1])return void(s[g+2]=f)}g++,null!==u&&g++,null!==f&&g++}-1!==b&&(s.splice(b,0,a),g=b+1),s.splice(g++,0,l),null!==u&&s.splice(g++,0,u),null!==f&&s.splice(g++,0,f)}function nd(s){return-1!==s}function pr(s){return 32767&s}function za(s,a){let l=function Ga(s){return s>>16}(s),u=a;for(;l>0;)u=u[15],l--;return u}let Ki=!0;function Wa(s){const a=Ki;return Ki=s,a}let Vn=0;const Mi={};function go(s,a){const l=Ol(s,a);if(-1!==l)return l;const u=a[1];u.firstCreatePass&&(s.injectorIndex=a.length,Ka(u.data,s),Ka(a,null),Ka(u.blueprint,null));const f=Fl(s,a),g=s.injectorIndex;if(nd(f)){const b=pr(f),E=za(f,a),I=E[1].data;for(let A=0;A<8;A++)a[g+A]=E[b+A]|I[b+A]}return a[g+8]=f,g}function Ka(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Ol(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Fl(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,f=a;for(;null!==f;){if(u=Qo(f),null===u)return-1;if(l++,f=f[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function $s(s,a,l){!function Pl(s,a,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(z)&&(u=l[z]),null==u&&(u=l[z]=Vn++);const f=255&u;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function Gs(s,a,l){if(l&Je.Optional||void 0!==s)return s;we()}function Ll(s,a,l,u){if(l&Je.Optional&&void 0===u&&(u=null),0==(l&(Je.Self|Je.Host))){const f=s[9],g=Fn(void 0);try{return f?f.get(a,u,l&Je.Optional):ii(a,u,l&Je.Optional)}finally{Fn(g)}}return Gs(u,0,l)}function _o(s,a,l,u=Je.Default,f){if(null!==s){if(1024&a[2]){const b=function Yo(s,a,l,u,f){let g=s,b=a;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const E=Za(g,b,l,u|Je.Self,Mi);if(E!==Mi)return E;let I=g.parent;if(!I){const A=b[21];if(A){const k=A.get(l,Mi,u);if(k!==Mi)return k}I=Qo(b),b=b[15]}g=I}return f}(s,a,l,u,Mi);if(b!==Mi)return b}const g=Za(s,a,l,u,Mi);if(g!==Mi)return g}return Ll(a,l,u,f)}function Za(s,a,l,u,f){const g=function ru(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(z)?s[z]:void 0;return"number"==typeof a?a>=0?255&a:iu:a}(l);if("function"==typeof g){if(!Tl(a,s,u))return u&Je.Host?Gs(f,0,u):Ll(a,l,u,f);try{const b=g(u);if(null!=b||u&Je.Optional)return b;we()}finally{Zu()}}else if("number"==typeof g){let b=null,E=Ol(s,a),I=-1,A=u&Je.Host?a[16][6]:null;for((-1===E||u&Je.SkipSelf)&&(I=-1===E?Fl(s,a):a[E+8],-1!==I&&Ya(u,!1)?(b=a[1],E=pr(I),a=za(I,a)):E=-1);-1!==E;){const k=a[1];if(Vl(g,E,k.data)){const V=sd(E,a,l,b,u,A);if(V!==Mi)return V}I=a[E+8],-1!==I&&Ya(u,a[1].data[E+8]===A)&&Vl(g,E,a)?(b=k,E=pr(I),a=za(I,a)):E=-1}}return f}function sd(s,a,l,u,f,g){const b=a[1],E=b.data[s+8],k=Zo(E,b,l,null==u?Ho(E)&&Ki:u!=b&&0!=(3&E.type),f&Je.Host&&g===E);return null!==k?ms(a,b,k,E):Mi}function Zo(s,a,l,u,f){const g=s.providerIndexes,b=a.data,E=1048575&g,I=s.directiveStart,k=g>>20,H=f?E+k:s.directiveEnd;for(let re=u?E:E+k;re<H;re++){const Ce=b[re];if(re<I&&l===Ce||re>=I&&Ce.type===l)return re}if(f){const re=b[I];if(re&&Mr(re)&&re.type===l)return I}return null}function ms(s,a,l,u){let f=s[l];const g=a.data;if(function fo(s){return s instanceof Hs}(f)){const b=f;b.resolving&&function Xe(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${s}${l}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(g[l]));const E=Wa(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Fn(b.injectImpl):null;Tl(s,u,Je.Default);try{f=s[l]=b.factory(void 0,g,s,u),a.firstCreatePass&&l>=u.directiveStart&&function Qu(s,a,l){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(u){const b=so(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,b)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],a)}finally{null!==I&&Fn(I),Wa(E),b.resolving=!1,Zu()}}return f}function Vl(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function Ya(s,a){return!(s&Je.Self||s&Je.Host&&a)}class yo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,u){return _o(this._tNode,this._lView,a,u,l)}}function iu(){return new yo(An(),Se())}function gs(s){return Ln(()=>{const a=s.prototype.constructor,l=a[Z]||Bl(a),u=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==u;){const g=f[Z]||Bl(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Bl(s){return Be(s)?()=>{const a=Bl(X(s));return a&&a()}:Wi(s)}function Qo(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function Ul(s){return function id(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const u=l.length;let f=0;for(;f<u;){const g=l[f];if(mo(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<u&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(An(),s)}const zs="__parameters__";function ea(s,a,l){return Ln(()=>{const u=function jl(s){return function(...l){if(s){const u=s(...l);for(const f in u)this[f]=u[f]}}}(a);function f(...g){if(this instanceof f)return u.apply(this,g),this;const b=new f(...g);return E.annotation=b,E;function E(I,A,k){const V=I.hasOwnProperty(zs)?I[zs]:Object.defineProperty(I,zs,{value:[]})[zs];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(b),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class yn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Jt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Br(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(a===s&&(a=s.slice(0,l)),Br(u,a)):a!==s&&a.push(u)}return a}function ci(s,a){s.forEach(l=>Array.isArray(l)?ci(l,a):a(l))}function ta(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function na(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function ui(s,a){const l=[];for(let u=0;u<s;u++)l.push(a);return l}function Xr(s,a,l){let u=di(s,a);return u>=0?s[1|u]=l:(u=~u,function od(s,a,l,u){let f=s.length;if(f==a)s.push(l,u);else if(1===f)s.push(u,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=u}}(s,u,a,l)),u}function $l(s,a){const l=di(s,a);if(l>=0)return s[1|l]}function di(s,a){return function rn(s,a,l){let u=0,f=s.length>>l;for(;f!==u;){const g=u+(f-u>>1),b=s[g<<l];if(a===b)return g<<l;b>a?f=g:u=g+1}return~(f<<l)}(s,a,1)}const Zi={},au="__NG_DI_FLAG__",ql="ngTempTokenPath",ad=/\n/gm,Wp="__source";let sa;function wo(s){const a=sa;return sa=s,a}function jh(s,a=Je.Default){if(void 0===sa)throw new Ee(-203,!1);return null===sa?ii(s,void 0,a):sa.get(s,a&Je.Optional?null:void 0,a)}function Bn(s,a=Je.Default){return(function os(){return Kr}()||jh)(X(s),a)}function D(s,a=Je.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Bn(s,a)}function S(s){const a=[];for(let l=0;l<s.length;l++){const u=X(s[l]);if(Array.isArray(u)){if(0===u.length)throw new Ee(900,!1);let f,g=Je.Default;for(let b=0;b<u.length;b++){const E=u[b],I=U(E);"number"==typeof I?-1===I?f=E.token:g|=I:f=E}a.push(Bn(f,g))}else a.push(Bn(u))}return a}function R(s,a){return s[au]=a,s.prototype[au]=a,s}function U(s){return s[au]}const $e=R(ea("Optional"),8),Et=R(ea("SkipSelf"),4);let qp;function cw(s){qp=s}class dd{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Co(s){return s instanceof dd?s.changingThisBreaksApplicationSecurity:s}const yw=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function im(s){const a=function uu(){const s=Se();return s&&s[12]}();return a?a.sanitize(_r.URL,s)||"":function hd(s,a){const l=function z_(s){return s instanceof dd&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}(s,"URL")?Co(s):function fd(s){return(s=String(s)).match(yw)?s:"unsafe:"+s}(ve(s))}const gd=new yn("ENVIRONMENT_INITIALIZER"),rr=new yn("INJECTOR",-1),da=new yn("INJECTOR_DEF_TYPES");class Un{get(a,l=Zi){if(l===Zi){const u=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw u.name="NullInjectorError",u}return l}}function kn(...s){return{\u0275providers:Kl(0,s)}}function Kl(s,...a){const l=[],u=new Set;let f;return ci(a,g=>{const b=g;Ye(b,l,[],u)&&(f||(f=[]),f.push(b))}),void 0!==f&&Yi(f,l),l}function Yi(s,a){for(let l=0;l<s.length;l++){const{providers:f}=s[l];ci(f,g=>{a.push(g)})}}function Ye(s,a,l,u){if(!(s=X(s)))return!1;let f=null,g=Ns(s);const b=!g&&kt(s);if(g||b){if(b&&!b.standalone)return!1;f=s}else{const I=s.ngModule;if(g=Ns(I),!g)return!1;f=I}const E=u.has(f);if(b){if(E)return!1;if(u.add(f),b.dependencies){const I="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const A of I)Ye(A,a,l,u)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let A;u.add(f);try{ci(g.imports,k=>{Ye(k,a,l,u)&&(A||(A=[]),A.push(k))})}finally{}void 0!==A&&Yi(A,a)}if(!E){const A=Wi(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:It},{provide:da,useValue:f,multi:!0},{provide:gd,useValue:()=>Bn(f),multi:!0})}const I=g.providers;null==I||E||ci(I,k=>{a.push(k)})}}return f!==s&&void 0!==s.providers}const rl=fe({provide:String,useValue:fe});function Yl(s){return null!==s&&"object"==typeof s&&rl in s}function ha(s){return"function"==typeof s}const yr=new yn("Set Injector scope."),Ur={},sm={};let yd;function Kh(){return void 0===yd&&(yd=new Un),yd}class hi{}class om extends hi{constructor(a,l,u,f){super(),this.parent=l,this.source=u,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ql(a,b=>this.processProvider(b)),this.records.set(rr,jr(void 0,this)),f.has("environment")&&this.records.set(hi,jr(void 0,this));const g=this.records.get(yr);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(da.multi,It,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=wo(this),u=Fn(void 0);try{return a()}finally{wo(l),Fn(u)}}get(a,l=Zi,u=Je.Default){this.assertNotDestroyed();const f=wo(this),g=Fn(void 0);try{if(!(u&Je.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function lm(s){return"function"==typeof s||"object"==typeof s&&s instanceof yn}(a)&&ln(a);E=I&&this.injectableDefInScope(I)?jr(sn(a),Ur):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(u&Je.Self?Kh():this.parent).get(a,l=u&Je.Optional&&l===Zi?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[ql]=b[ql]||[]).unshift(me(a)),f)throw b;return function ee(s,a,l,u){const f=s[ql];throw a[Wp]&&f.unshift(a[Wp]),s.message=function ue(s,a,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${f}]: ${s.replace(ad,"\n  ")}`}("\n"+s.message,f,l,u),s.ngTokenPath=f,s[ql]=null,s}(b,a,"R3InjectorError",this.source)}throw b}finally{Fn(g),wo(f)}}resolveInjectorInitializers(){const a=wo(this),l=Fn(void 0);try{const u=this.get(gd.multi,It,Je.Self);for(const f of u)f()}finally{wo(a),Fn(l)}}toString(){const a=[],l=this.records;for(const u of l.keys())a.push(me(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(a){let l=ha(a=X(a))?a:X(a&&a.provide);const u=function Zh(s){return Yl(s)?jr(void 0,s.useValue):jr(Yh(s),Ur)}(a);if(ha(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=jr(void 0,Ur,!0),f.factory=()=>S(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,u)}hydrate(a,l){return l.value===Ur&&(l.value=sm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function am(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=X(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function sn(s){const a=ln(s),l=null!==a?a.factory:Wi(s);if(null!==l)return l;if(s instanceof yn)throw new Ee(204,!1);if(s instanceof Function)return function vd(s){const a=s.length;if(a>0)throw ui(a,"?"),new Ee(204,!1);const l=function Ar(s){const a=s&&(s[$i]||s[ri]);if(a){const l=function Wr(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ee(204,!1)}function Yh(s,a,l){let u;if(ha(s)){const f=X(s);return Wi(f)||sn(f)}if(Yl(s))u=()=>X(s.useValue);else if(function vs(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...S(s.deps||[]));else if(function _d(s){return!(!s||!s.useExisting)}(s))u=()=>Bn(X(s.useExisting));else{const f=X(s&&(s.useClass||s.provide));if(!function du(s){return!!s.deps}(s))return Wi(f)||sn(f);u=()=>new f(...S(s.deps))}return u}function jr(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function X_(s){return!!s.\u0275providers}function Ql(s,a){for(const l of s)Array.isArray(l)?Ql(l,a):X_(l)?Ql(l.\u0275providers,a):a(l)}class cm{}class p{resolveComponentFactory(a){throw function ty(s){const a=Error(`No component factory found for ${me(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let _=(()=>{class s{}return s.NULL=new p,s})();function w(){return M(An(),Se())}function M(s,a){return new N(Vr(s,a))}let N=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=w,s})();function Y(s){return s instanceof N?s.nativeElement:s}class Pe{}let Ke=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function st(){const s=Se(),l=Gt(An().index,s);return(fr(l)?l:s)[11]}(),s})(),_t=(()=>{class s{}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>null}),s})();class Qn{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const kr=new Qn("14.2.2"),Jl={};function Nw(s){return s.ngOriginalError}class pm{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Nw(a);for(;l&&Nw(l);)l=Nw(l);return l||null}}const Fw=new Map;let B1=0;const Vw="__ngContext__";function ki(s,a){fr(a)?(s[Vw]=a[20],function j1(s){Fw.set(s[20],s)}(a)):s[Vw]=a}function il(s){return s instanceof Function?s():s}var fa=(()=>((fa=fa||{})[fa.Important=1]="Important",fa[fa.DashCase=2]="DashCase",fa))();function ay(s,a){return undefined(s,a)}function Dd(s){const a=s[3];return Lr(a)?a[3]:a}function Ww(s){return ZS(s[13])}function qw(s){return ZS(s[4])}function ZS(s){for(;null!==s&&!Lr(s);)s=s[4];return s}function Jh(s,a,l,u,f){if(null!=u){let g,b=!1;Lr(u)?g=u:fr(u)&&(b=!0,u=u[0]);const E=Sn(u);0===s&&null!==l?null==f?nA(a,l,E):Td(a,l,E,f||null,!0):1===s&&null!==l?Td(a,l,E,f||null,!0):2===s?function fy(s,a,l){const u=hy(s,a);u&&function tF(s,a,l,u){s.removeChild(a,l,u)}(s,u,a,l)}(a,E,b):3===s&&a.destroyNode(E),null!=g&&function my(s,a,l,u,f){const g=l[7];g!==Sn(l)&&Jh(a,s,u,g,f);for(let E=10;E<l.length;E++){const I=l[E];ef(I[1],I,s,a,u,g)}}(a,s,g,l,f)}}function Ni(s,a,l){return s.createElement(a,l)}function Yw(s,a){const l=s[9],u=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,In(f,-1)),l.splice(u,1)}function dy(s,a){if(s.length<=10)return;const l=10+a,u=s[l];if(u){const f=u[17];null!==f&&f!==s&&Yw(f,u),a>0&&(s[l-1][4]=u[4]);const g=na(s,10+a);!function Q1(s,a){ef(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(u[1],u);const b=g[19];null!==b&&b.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function JS(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&ef(s,a,l,3,null,null),function ly(s){let a=s[13];if(!a)return Qw(s[1],s);for(;a;){let l=null;if(fr(a))l=a[13];else{const u=a[10];u&&(l=u)}if(!l){for(;a&&!a[4]&&a!==s;)fr(a)&&Qw(a[1],a),a=a[3];null===a&&(a=s),fr(a)&&Qw(a[1],a),l=a&&a[4]}a=l}}(a)}}function Qw(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function eF(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const f=a[l[u]];if(!(f instanceof Hs)){const g=l[u+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=f[g[b]],I=g[b+1];try{I.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,a),function XS(s,a){const l=s.cleanup,u=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const b=l[g+1],E="function"==typeof b?b(a):Sn(a[b]),I=u[f=l[g+2]],A=l[g+3];"boolean"==typeof A?E.removeEventListener(l[g],I,A):A>=0?u[f=A]():u[f=-A].unsubscribe(),g+=2}else{const b=u[f=l[g+1]];l[g].call(b)}if(null!==u){for(let g=f+1;g<u.length;g++)(0,u[g])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&Lr(a[3])){l!==a[3]&&Yw(l,a);const u=a[19];null!==u&&u.detachView(s)}!function H1(s){Fw.delete(s[20])}(a)}}function eA(s,a,l){return function tA(s,a,l){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return l[0];if(2&u.flags){const f=s.data[u.directiveStart].encapsulation;if(f===ct.None||f===ct.Emulated)return null}return Vr(u,l)}(s,a.parent,l)}function Td(s,a,l,u,f){s.insertBefore(a,l,u,f)}function nA(s,a,l){s.appendChild(a,l)}function rA(s,a,l,u,f){null!==u?Td(s,a,l,u,f):nA(s,a,l)}function hy(s,a){return s.parentNode(a)}function iA(s,a,l){return Sd(s,a,l)}let Sd=function sA(s,a,l){return 40&s.type?Vr(s,l):null};function Xh(s,a,l,u){const f=eA(s,u,a),g=a[11],E=iA(u.parent||a[6],u,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)rA(g,f,l[I],E,!1);else rA(g,f,l,E,!1)}function gm(s,a){if(null!==a){const l=a.type;if(3&l)return Vr(a,s);if(4&l)return ym(-1,s[a.index]);if(8&l){const u=a.child;if(null!==u)return gm(s,u);{const f=s[a.index];return Lr(f)?ym(-1,f):Sn(f)}}if(32&l)return ay(a,s)()||Sn(s[a.index]);{const u=_m(s,a);return null!==u?Array.isArray(u)?u[0]:gm(Dd(s[16]),u):gm(s,a.next)}}return null}function _m(s,a){return null!==a?s[16][6].projection[a.projection]:null}function ym(s,a){const l=10+s+1;if(l<a.length){const u=a[l],f=u[1].firstChild;if(null!==f)return gm(u,f)}return a[7]}function py(s,a,l,u,f,g,b){for(;null!=l;){const E=u[l.index],I=l.type;if(b&&0===a&&(E&&ki(Sn(E),u),l.flags|=4),64!=(64&l.flags))if(8&I)py(s,a,l.child,u,f,g,!1),Jh(a,s,f,E,g);else if(32&I){const A=ay(l,u);let k;for(;k=A();)Jh(a,s,f,k,g);Jh(a,s,f,E,g)}else 16&I?Ad(s,a,u,l,f,g):Jh(a,s,f,E,g);l=b?l.projectionNext:l.next}}function ef(s,a,l,u,f,g){py(l,u,s.firstChild,a,f,g,!1)}function Ad(s,a,l,u,f,g){const b=l[16],I=b[6].projection[u.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Jh(a,s,f,I[A],g);else py(s,a,I,b[3],f,g,!0)}function aA(s,a,l){s.setAttribute(a,"style",l)}function tE(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function lA(s,a,l){let u=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===u||s.charCodeAt(f+g)<=32)return f}l=f+1}}const cA="ng-template";function rF(s,a,l){let u=0;for(;u<s.length;){let f=s[u++];if(l&&"class"===f){if(f=s[u],-1!==lA(f.toLowerCase(),a,0))return!0}else if(1===f){for(;u<s.length&&"string"==typeof(f=s[u++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function uA(s){return 4===s.type&&s.value!==cA}function iF(s,a,l){return a===(4!==s.type||l?s.value:cA)}function sF(s,a,l){let u=4;const f=s.attrs||[],g=function lF(s){for(let a=0;a<s.length;a++)if(mo(s[a]))return a;return s.length}(f);let b=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!b)if(4&u){if(u=2|1&u,""!==I&&!iF(s,I,l)||""===I&&1===a.length){if(pa(u))return!1;b=!0}}else{const A=8&u?I:a[++E];if(8&u&&null!==s.attrs){if(!rF(s.attrs,A,l)){if(pa(u))return!1;b=!0}continue}const V=oF(8&u?"class":I,f,uA(s),l);if(-1===V){if(pa(u))return!1;b=!0;continue}if(""!==A){let H;H=V>g?"":f[V+1].toLowerCase();const re=8&u?H:null;if(re&&-1!==lA(re,A,0)||2&u&&A!==H){if(pa(u))return!1;b=!0}}}}else{if(!b&&!pa(u)&&!pa(I))return!1;if(b&&pa(I))continue;b=!1,u=I|1&u}}return pa(u)||b}function pa(s){return 0==(1&s)}function oF(s,a,l,u){if(null===a)return-1;let f=0;if(u||!l){let g=!1;for(;f<a.length;){const b=a[f];if(b===s)return f;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=g?1:2}return-1}return function hA(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===a)return l;l++}return-1}(a,s)}function dA(s,a,l=!1){for(let u=0;u<a.length;u++)if(sF(s,a[u],l))return!0;return!1}function fA(s,a){e:for(let l=0;l<a.length;l++){const u=a[l];if(s.length===u.length){for(let f=0;f<s.length;f++)if(s[f]!==u[f])continue e;return!0}}return!1}function pA(s,a){return s?":not("+a.trim()+")":a}function cF(s){let a=s[0],l=1,u=2,f="",g=!1;for(;l<s.length;){let b=s[l];if("string"==typeof b)if(2&u){const E=s[++l];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?f+="."+b:4&u&&(f+=" "+b);else""!==f&&!pa(b)&&(a+=pA(g,f),f=""),u=b,g=g||!pa(u);l++}return""!==f&&(a+=pA(g,f)),a}const Ot={};function mA(s){gA(jt(),Se(),nr()+s,!1)}function gA(s,a,l,u){if(!u)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&zo(a,g,l)}else{const g=s.preOrderHooks;null!==g&&Wo(a,g,0,l)}Qr(l)}function bA(s,a=null,l=null,u){const f=wA(s,a,l,u);return f.resolveInjectorInitializers(),f}function wA(s,a=null,l=null,u,f=new Set){const g=[l||It,kn(s)];return u=u||("object"==typeof s?void 0:me(s)),new om(g,a||Kh(),u||null,f)}let fu=(()=>{class s{static create(l,u){if(Array.isArray(l))return bA({name:""},u,l,"");{const f=l.name??"";return bA({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=Zi,s.NULL=new Un,s.\u0275prov=Jt({token:s,providedIn:"any",factory:()=>Bn(rr)}),s.__NG_ELEMENT_ID__=-1,s})();function Md(s,a=Je.Default){const l=Se();return null===l?Bn(s,a):_o(An(),l,X(s),a)}function ec(){throw new Error("invalid")}function wm(s,a){return s<<17|a<<2}function Ks(s){return s>>17&32767}function Io(s){return 2|s}function ga(s){return(131068&s)>>2}function xd(s,a){return-131069&s|a<<2}function Em(s){return 1|s}function OA(s,a){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const f=l[u],g=l[u+1];if(-1!==g){const b=s.data[g];Ha(f),b.contentQueries(2,a[g],g)}}}function Sy(s,a,l,u,f,g,b,E,I,A,k){const V=a.blueprint.slice();return V[0]=f,V[2]=76|u,(null!==k||s&&1024&s[2])&&(V[2]|=1024),yl(V),V[3]=V[15]=s,V[8]=l,V[10]=b||s&&s[10],V[11]=E||s&&s[11],V[12]=I||s&&s[12]||null,V[9]=A||s&&s[9]||null,V[6]=g,V[20]=function U1(){return B1++}(),V[21]=k,V[16]=2==a.type?s[16]:V,V}function af(s,a,l,u,f){let g=s.data[a];if(null===g)g=function wE(s,a,l,u,f){const g=Il(),b=La(),I=s.data[a]=function jA(s,a,l,u,f,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,l,a,u,f);return null===s.firstChild&&(s.firstChild=I),null!==g&&(b?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,a,l,u,f),function jp(){return Dt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=f;const b=function Go(){const s=Dt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return li(g,!0),g}function lf(s,a,l,u){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(u),s.blueprint.push(u),s.data.push(null);return f}function EE(s,a,l){Sl(a);try{const u=s.viewQuery;null!==u&&Ny(1,u,l);const f=s.template;null!==f&&LA(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&OA(s,a),s.staticViewQueries&&Ny(2,s.viewQuery,l);const g=s.components;null!==g&&function Ty(s,a){for(let l=0;l<a.length;l++)LE(s,a[l])}(a,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{a[2]&=-5,uo()}}function Ay(s,a,l,u){const f=a[2];if(128!=(128&f)){Sl(a);try{yl(a),function Wc(s){return Dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&LA(s,a,l,2,u);const b=3==(3&f);if(b){const A=s.preOrderCheckHooks;null!==A&&zo(a,A,null)}else{const A=s.preOrderHooks;null!==A&&Wo(a,A,0,null),Ju(a,0)}if(function JA(s){for(let a=Ww(s);null!==a;a=qw(a)){if(!a[2])continue;const l=a[9];for(let u=0;u<l.length;u++){const f=l[u],g=f[3];0==(512&f[2])&&In(g,1),f[2]|=512}}}(a),function OE(s){for(let a=Ww(s);null!==a;a=qw(a))for(let l=10;l<a.length;l++){const u=a[l],f=u[1];lo(u)&&Ay(f,u,f.template,u[8])}}(a),null!==s.contentQueries&&OA(s,a),b){const A=s.contentCheckHooks;null!==A&&zo(a,A)}else{const A=s.contentHooks;null!==A&&Wo(a,A,1),Ju(a,1)}!function PF(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const f=l[u];if(f<0)Qr(~f);else{const g=f,b=l[++u],E=l[++u];Hp(b,g),E(2,a[g])}}}finally{Qr(-1)}}(s,a);const E=s.components;null!==E&&function FA(s,a){for(let l=0;l<a.length;l++)FE(s,a[l])}(a,E);const I=s.viewQuery;if(null!==I&&Ny(2,I,u),b){const A=s.viewCheckHooks;null!==A&&zo(a,A)}else{const A=s.viewHooks;null!==A&&Wo(a,A,2),Ju(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,In(a[3],-1))}finally{uo()}}}function LA(s,a,l,u,f){const g=nr(),b=2&u;try{Qr(-1),b&&a.length>22&&gA(s,a,22,!1),l(u,f)}finally{Qr(g)}}function VA(s,a,l){if(Pa(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const b=s.data[g];b.contentQueries&&b.contentQueries(1,l[g],g)}}}function CE(s,a,l){!fs()||(function LF(s,a,l,u){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||go(l,a),ki(u,a);const b=l.initialInputs;for(let E=f;E<g;E++){const I=s.data[E],A=Mr(I);A&&ZA(a,l,I);const k=ms(a,s,E,l);ki(k,a),null!==b&&YA(0,E-f,k,I,0,b),A&&(Gt(l.index,a)[8]=k)}}(s,a,l,Vr(l,a)),128==(128&l.flags)&&function WA(s,a,l){const u=l.directiveStart,f=l.directiveEnd,g=l.index,b=function qc(){return Dt.lFrame.currentDirectiveIndex}();try{Qr(g);for(let E=u;E<f;E++){const I=s.data[E],A=a[E];Dl(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&RE(I,A)}}finally{Qr(-1),Dl(b)}}(s,a,l))}function IE(s,a,l=Vr){const u=a.localNames;if(null!==u){let f=a.index+1;for(let g=0;g<u.length;g+=2){const b=u[g+1],E=-1===b?l(a,s):s[b];s[f++]=E}}}function BA(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=My(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function My(s,a,l,u,f,g,b,E,I,A){const k=22+u,V=k+f,H=function DE(s,a){const l=[];for(let u=0;u<a;u++)l.push(u<s?null:Ot);return l}(k,V),re="function"==typeof A?A():A;return H[1]={type:s,blueprint:H,template:l,queries:null,viewQuery:E,declTNode:a,data:H.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function TE(s,a,l,u){const f=VE(a);null===l?f.push(u):(f.push(l),s.firstCreatePass&&BE(s).push(u,f.length-1))}function SE(s,a,l){for(let u in s)if(s.hasOwnProperty(u)){const f=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(a,f):l[u]=[a,f]}return l}function AE(s,a){const u=a.directiveEnd,f=s.data,g=a.attrs,b=[];let E=null,I=null;for(let A=a.directiveStart;A<u;A++){const k=f[A],V=k.inputs,H=null===g||uA(a)?null:QA(V,g);b.push(H),E=SE(V,A,E),I=SE(k.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=I}function bs(s,a,l,u,f,g,b,E){const I=Vr(a,l);let k,A=a.inputs;!E&&null!=A&&(k=A[u])?(jE(s,l,k,u,f),Ho(a)&&ME(l,a.index)):3&a.type&&(u=function HA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),f=null!=b?b(f,a.value||"",u):f,g.setProperty(I,u,f))}function ME(s,a){const l=Gt(a,s);16&l[2]||(l[2]|=32)}function xy(s,a,l,u){let f=!1;if(fs()){const g=function kE(s,a,l){const u=s.directiveRegistry;let f=null;if(u)for(let g=0;g<u.length;g++){const b=u[g];dA(l,b.selectors,!1)&&(f||(f=[]),$s(go(l,a),s,b.type),Mr(b)?(NE(s,l),f.unshift(b)):f.push(b))}return f}(s,a,l),b=null===u?null:{"":-1};if(null!==g){f=!0,PE(l,s.data.length,g.length);for(let k=0;k<g.length;k++){const V=g[k];V.providersResolver&&V.providersResolver(V)}let E=!1,I=!1,A=lf(s,a,g.length,null);for(let k=0;k<g.length;k++){const V=g[k];l.mergedAttrs=$a(l.mergedAttrs,V.hostAttrs),KA(s,l,a,A,V),qA(A,V,b),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const H=V.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),A++}AE(s,l)}b&&function VF(s,a,l){if(a){const u=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Ee(-301,!1);u.push(a[f],g)}}}(l,u,b)}return l.mergedAttrs=$a(l.mergedAttrs,l.attrs),f}function xE(s,a,l,u,f,g){const b=g.hostBindings;if(b){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~a.index;(function zA(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(u,f,b)}}function RE(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function NE(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function qA(s,a,l){if(l){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)l[a.exportAs[u]]=s;Mr(a)&&(l[""]=s)}}function PE(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function KA(s,a,l,u,f){s.data[u]=f;const g=f.factory||(f.factory=Wi(f.type)),b=new Hs(g,Mr(f),Md);s.blueprint[u]=b,l[u]=b,xE(s,a,0,u,lf(s,l,f.hostVars,Ot),f)}function ZA(s,a,l){const u=Vr(a,s),f=BA(l),g=s[10],b=Tm(s,Sy(s,f,null,l.onPush?32:16,u,a,g,g.createRenderer(u,l),null,null,null));s[a.index]=b}function Do(s,a,l,u,f,g){const b=Vr(s,a);!function Im(s,a,l,u,f,g,b){if(null==g)s.removeAttribute(a,f,l);else{const E=null==b?ve(g):b(g,u||"",f);s.setAttribute(a,f,E,l)}}(a[11],b,g,s.value,l,u,f)}function YA(s,a,l,u,f,g){const b=g[a];if(null!==b){const E=u.setInput;for(let I=0;I<b.length;){const A=b[I++],k=b[I++],V=b[I++];null!==E?u.setInput(l,V,A,k):l[k]=V}}}function QA(s,a){let l=null,u=0;for(;u<a.length;){const f=a[u];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[u+1])),u+=2}else u+=2;else u+=4}return l}function Ry(s,a,l,u){return new Array(s,!0,!1,a,null,0,u,l,null,null)}function FE(s,a){const l=Gt(a,s);if(lo(l)){const u=l[1];48&l[2]?Ay(u,l,u.template,l[8]):l[5]>0&&Dm(l)}}function Dm(s){for(let u=Ww(s);null!==u;u=qw(u))for(let f=10;f<u.length;f++){const g=u[f];if(lo(g))if(512&g[2]){const b=g[1];Ay(b,g,b.template,g[8])}else g[5]>0&&Dm(g)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const f=Gt(l[u],s);lo(f)&&f[5]>0&&Dm(f)}}function LE(s,a){const l=Gt(a,s),u=l[1];(function XA(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(u,l),EE(u,l,l[8])}function Tm(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function ky(s){for(;s;){s[2]|=32;const a=Dd(s);if(Rh(s)&&!a)return s;s=a}return null}function Sm(s,a,l,u=!0){const f=a[10];f.begin&&f.begin();try{Ay(s,a,s.template,l)}catch(b){throw u&&eM(a,b),b}finally{f.end&&f.end()}}function Ny(s,a,l){Ha(0),a(s,l)}function VE(s){return s[7]||(s[7]=[])}function BE(s){return s.cleanup||(s.cleanup=[])}function eM(s,a){const l=s[9],u=l?l.get(pm,null):null;u&&u.handleError(a)}function jE(s,a,l,u,f){for(let g=0;g<l.length;){const b=l[g++],E=l[g++],I=a[b],A=s.data[b];null!==A.setInput?A.setInput(I,f,u,E):I[E]=f}}function Py(s,a,l){let u=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?g=E:1==g?f=ge(f,E):2==g&&(u=ge(u,E+": "+a[++b]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=f:s.classesWithoutHost=f}function Oy(s,a,l,u,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&u.push(Sn(g)),Lr(g))for(let E=10;E<g.length;E++){const I=g[E],A=I[1].firstChild;null!==A&&Oy(I[1],I,A,u)}const b=l.type;if(8&b)Oy(s,a,l.child,u);else if(32&b){const E=ay(l,a);let I;for(;I=E();)u.push(I)}else if(16&b){const E=_m(a,l);if(Array.isArray(E))u.push(...E);else{const I=Dd(a[16]);Oy(I[1],I,E,u,!0)}}l=f?l.projectionNext:l.next}return u}class Am{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Oy(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Lr(a)){const l=a[8],u=l?l.indexOf(this):-1;u>-1&&(dy(a,u),na(l,u))}this._attachedToViewContainer=!1}JS(this._lView[1],this._lView)}onDestroy(a){TE(this._lView[1],this._lView,null,a)}markForCheck(){ky(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Sm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function X1(s,a){ef(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=a}}class HF extends Am{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Sm(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Fy extends _{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=kt(a);return new cf(l,this.ngModule)}}function tM(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class nM{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,u){const f=this.injector.get(a,Jl,u);return f!==Jl||l===Jl?f:this.parentInjector.get(a,l,u)}}class cf extends cm{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function uF(s){return s.map(cF).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return tM(this.componentDef.inputs)}get outputs(){return tM(this.componentDef.outputs)}create(a,l,u,f){let g=(f=f||this.ngModule)instanceof hi?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new nM(a,g):a,E=b.get(Pe,null);if(null===E)throw new Ee(407,!1);const I=b.get(_t,null),A=E.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",V=u?function UA(s,a,l){return s.selectRootElement(a,l===ct.ShadowDom)}(A,u,this.componentDef.encapsulation):Ni(E.createRenderer(null,this.componentDef),k,function HE(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(k)),H=this.componentDef.onPush?288:272,re=My(0,null,null,1,0,null,null,null,null,null),Ce=Sy(null,re,null,H,null,null,E,A,I,b,null);let Ve,We;Sl(Ce);try{const rt=function sM(s,a,l,u,f,g){const b=l[1];l[22]=s;const I=af(b,22,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&(Py(I,A,!0),null!==s&&(Ko(f,s,A),null!==I.classes&&tE(f,s,I.classes),null!==I.styles&&aA(f,s,I.styles)));const k=u.createRenderer(s,a),V=Sy(l,BA(a),null,a.onPush?32:16,l[22],I,u,k,g||null,null,null);return b.firstCreatePass&&($s(go(I,l),b,a.type),NE(b,I),PE(I,l.length,1)),Tm(l,V),l[22]=V}(V,this.componentDef,Ce,E,A);if(V)if(u)Ko(A,V,["ng-version",kr.full]);else{const{attrs:vt,classes:Me}=function dF(s){const a=[],l=[];let u=1,f=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++u]):8===f&&l.push(g);else{if(!pa(f))break;f=g}u++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);vt&&Ko(A,V,vt),Me&&Me.length>0&&tE(A,V,Me.join(" "))}if(We=ao(re,22),void 0!==l){const vt=We.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const wt=l[Me];vt.push(null!=wt?Array.from(wt):null)}}Ve=function oM(s,a,l,u){const f=l[1],g=function GA(s,a,l){const u=An();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),KA(s,u,a,lf(s,a,1,null),l),AE(s,u));const f=ms(a,s,u.directiveStart,u);ki(f,a);const g=Vr(u,a);return g&&ki(g,a),f}(f,l,a);if(s[8]=l[8]=g,null!==u)for(const E of u)E(g,a);if(a.contentQueries){const E=An();a.contentQueries(1,g,E.directiveStart)}const b=An();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Qr(b.index),xE(l[1],b,0,b.directiveStart,b.directiveEnd,a),RE(a,g)),g}(rt,this.componentDef,Ce,[aM]),EE(re,Ce,null)}finally{uo()}return new iM(this.componentType,Ve,M(We,Ce),Ce,We)}}class iM extends class ey{}{constructor(a,l,u,f,g){super(),this.location=u,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new HF(f),this.componentType=a}setInput(a,l){const u=this._tNode.inputs;let f;if(null!==u&&(f=u[a])){const g=this._rootLView;jE(g[1],g,f,a,l),ME(g,this._tNode.index)}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function aM(){const s=An();tu(Se()[1],s)}function GE(s){let a=function $E(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;a;){let f;if(Mr(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ee(903,!1);f=a.\u0275dir}if(f){if(l){u.push(f);const b=s;b.inputs=Ly(s.inputs),b.declaredInputs=Ly(s.declaredInputs),b.outputs=Ly(s.outputs);const E=f.hostBindings;E&&dM(s,E);const I=f.viewQuery,A=f.contentQueries;if(I&&cM(s,I),A&&uM(s,A),le(s.inputs,f.inputs),le(s.declaredInputs,f.declaredInputs),le(s.outputs,f.outputs),Mr(f)&&f.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(s),E===GE&&(l=!1)}}a=Object.getPrototypeOf(a)}!function lM(s){let a=0,l=null;for(let u=s.length-1;u>=0;u--){const f=s[u];f.hostVars=a+=f.hostVars,f.hostAttrs=$a(f.hostAttrs,l=$a(l,f.hostAttrs))}}(u)}function Ly(s){return s===Or?{}:s===It?[]:s}function cM(s,a){const l=s.viewQuery;s.viewQuery=l?(u,f)=>{a(u,f),l(u,f)}:a}function uM(s,a){const l=s.contentQueries;s.contentQueries=l?(u,f,g)=>{a(u,f,g),l(u,f,g)}:a}function dM(s,a){const l=s.hostBindings;s.hostBindings=l?(u,f)=>{a(u,f),l(u,f)}:a}let Mm=null;function gu(){if(!Mm){const s=fn.Symbol;if(s&&s.iterator)Mm=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const u=a[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Mm=u)}}}return Mm}function uf(s){return!!Vy(s)&&(Array.isArray(s)||!(s instanceof Map)&&gu()in s)}function Vy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function _a(s,a,l){return s[a]=l}function fi(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function zE(s,a,l,u){const f=Se();return fi(f,co(),a)&&(jt(),Do(bn(),f,s,a,l,u)),zE}function bM(s,a,l,u,f,g,b,E){const I=Se(),A=jt(),k=s+22,V=A.firstCreatePass?function vM(s,a,l,u,f,g,b,E,I){const A=a.consts,k=af(a,s,4,b||null,Ai(A,E));xy(a,l,k,Ai(A,I)),tu(a,k);const V=k.tViews=My(2,k,u,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,k),V.queries=a.queries.embeddedTView(k)),k}(k,A,I,a,l,u,f,g,b):A.data[k];li(V,!1);const H=I[11].createComment("");Xh(A,I,H,V),ki(H,I),Tm(I,I[k]=Ry(H,I,H,V)),Oc(V)&&CE(A,I,V),null!=b&&IE(I,V,E)}function Hy(s){return function hs(s,a){return s[a]}(function zc(){return Dt.lFrame.contextLView}(),22+s)}function Nm(s,a,l){const u=Se();return fi(u,co(),a)&&bs(jt(),bn(),u,s,a,u[11],l,!1),Nm}function KE(s,a,l,u,f){const b=f?"class":"style";jE(s,l,a.inputs[b],b,u)}function Pd(s,a,l,u){const f=Se(),g=jt(),b=22+s,E=f[11],I=f[b]=Ni(E,a,function Ml(){return Dt.lFrame.currentNamespace}()),A=g.firstCreatePass?function ZE(s,a,l,u,f,g,b){const E=a.consts,A=af(a,s,2,f,Ai(E,g));return xy(a,l,A,Ai(E,b)),null!==A.attrs&&Py(A,A.attrs,!1),null!==A.mergedAttrs&&Py(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(b,g,f,0,a,l,u):g.data[b];li(A,!0);const k=A.mergedAttrs;null!==k&&Ko(E,I,k);const V=A.classes;null!==V&&tE(E,I,V);const H=A.styles;return null!==H&&aA(E,I,H),64!=(64&A.flags)&&Xh(g,f,I,A),0===function bl(){return Dt.lFrame.elementDepthCount}()&&ki(I,f),function wl(){Dt.lFrame.elementDepthCount++}(),Oc(A)&&(CE(g,f,A),VA(g,A,f)),null!==u&&IE(f,A),Pd}function Pm(){let s=An();La()?Va():(s=s.parent,li(s,!1));const a=s;!function Hc(){Dt.lFrame.elementDepthCount--}();const l=jt();return l.firstCreatePass&&(tu(l,s),Pa(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function kl(s){return 0!=(16&s.flags)}(a)&&KE(l,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ed(s){return 0!=(32&s.flags)}(a)&&KE(l,a,Se(),a.stylesWithoutHost,!1),Pm}function Om(s,a,l,u){return Pd(s,a,l,u),Pm(),Om}function Od(s,a,l){const u=Se(),f=jt(),g=s+22,b=f.firstCreatePass?function EM(s,a,l,u,f){const g=a.consts,b=Ai(g,u),E=af(a,s,8,"ng-container",b);return null!==b&&Py(E,b,!0),xy(a,l,E,Ai(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,u,a,l):f.data[g];li(b,!0);const E=u[g]=u[11].createComment("");return Xh(f,u,E,b),ki(E,u),Oc(b)&&(CE(f,u,b),VA(f,b,u)),null!=l&&IE(u,b),Od}function vu(){let s=An();const a=jt();return La()?Va():(s=s.parent,li(s,!1)),a.firstCreatePass&&(tu(a,s),Pa(s)&&a.queries.elementEnd(s)),vu}function ff(){return Se()}function Fm(s){return!!s&&"function"==typeof s.then}function Lm(s){return!!s&&"function"==typeof s.subscribe}const ya=Lm;function pf(s,a,l,u){const f=Se(),g=jt(),b=An();return function Fd(s,a,l,u,f,g,b,E){const I=Oc(u),k=s.firstCreatePass&&BE(s),V=a[8],H=VE(a);let re=!0;if(3&u.type||E){const We=Vr(u,a),rt=E?E(We):We,vt=H.length,Me=E?Kt=>E(Sn(Kt[u.index])):u.index;let wt=null;if(!E&&I&&(wt=function CM(s,a,l,u){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const b=f[g];if(b===l&&f[g+1]===u){const E=a[7],I=f[g+2];return E.length>I?E[I]:null}"string"==typeof b&&(g+=2)}return null}(s,a,f,u.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=g,wt.__ngLastListenerFn__=g,re=!1;else{g=YE(u,a,V,g,!1);const Kt=l.listen(rt,f,g);H.push(g,Kt),k&&k.push(f,Me,vt,vt+1)}}else g=YE(u,a,V,g,!1);const Ce=u.outputs;let Ve;if(re&&null!==Ce&&(Ve=Ce[f])){const We=Ve.length;if(We)for(let rt=0;rt<We;rt+=2){const jn=a[Ve[rt]][Ve[rt+1]].subscribe(g),ko=H.length;H.push(g,jn),k&&k.push(f,u.index,ko,-(ko+1))}}}(g,f,f[11],b,s,a,0,u),pf}function $y(s,a,l,u){try{return!1!==l(u)}catch(f){return eM(s,f),!1}}function YE(s,a,l,u,f){return function g(b){if(b===Function)return u;ky(2&s.flags?Gt(s.index,a):a);let I=$y(a,0,u,b),A=g.__ngNextListenerFn__;for(;A;)I=$y(a,0,A,b)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function Gy(s=1){return function ho(s){return(Dt.lFrame.contextLView=function Al(s,a){for(;s>0;)a=a[15],s--;return a}(s,Dt.lFrame.contextLView))[8]}(s)}function cc(s,a){let l=null;const u=function aF(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===u?dA(s,g,!0):fA(u,g))return f}else l=f}return l}function zy(s){const a=Se()[16][6];if(!a.projection){const u=a.projection=ui(s?s.length:1,null),f=u.slice();let g=a.child;for(;null!==g;){const b=s?cc(g,s):0;null!==b&&(f[b]?f[b].projectionNext=g:u[b]=g,f[b]=g),g=g.next}}}function Wy(s,a=0,l){const u=Se(),f=jt(),g=af(f,22+s,16,null,l||null);null===g.projection&&(g.projection=a),Va(),64!=(64&g.flags)&&function oA(s,a,l){Ad(a[11],0,a,l,eA(s,l,a),iA(l.parent||a[6],l,a))}(f,u,g)}function es(s,a,l,u,f){const g=s[l+1],b=null===a;let E=u?Ks(g):ga(g),I=!1;for(;0!==E&&(!1===I||b);){const k=s[E+1];XE(s[E],a)&&(I=!0,s[E+1]=u?Em(k):Io(k)),E=u?Ks(k):ga(k)}I&&(s[l+1]=u?Io(g):Em(g))}function XE(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&di(s,a)>=0}function bf(s,a){return function Ao(s,a,l,u){const f=Se(),g=jt(),b=function ps(s){const a=Dt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);g.firstUpdatePass&&function uc(s,a,l,u){const f=s.data;if(null===f[l+1]){const g=f[nr()],b=function nC(s,a){return a>=s.expandoStartIndex}(s,l);(function sC(s,a){return 0!=(s.flags&(a?16:32))})(g,u)&&null===a&&!b&&(a=!1),a=function Zy(s,a,l,u){const f=function ja(s){const a=Dt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(l=wf(l=Qy(null,s,a,l,u),a.attrs,u),g=null);else{const b=a.directiveStylingLast;if(-1===b||s[b]!==f)if(l=Qy(f,s,a,l,u),null===g){let I=function Yy(s,a,l){const u=l?a.classBindings:a.styleBindings;if(0!==ga(u))return s[Ks(u)]}(s,a,u);void 0!==I&&Array.isArray(I)&&(I=Qy(null,s,a,I[1],u),I=wf(I,a.attrs,u),function jm(s,a,l,u){s[Ks(l?a.classBindings:a.styleBindings)]=u}(s,a,u,I))}else g=function PM(s,a,l){let u;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)u=wf(u,s[g].hostAttrs,l);return wf(u,a.attrs,l)}(s,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,u),function IM(s,a,l,u,f,g){let b=g?a.classBindings:a.styleBindings,E=Ks(b),I=ga(b);s[u]=l;let k,A=!1;if(Array.isArray(l)){const V=l;k=V[1],(null===k||di(V,k)>0)&&(A=!0)}else k=l;if(f)if(0!==I){const H=Ks(s[E+1]);s[u+1]=wm(H,E),0!==H&&(s[H+1]=xd(s[H+1],u)),s[E+1]=function SA(s,a){return 131071&s|a<<17}(s[E+1],u)}else s[u+1]=wm(E,0),0!==E&&(s[E+1]=xd(s[E+1],u)),E=u;else s[u+1]=wm(I,0),0===E?E=u:s[I+1]=xd(s[I+1],u),I=u;A&&(s[u+1]=Io(s[u+1])),es(s,k,u,!0),es(s,k,u,!1),function DM(s,a,l,u,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&di(g,a)>=0&&(l[u+1]=Em(l[u+1]))}(a,k,s,u,g),b=wm(E,I),g?a.classBindings=b:a.styleBindings=b}(f,g,a,l,b,u)}}(g,s,b,u),a!==Ot&&fi(f,b,a)&&function iC(s,a,l,u,f,g,b,E){if(!(3&a.type))return;const I=s.data,A=I[E+1];Ud(function AA(s){return 1==(1&s)}(A)?Ef(I,a,l,f,ga(A),b):void 0)||(Ud(g)||function vy(s){return 2==(2&s)}(A)&&(g=Ef(I,null,l,f,E,b)),function nF(s,a,l,u,f){if(a)f?s.addClass(l,u):s.removeClass(l,u);else{let g=-1===u.indexOf("-")?void 0:fa.DashCase;null==f?s.removeStyle(l,u,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=fa.Important),s.setStyle(l,u,f,g))}}(u,b,ai(nr(),l),f,g))}(g,g.data[nr()],f,f[11],s,f[b+1]=function Hm(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=me(Co(s)))),s}(a,l),u,b)}(s,a,null,!0),bf}function Qy(s,a,l,u,f){let g=null;const b=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<b&&(g=a[E],u=wf(u,g.hostAttrs,f),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),u}function wf(s,a,l){const u=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const b=a[g];"number"==typeof b?f=b:f===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xr(s,b,!!l||a[++g]))}return void 0===s?null:s}function Ef(s,a,l,u,f,g){const b=null===a;let E;for(;f>0;){const I=s[f],A=Array.isArray(I),k=A?I[1]:I,V=null===k;let H=l[f+1];H===Ot&&(H=V?It:void 0);let re=V?$l(H,u):k===u?H:void 0;if(A&&!Ud(re)&&(re=$l(I,u)),Ud(re)&&(E=re,b))return E;const Ce=s[f+1];f=b?Ks(Ce):ga(Ce)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=$l(I,u))}return E}function Ud(s){return void 0!==s}function Xy(s,a=""){const l=Se(),u=jt(),f=s+22,g=u.firstCreatePass?af(u,f,1,a,null):u.data[f],b=l[f]=function Kw(s,a){return s.createText(a)}(l[11],a);Xh(u,l,b,g),li(g,!1)}function ev(s){return tv("",s,""),ev}function tv(s,a,l){const u=Se(),f=function kd(s,a,l,u){return fi(s,co(),l)?a+ve(l)+u:Ot}(u,s,a,l);return f!==Ot&&function rc(s,a,l){const u=ai(a,s);!function Zw(s,a,l){s.setValue(a,l)}(s[11],u,l)}(u,nr(),f),tv}function Hd(s,a,l){const u=Se();return fi(u,co(),a)&&bs(jt(),bn(),u,s,a,u[11],l,!0),Hd}const dc=void 0;var _C=["en",[["a","p"],["AM","PM"],dc],[["AM","PM"],dc,dc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dc,"{1} 'at' {0}",dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gC(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let ei={};function sv(s){const a=function XM(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=yC(a);if(l)return l;const u=a.split("-")[0];if(l=yC(u),l)return l;if("en"===u)return _C;throw new Ee(701,!1)}function ov(s){return sv(s)[yt.PluralCase]}function yC(s){return s in ei||(ei[s]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[s]),ei[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const $d="en-US";let lv=$d;function eg(s,a,l,u,f){if(s=X(s),Array.isArray(s))for(let g=0;g<s.length;g++)eg(s[g],a,l,u,f);else{const g=jt(),b=Se();let E=ha(s)?s:X(s.provide),I=Yh(s);const A=An(),k=1048575&A.providerIndexes,V=A.directiveStart,H=A.providerIndexes>>20;if(ha(s)||!s.multi){const re=new Hs(I,f,Md),Ce=tg(E,a,f?k:k+H,V);-1===Ce?($s(go(A,b),g,E),Gd(g,s,a.length),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(re),b.push(re)):(l[Ce]=re,b[Ce]=re)}else{const re=tg(E,a,k+H,V),Ce=tg(E,a,k,k+H),Ve=re>=0&&l[re],We=Ce>=0&&l[Ce];if(f&&!We||!f&&!Ve){$s(go(A,b),g,E);const rt=function GC(s,a,l,u,f){const g=new Hs(s,l,Md);return g.multi=[],g.index=a,g.componentProviders=0,wv(g,f,u&&!l),g}(f?$C:HC,l.length,f,u,I);!f&&We&&(l[Ce].providerFactory=rt),Gd(g,s,a.length,0),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(rt),b.push(rt)}else Gd(g,s,re>-1?re:Ce,wv(l[f?Ce:re],I,!f&&u));!f&&u&&We&&l[Ce].componentProviders++}}}function Gd(s,a,l,u){const f=ha(a),g=function Qi(s){return!!s.useClass}(a);if(f||g){const I=(g?X(a.useClass):a).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const k=A.indexOf(l);-1===k?A.push(l,[u,I]):A[k+1].push(u,I)}else A.push(l,I)}}}function wv(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function tg(s,a,l,u){for(let f=l;f<u;f++)if(a[f]===s)return f;return-1}function HC(s,a,l,u){return Ev(this.multi,[])}function $C(s,a,l,u){const f=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=ms(l,l[1],this.providerFactory.index,u);g=E.slice(0,b),Ev(f,g);for(let I=b;I<E.length;I++)g.push(E[I])}else g=[],Ev(f,g);return g}function Ev(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function Cv(s,a=[]){return l=>{l.providersResolver=(u,f)=>function jC(s,a,l){const u=jt();if(u.firstCreatePass){const f=Mr(s);eg(l,u.data,u.blueprint,f,!0),eg(a,u.data,u.blueprint,f,!1)}}(u,f?f(s):s,a)}}class pc{}class Iv{}function Dv(s,a){return new Tv(s,a??null)}class Tv extends pc{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fy(this);const u=Fr(a);this._bootstrapComponents=il(u.bootstrap),this._r3Injector=wA(a,l,[{provide:pc,useValue:this},{provide:_,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class ng extends Iv{constructor(a){super(),this.moduleType=a}create(a){return new Tv(this.moduleType,a)}}class Sv extends pc{constructor(a,l,u){super(),this.componentFactoryResolver=new Fy(this),this.instance=null;const f=new om([...a,{provide:pc,useValue:this},{provide:_,useValue:this.componentFactoryResolver}],l||Kh(),u,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function zd(s,a,l=null){return new Sv(s,a,l).injector}let zC=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const u=Kl(0,l.type),f=u.length>0?zd([u],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Jt({token:s,providedIn:"environment",factory:()=>new s(Bn(hi))}),s})();function Av(s){s.getStandaloneInjector=a=>a.get(zC).getOrCreateStandaloneInjector(s)}function Ax(s,a,l,u){return function Wd(s,a,l,u,f,g){const b=a+l;return fi(s,b,f)?_a(s,b+1,g?u.call(g,f):u(f)):wa(s,b+1)}(Se(),Mn(),s,a,l,u)}function KC(s,a,l,u,f){return function og(s,a,l,u,f,g,b){const E=a+l;return function _u(s,a,l,u){const f=fi(s,a,l);return fi(s,a+1,u)||f}(s,E,f,g)?_a(s,E+2,b?u.call(b,f,g):u(f,g)):wa(s,E+2)}(Se(),Mn(),s,a,l,u,f)}function wa(s,a){const l=s[a];return l===Ot?void 0:l}function wu(s){return a=>{setTimeout(s,void 0,a)}}const Cs=class dg extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,u){let f=a,g=l||(()=>null),b=u;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),b=I.complete?.bind(I)}this.__isAsync&&(g=wu(g),f&&(f=wu(f)),b&&(b=wu(b)));const E=super.subscribe({next:f,error:g,complete:b});return a instanceof te.w0&&a.add(E),E}};function hg(){return this._results[gu()]()}class fg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=gu(),u=fg.prototype;u[l]||(u[l]=hg)}get changes(){return this._changes||(this._changes=new Cs)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const u=this;u.dirty=!1;const f=Br(a);(this._changesDetected=!function _s(s,a,l){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++){let f=s[u],g=a[u];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(u._results,f,l))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Eu=(()=>{class s{}return s.__NG_ELEMENT_ID__=Px,s})();const pg=Eu,Nx=class extends pg{constructor(a,l,u){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(a,l){const u=this._declarationTContainer.tViews,f=Sy(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(u)),EE(u,f,a),new Am(f)}};function Px(){return Nf(An(),Se())}function Nf(s,a){return 4&s.type?new Nx(a,s,M(s,a)):null}let mg=(()=>{class s{}return s.__NG_ELEMENT_ID__=JC,s})();function JC(){return Lx(An(),Se())}const Ox=mg,Fx=class extends Ox{constructor(a,l,u){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=u}get element(){return M(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Fl(this._hostTNode,this._hostLView);if(nd(a)){const l=za(a,this._hostLView),u=pr(a);return new yo(l[1].data[u+8],l)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=XC(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,u){let f,g;"number"==typeof u?f=u:null!=u&&(f=u.index,g=u.injector);const b=a.createEmbeddedView(l||{},g);return this.insert(b,f),b}createComponent(a,l,u,f,g){const b=a&&!function gr(s){return"function"==typeof s}(a);let E;if(b)E=l;else{const V=l||{};E=V.index,u=V.injector,f=V.projectableNodes,g=V.environmentInjector||V.ngModuleRef}const I=b?a:new cf(kt(a)),A=u||this.parentInjector;if(!g&&null==I.ngModule){const H=(b?A:this.parentInjector).get(hi,null);H&&(g=H)}const k=I.create(A,f,void 0,g);return this.insert(k.hostView,E),k}insert(a,l){const u=a._lView,f=u[1];if(function _l(s){return Lr(s[3])}(u)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const V=u[3],H=new Fx(V,V[6],V[3]);H.detach(H.indexOf(a))}}const g=this._adjustIndex(l),b=this._lContainer;!function cy(s,a,l,u){const f=10+u,g=l.length;u>0&&(l[f-1][4]=a),u<g-10?(a[4]=l[f],ta(l,10+u,a)):(l.push(a),a[4]=null),a[3]=l;const b=a[17];null!==b&&l!==b&&function uy(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(s),a[2]|=64}(f,u,b,g);const E=ym(g,b),I=u[11],A=hy(I,b[7]);return null!==A&&function J1(s,a,l,u,f,g){u[0]=f,u[6]=a,ef(s,u,l,1,f,g)}(f,b[6],I,u,A,E),a.attachToViewContainerRef(),ta(gg(b),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=XC(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),u=dy(this._lContainer,l);u&&(na(gg(this._lContainer),l),JS(u[1],u))}detach(a){const l=this._adjustIndex(a,-1),u=dy(this._lContainer,l);return u&&null!=na(gg(this._lContainer),l)?new Am(u):null}_adjustIndex(a,l=0){return a??this.length+l}};function XC(s){return s[8]}function gg(s){return s[8]||(s[8]=[])}function Lx(s,a){let l;const u=a[s.index];if(Lr(u))l=u;else{let f;if(8&s.type)f=Sn(u);else{const g=a[11];f=g.createComment("");const b=Vr(s,a);Td(g,hy(g,b),f,function Jw(s,a){return s.nextSibling(a)}(g,b),!1)}a[s.index]=l=Ry(u,a,f,s),Tm(a,l)}return new Fx(l,s,a)}class Pf{constructor(a){this.queryList=a,this.matches=null}clone(){return new Pf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ov{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const u=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<u;g++){const b=l.getByIndex(g);f.push(this.queries[b.indexInDeclarationView].clone())}return new Ov(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Uv(a,l).matches&&this.queries[l].setDirty()}}class Ux{constructor(a,l,u=null){this.predicate=a,this.flags=l,this.read=u}}class Fv{constructor(a=[]){this.queries=a}elementStart(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let u=0;u<this.length;u++){const f=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(a,f);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new Fv(l):null}template(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Cu{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Cu(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const g=u[f];this.matchTNodeWithReadOption(a,l,_g(l,g)),this.matchTNodeWithReadOption(a,l,Zo(l,a,g,!1,!1))}else u===Eu?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Zo(l,a,u,!1,!1))}matchTNodeWithReadOption(a,l,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===N||f===mg||f===Eu&&4&l.type)this.addMatch(l.index,-2);else{const g=Zo(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function _g(s,a){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===a)return l[u+1];return null}function tI(s,a,l,u){return-1===l?function eI(s,a){return 11&s.type?M(s,a):4&s.type?Nf(s,a):null}(a,s):-2===l?function Iu(s,a,l){return l===N?M(a,s):l===Eu?Nf(a,s):l===mg?Lx(a,s):void 0}(s,a,u):ms(s,s[1],l,a)}function jx(s,a,l,u){const f=a[19].queries[u];if(null===f.matches){const g=s.data,b=l.matches,E=[];for(let I=0;I<b.length;I+=2){const A=b[I];E.push(A<0?null:tI(a,g[A],b[I+1],l.metadata.read))}f.matches=E}return f.matches}function Lv(s,a,l,u){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const b=jx(s,a,f,l);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)u.push(b[E/2]);else{const A=g[E+1],k=a[-I];for(let V=10;V<k.length;V++){const H=k[V];H[17]===H[3]&&Lv(H[1],H,A,u)}if(null!==k[9]){const V=k[9];for(let H=0;H<V.length;H++){const re=V[H];Lv(re[1],re,A,u)}}}}}return u}function Vv(s){const a=Se(),l=jt(),u=Kc();Ha(u+1);const f=Uv(l,u);if(s.dirty&&function gl(s){return 4==(4&s[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Lv(l,a,u,[]):jx(l,a,f,u);s.reset(g,Y),s.notifyOnChanges()}return!0}return!1}function Hx(s,a,l){const u=jt();u.firstCreatePass&&(Bv(u,new Ux(s,a,l),-1),2==(2&a)&&(u.staticViewQueries=!0)),nI(u,Se(),a)}function $x(s,a,l,u){const f=jt();if(f.firstCreatePass){const g=An();Bv(f,new Ux(a,l,u),g.index),function zx(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}nI(f,Se(),l)}function Gx(){return function hL(s,a){return s[19].queries[a].queryList}(Se(),Kc())}function nI(s,a,l){const u=new fg(4==(4&l));TE(s,a,u,u.destroy),null===a[19]&&(a[19]=new Ov),a[19].queries.push(new Pf(u))}function Bv(s,a,l){null===s.queries&&(s.queries=new Fv),s.queries.track(new Cu(a,l))}function Uv(s,a){return s.queries.getByIndex(a)}function jv(s,a){return Nf(s,a)}function Zv(...s){}const EI=new yn("Application Initializer");let Yv=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Zv,this.reject=Zv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Fm(g))l.push(g);else if(ya(g)){const b=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});l.push(b)}}Promise.all(l).then(()=>{u()}).catch(f=>{this.reject(f)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Bn(EI,8))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const oR=new yn("AppId",{providedIn:"root",factory:function aR(){return`${Qv()}${Qv()}${Qv()}`}});function Qv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cR=new yn("Platform Initializer"),_L=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CI=new yn("appBootstrapListener"),uR=new yn("AnimationModuleType");let dR=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const wg=new yn("LocaleId",{providedIn:"root",factory:()=>D(wg,Je.Optional|Je.SkipSelf)||function hR(){return typeof $localize<"u"&&$localize.locale||$d}()}),fR=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vL{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let bL=(()=>{class s{compileModuleSync(l){return new ng(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=il(Fr(l).declarations).reduce((b,E)=>{const I=kt(E);return I&&b.push(new cf(I)),b},[]);return new vL(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const mR=(()=>Promise.resolve(0))();function Jv(s){typeof Zone>"u"?mR.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Is{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cs(!1),this.onMicrotaskEmpty=new Cs(!1),this.onStable=new Cs(!1),this.onError=new Cs(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&l,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function gR(){let s=fn.requestAnimationFrame,a=fn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function yR(s){const a=()=>{!function DI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Cg(s),s.isCheckStableRunning=!0,Eg(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Cg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,f,g,b,E)=>{try{return TI(s),l.invokeTask(f,g,b,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),SI(s)}},onInvoke:(l,u,f,g,b,E,I)=>{try{return TI(s),l.invoke(f,g,b,E,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),SI(s)}},onHasTask:(l,u,f,g)=>{l.hasTask(f,g),u===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Cg(s),Eg(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new Ee(909,!1)}run(a,l,u){return this._inner.run(a,l,u)}runTask(a,l,u,f){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+f,a,_R,Zv,Zv);try{return g.runTask(b,l,u)}finally{g.cancelTask(b)}}runGuarded(a,l,u){return this._inner.runGuarded(a,l,u)}runOutsideAngular(a){return this._outer.run(a)}}const _R={};function Eg(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Cg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function TI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function SI(s){s._nesting--,Eg(s)}class vR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cs,this.onMicrotaskEmpty=new Cs,this.onStable=new Cs,this.onError=new Cs}run(a,l,u){return a.apply(l,u)}runGuarded(a,l,u){return a.apply(l,u)}runOutsideAngular(a){return a()}runTask(a,l,u,f){return a.apply(l,u)}}const Xv=new yn(""),AI=new yn("");let eb,bR=(()=>{class s{constructor(l,u,f){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,eb||(function IL(s){eb=s}(f),f.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),Jv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jv(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,f){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(Bn(Is),Bn(MI),Bn(AI))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})(),MI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return eb?.findTestabilityInTree(this,l,u)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),_c=null;const xI=new yn("AllowMultipleToken"),tb=new yn("PlatformDestroyListeners");function NI(s,a,l=[]){const u=`Platform: ${a}`,f=new yn(u);return(g=[])=>{let b=Ea();if(!b||b.injector.get(xI,!1)){const E=[...l,...g,{provide:f,useValue:!0}];s?s(E):function ol(s){if(_c&&!_c.get(xI,!1))throw new Ee(400,!1);_c=s;const a=s.get(IR);(function kI(s){const a=s.get(cR,null);a&&a.forEach(l=>l())})(s)}(function nb(s=[],a){return fu.create({name:a,providers:[{provide:yr,useValue:"platform"},{provide:tb,useValue:new Set([()=>_c=null])},...s]})}(E,u))}return function CR(s){const a=Ea();if(!a)throw new Ee(401,!1);return a}()}}function Ea(){return _c?.get(IR)??null}let IR=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const f=function OI(s,a){let l;return l="noop"===s?new vR:("zone.js"===s?void 0:s)||new Is(a),l}(u?.ngZone,function PI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:Is,useValue:f}];return f.run(()=>{const b=fu.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(b),I=E.injector.get(pm,null);if(!I)throw new Ee(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:k=>{I.handleError(k)}});E.onDestroy(()=>{Ig(this._modules,E),A.unsubscribe()})}),function ib(s,a,l){try{const u=l();return Fm(u)?u.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>s.handleError(u)),u}}(I,f,()=>{const A=E.injector.get(Yv);return A.runInitializers(),A.donePromise.then(()=>(function If(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(lv=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(wg,$d)||$d),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,u=[]){const f=sb({},u);return function wR(s,a,l){const u=new ng(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const u=l.injector.get(Uf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Ee(403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(tb,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Bn(fu))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function sb(s,a){return Array.isArray(a)?a.reduce(sb,s):{...s,...a}}let Uf=(()=>{class s{constructor(l,u,f){this._zone=l,this._injector=u,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new F.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),b=new F.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Is.assertNotInAngularZone(),Jv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(g,b.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const f=l instanceof cm;if(!this._injector.get(Yv).done)throw!f&&Gi(l),new Ee(405,false);let b;b=f?l:this._injector.get(_).resolveComponentFactory(l),this.componentTypes.push(b.componentType);const E=function RI(s){return s.isBoundToModule}(b)?void 0:this._injector.get(pc),A=b.create(fu.NULL,[],u||b.selector,E),k=A.location.nativeElement,V=A.injector.get(Xv,null);return V?.registerApplication(k),A.onDestroy(()=>{this.detachView(A.hostView),Ig(this.components,A),V?.unregisterApplication(k)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;Ig(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(CI,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Ig(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ee(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Bn(Is),Bn(hi),Bn(pm))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ig(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let Dg=!0,Tg=!1;function Sg(){return Tg=!0,Dg}function FI(){if(Tg)throw new Error("Cannot enable prod mode after platform setup.");Dg=!1}let VI=(()=>{class s{}return s.__NG_ELEMENT_ID__=TR,s})();function TR(s){return function SL(s,a,l){if(Ho(s)&&!l){const u=Gt(s.index,a);return new Am(u,u)}return 47&s.type?new Am(a[16],a):null}(An(),Se(),16==(16&s))}class MR{constructor(){}supports(a){return uf(a)}create(a){return new UI(a)}}const Oi=(s,a)=>a;class UI{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Oi}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,u=this._removalsHead,f=0,g=null;for(;l||u;){const b=!u||l&&l.currentIndex<HI(u,f,g)?l:u,E=HI(b,f,g),I=b.currentIndex;if(b===u)f--,u=u._nextRemoved;else if(l=l._next,null==b.previousIndex)f++;else{g||(g=[]);const A=E-f,k=I-f;if(A!=k){for(let H=0;H<A;H++){const re=H<g.length?g[H]:g[H]=0,Ce=re+H;k<=Ce&&Ce<A&&(g[H]=re+1)}g[b.previousIndex]=k-A}}E!==I&&a(b,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!uf(a))throw new Ee(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,b,l=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],b=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,b)?(u&&(l=this._verifyReinsertion(l,g,b,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,b,E),u=!0),l=l._next}else f=0,function gM(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[gu()]();let u;for(;!(u=l.next()).done;)a(u.value)}}(a,E=>{b=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,b)?(u&&(l=this._verifyReinsertion(l,E,b,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,b,f),u=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,u,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new xR(l,u),g,f),a}_verifyReinsertion(a,l,u,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,u),this._addToMoves(a,u),a}_moveAfter(a,l,u){return this._unlink(a),this._insertAfter(a,l,u),this._addToMoves(a,u),a}_addAfter(a,l,u){return this._insertAfter(a,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,u){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new jI),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,u=a._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jI),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class xR{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Du{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const l=a._prevDup,u=a._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class jI{constructor(){this.map=new Map}put(a){const l=a.trackById;let u=this.map.get(l);u||(u=new Du,this.map.set(l,u)),u.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HI(s,a,l){const u=s.previousIndex;if(null===u)return u;let f=0;return l&&u<l.length&&(f=l[u]),u+a+f}class Nn{constructor(){}supports(a){return a instanceof Map||Vy(a)}create(){return new kL}}class kL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Vy(a)))throw new Ee(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const u=a._prev;return l._next=a,l._prev=u,a._prev=l,u&&(u._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,b=f._next;return g&&(g._next=b),b&&(b._prev=g),f._next=null,f._prev=null,f}const u=new $I(a);return this._records.set(a,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(u=>l(a[u],u))}}class $I{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ca(){return new be([new MR])}let be=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const f=u.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||Ca()),deps:[[s,new Et,new $e]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(null!=u)return u;throw new Ee(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:Ca}),s})();function O(){return new Ds([new Nn])}let Ds=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const f=u.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||O()),deps:[[s,new Et,new $e]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(u)return u;throw new Ee(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:O}),s})();const kR=NI(null,"core",[]);let NR=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Bn(Uf))},s.\u0275mod=ut({type:s}),s.\u0275inj=Rt({}),s})();function qI(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(at,De,L)=>{L.d(De,{Z:()=>Ee});var d=L(2090),te=L(4859),F=L(9681),ae=L(1877);class se{constructor(ve,_e){this._delegate=ve,this.firebase=_e,(0,F._addComponent)(ve,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ve,_e=F._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(ve);return!lt.isInitialized()&&"EXPLICIT"===(null===(Xe=lt.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:_e})}_removeServiceInstance(ve,_e=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(_e)}_addComponent(ve){(0,F._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,F._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ge(){const tt=function me(tt){const ve={},_e={__esModule:!0,initializeApp:function xe(He,$={}){const ye=F.initializeApp(He,$);if((0,d.r3)(ve,ye.name))return ve[ye.name];const J=new tt(ye,_e);return ve[ye.name]=J,J},app:lt,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(He){const $=He.name,ye=$.replace("-compat","");if(F._registerComponent(He)&&"PUBLIC"===He.type){const J=(ne=lt())=>{if("function"!=typeof ne[ye])throw le.create("invalid-app-argument",{appName:$});return ne[ye]()};void 0!==He.serviceProps&&(0,d.ZB)(J,He.serviceProps),_e[ye]=J,tt.prototype[ye]=function(...ne){return this._getService.bind(this,$).apply(this,He.multipleInstances?ne:[])}}return"PUBLIC"===He.type?_e[ye]:null},removeApp:function Xe(He){delete ve[He]},useAsService:function Ue(He,$){return"serverAuth"===$?null:$},modularAPIs:F}};function lt(He){if(!(0,d.r3)(ve,He=He||F._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:He});return ve[He]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function we(){return Object.keys(ve).map(He=>ve[He])}}),lt.App=tt,_e}(se);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function ve(_e){(0,d.ZB)(tt,_e)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),tt}(),W=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ee=G;!function Re(tt){(0,F.registerVersion)("@firebase/app-compat","0.1.34",tt)}()},9681:(at,De,L)=>{L.r(De),L.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ns,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>Jt,_apps:()=>hn,_clearComponents:()=>Bo,_components:()=>On,_getProvider:()=>Rt,_registerComponent:()=>Pr,_removeServiceInstance:()=>ln,deleteApp:()=>Uo,getApp:()=>qr,getApps:()=>ri,initializeApp:()=>$i,onLog:()=>os,registerVersion:()=>Kr,setLogLevel:()=>Fn});var d=L(5861),te=L(4859),F=L(1877),ae=L(2090),se=L(8766);class fe{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function le(j){return"VERSION"===j.getComponent()?.type}(K)){const Te=K.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(K=>K).join(" ")}}const me="@firebase/app",G=new F.Yd("@firebase/app"),Bt="[DEFAULT]",qe={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,On=new Map;function Qt(j,q){try{j.container.addComponent(q)}catch(K){G.debug(`Component ${q.name} failed to register with FirebaseApp ${j.name}`,K)}}function Jt(j,q){j.container.addOrOverwriteComponent(q)}function Pr(j){const q=j.name;if(On.has(q))return G.debug(`There were multiple attempts to register component ${q}.`),!1;On.set(q,j);for(const K of hn.values())Qt(K,j);return!0}function Rt(j,q){const K=j.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),j.container.getProvider(q)}function ln(j,q,K=Bt){Rt(j,q).clearInstance(K)}function Bo(){On.clear()}const Ar=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wr{constructor(q,K,Te){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const Ns="9.10.0";function $i(j,q={}){"object"!=typeof q&&(q={name:q});const K=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},q),Te=K.name;if("string"!=typeof Te||!Te)throw Ar.create("bad-app-name",{appName:String(Te)});const je=hn.get(Te);if(je){if((0,ae.vZ)(j,je.options)&&(0,ae.vZ)(K,je.config))return je;throw Ar.create("duplicate-app",{appName:Te})}const ut=new te.H0(Te);for(const tn of On.values())ut.addComponent(tn);const _n=new Wr(j,K,ut);return hn.set(Te,_n),_n}function qr(j=Bt){const q=hn.get(j);if(!q)throw Ar.create("no-app",{appName:j});return q}function ri(){return Array.from(hn.values())}function Uo(j){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(j){const q=j.name;hn.has(q)&&(hn.delete(q),yield Promise.all(j.container.getProviders().map(K=>K.delete())),j.isDeleted=!0)})).apply(this,arguments)}function Kr(j,q,K){var Te;let je=null!==(Te=qe[j])&&void 0!==Te?Te:j;K&&(je+=`-${K}`);const ut=je.match(/\s|\//),_n=q.match(/\s|\//);if(ut||_n){const tn=[`Unable to register library "${je}" with version "${q}":`];return ut&&tn.push(`library name "${je}" contains illegal characters (whitespace or "/")`),ut&&_n&&tn.push("and"),_n&&tn.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void G.warn(tn.join(" "))}Pr(new te.wA(`${je}-version`,()=>({library:je,version:q}),"VERSION"))}function os(j,q){if(null!==j&&"function"!=typeof j)throw Ar.create("invalid-log-argument");(0,F.Am)(j,q)}function Fn(j){(0,F.Ub)(j)}const Ln="firebase-heartbeat-store";let zn=null;function gn(){return zn||(zn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(j,q)=>{0===q&&j.createObjectStore(Ln)}}).catch(j=>{throw Ar.create("idb-open",{originalErrorMessage:j.message})})),zn}function ct(){return(ct=(0,d.Z)(function*(j){var q;try{return(yield gn()).transaction(Ln).objectStore(Ln).get(hr(j))}catch(K){if(K instanceof ae.ZR)G.warn(K.message);else{const Te=Ar.create("idb-get",{originalErrorMessage:null===(q=K)||void 0===q?void 0:q.message});G.warn(Te.message)}}})).apply(this,arguments)}function fn(j,q){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(j,q){var K;try{const je=(yield gn()).transaction(Ln,"readwrite");return yield je.objectStore(Ln).put(q,hr(j)),je.done}catch(Te){if(Te instanceof ae.ZR)G.warn(Te.message);else{const je=Ar.create("idb-set",{originalErrorMessage:null===(K=Te)||void 0===K?void 0:K.message});G.warn(je.message)}}})).apply(this,arguments)}function hr(j){return`${j.name}!${j.options.appId}`}class as{constructor(q){this.container=q,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Xt(K),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var q=this;return(0,d.Z)(function*(){const Te=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),je=en();if(null===q._heartbeatsCache&&(q._heartbeatsCache=yield q._heartbeatsCachePromise),q._heartbeatsCache.lastSentHeartbeatDate!==je&&!q._heartbeatsCache.heartbeats.some(ut=>ut.date===je))return q._heartbeatsCache.heartbeats.push({date:je,agent:Te}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(ut=>{const _n=new Date(ut.date).valueOf();return Date.now()-_n<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,d.Z)(function*(){if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null===q._heartbeatsCache||0===q._heartbeatsCache.heartbeats.length)return"";const K=en(),{heartbeatsToSend:Te,unsentEntries:je}=function Di(j,q=1024){const K=[];let Te=j.slice();for(const je of j){const ut=K.find(_n=>_n.agent===je.agent);if(ut){if(ut.dates.push(je.date),Z(K)>q){ut.dates.pop();break}}else if(K.push({agent:je.agent,dates:[je.date]}),Z(K)>q){K.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:K,unsentEntries:Te}}(q._heartbeatsCache.heartbeats),ut=(0,ae.L)(JSON.stringify({version:2,heartbeats:Te}));return q._heartbeatsCache.lastSentHeartbeatDate=K,je.length>0?(q._heartbeatsCache.heartbeats=je,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),ut})()}}function en(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,d.Z)(function*(){return(yield q._canUseIndexedDBPromise)&&(yield function ft(j){return ct.apply(this,arguments)}(q.app))||{heartbeats:[]}})()}overwrite(q){var K=this;return(0,d.Z)(function*(){var Te;if(yield K._canUseIndexedDBPromise){const ut=yield K.read();return fn(K.app,{lastSentHeartbeatDate:null!==(Te=q.lastSentHeartbeatDate)&&void 0!==Te?Te:ut.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var K=this;return(0,d.Z)(function*(){var Te;if(yield K._canUseIndexedDBPromise){const ut=yield K.read();return fn(K.app,{lastSentHeartbeatDate:null!==(Te=q.lastSentHeartbeatDate)&&void 0!==Te?Te:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...q.heartbeats]})}})()}}function Z(j){return(0,ae.L)(JSON.stringify({version:2,heartbeats:j})).length}!function z(j){Pr(new te.wA("platform-logger",q=>new fe(q),"PRIVATE")),Pr(new te.wA("heartbeat",q=>new as(q),"PRIVATE")),Kr(me,"0.7.33",j),Kr(me,"0.7.33","esm2017"),Kr("fire-js","")}("")},4859:(at,De,L)=>{L.d(De,{H0:()=>me,wA:()=>F,zt:()=>se});var d=L(5861),te=L(2090);class F{constructor(G,W,X){this.name=G,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class se{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const X=new te.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:W});Be&&X.resolve(Be)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const X=this.normalizeInstanceIdentifier(G?.identifier),Be=null!==(W=G?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Re){if(Be)return null;throw Re}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(ge){return"EAGER"===ge.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(W);try{const Re=this.getOrInitializeService({instanceIdentifier:Be});X.resolve(Re)}catch{}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,X=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Re,Ee]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Re)&&Ee.resolve(Be);return Be}onInit(G,W){var X;const Be=this.normalizeInstanceIdentifier(W),Re=null!==(X=this.onInitCallbacks.get(Be))&&void 0!==X?X:new Set;Re.add(G),this.onInitCallbacks.set(Be,Re);const Ee=this.instances.get(Be);return Ee&&G(Ee,Be),()=>{Re.delete(G)}}invokeOnInitCallbacks(G,W){const X=this.onInitCallbacks.get(W);if(X)for(const Be of X)try{Be(G,W)}catch{}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let X=this.instances.get(G);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=G,ge===ae?void 0:ge),options:W}),this.instances.set(G,X),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(X,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,X)}catch{}var ge;return X||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new se(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,L)=>{L.d(De,{Am:()=>ge,Ub:()=>me,Yd:()=>le,in:()=>te});const d=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const F={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ae=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},fe=(G,W,...X)=>{if(W<G.logLevel)return;const Be=(new Date).toISOString(),Re=se[W];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Re](`[${Be}]  ${G.name}:`,...X)};class le{constructor(W){this.name=W,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in te))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...W),this._logHandler(this,te.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...W),this._logHandler(this,te.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,te.INFO,...W),this._logHandler(this,te.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,te.WARN,...W),this._logHandler(this,te.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...W),this._logHandler(this,te.ERROR,...W)}}function me(G){d.forEach(W=>{W.setLogLevel(G)})}function ge(G,W){for(const X of d){let Be=null;W&&W.level&&(Be=F[W.level]),X.userLogHandler=null===G?null:(Re,Ee,...tt)=>{const ve=tt.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Ee>=(Be??Re.logLevel)&&G({level:te[Ee].toLowerCase(),message:ve,args:tt,type:Re.name})}}}},8766:(at,De,L)=>{L.d(De,{Lj:()=>xe,X3:()=>lt});var d=L(5861);let F,ae;const le=new WeakMap,me=new WeakMap,ge=new WeakMap,G=new WeakMap,W=new WeakMap;let Re={get($,ye,J){if($ instanceof IDBTransaction){if("done"===ye)return me.get($);if("objectStoreNames"===ye)return $.objectStoreNames||ge.get($);if("store"===ye)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return _e($[ye])},set:($,ye,J)=>($[ye]=J,!0),has:($,ye)=>$ instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in $};function ve($){return"function"==typeof $?function tt($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...ye){return $.apply(Xe(this),ye),_e(le.get(this))}:function(...ye){return _e($.apply(Xe(this),ye))}:function(ye,...J){const ne=$.call(Xe(this),ye,...J);return ge.set(ne,ye.sort?ye.sort():[ye]),_e(ne)}}($):($ instanceof IDBTransaction&&function Be($){if(me.has($))return;const ye=new Promise((J,ne)=>{const oe=()=>{$.removeEventListener("complete",ie),$.removeEventListener("error",Fe),$.removeEventListener("abort",Fe)},ie=()=>{J(),oe()},Fe=()=>{ne($.error||new DOMException("AbortError","AbortError")),oe()};$.addEventListener("complete",ie),$.addEventListener("error",Fe),$.addEventListener("abort",Fe)});me.set($,ye)}($),(($,ye)=>ye.some(J=>$ instanceof J))($,function se(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Re):$)}function _e($){if($ instanceof IDBRequest)return function X($){const ye=new Promise((J,ne)=>{const oe=()=>{$.removeEventListener("success",ie),$.removeEventListener("error",Fe)},ie=()=>{J(_e($.result)),oe()},Fe=()=>{ne($.error),oe()};$.addEventListener("success",ie),$.addEventListener("error",Fe)});return ye.then(J=>{J instanceof IDBCursor&&le.set(J,$)}).catch(()=>{}),W.set(ye,$),ye}($);if(G.has($))return G.get($);const ye=ve($);return ye!==$&&(G.set($,ye),W.set(ye,$)),ye}const Xe=$=>W.get($);function lt($,ye,{blocked:J,upgrade:ne,blocking:oe,terminated:ie}={}){const Fe=indexedDB.open($,ye),Oe=_e(Fe);return ne&&Fe.addEventListener("upgradeneeded",ht=>{ne(_e(Fe.result),ht.oldVersion,ht.newVersion,_e(Fe.transaction))}),J&&Fe.addEventListener("blocked",()=>J()),Oe.then(ht=>{ie&&ht.addEventListener("close",()=>ie()),oe&&ht.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Oe}function xe($,{blocked:ye}={}){const J=indexedDB.deleteDatabase($);return ye&&J.addEventListener("blocked",()=>ye()),_e(J).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function He($,ye){if(!($ instanceof IDBDatabase)||ye in $||"string"!=typeof ye)return;if(Ue.get(ye))return Ue.get(ye);const J=ye.replace(/FromIndex$/,""),ne=ye!==J,oe=Ie.includes(J);if(!(J in(ne?IDBIndex:IDBObjectStore).prototype)||!oe&&!we.includes(J))return;const ie=function(){var Fe=(0,d.Z)(function*(Oe,...ht){const $t=this.transaction(Oe,oe?"readwrite":"readonly");let Bt=$t.store;return ne&&(Bt=Bt.index(ht.shift())),(yield Promise.all([Bt[J](...ht),oe&&$t.done]))[0]});return function(ht){return Fe.apply(this,arguments)}}();return Ue.set(ye,ie),ie}!function Ee($){Re=$(Re)}($=>({...$,get:(ye,J,ne)=>He(ye,J)||$.get(ye,J,ne),has:(ye,J)=>!!He(ye,J)||$.has(ye,J)}))},5861:(at,De,L)=>{function d(F,ae,se,fe,le,me,ge){try{var G=F[me](ge),W=G.value}catch(X){return void se(X)}G.done?ae(W):Promise.resolve(W).then(fe,le)}function te(F){return function(){var ae=this,se=arguments;return new Promise(function(fe,le){var me=F.apply(ae,se);function ge(W){d(me,fe,le,ge,G,"next",W)}function G(W){d(me,fe,le,ge,G,"throw",W)}ge(void 0)})}}L.d(De,{Z:()=>te})}},at=>{at(at.s=3107)}]);